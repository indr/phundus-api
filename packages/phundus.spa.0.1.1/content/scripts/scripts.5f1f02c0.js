!function(){"use strict";var a=angular.module("ph.common",[]);a.constant("_",window._),a.constant("$",window.$)}(),function(){"use strict";angular.module("ph.common").directive("bothOrNone",[function(){return{restrict:"A",require:"ngModel",scope:{otherModelValue:"=bothOrNone"},link:function(a,b,c,d){d.$validators.bothOrNone=function(b){b=b||null;var c=a.otherModelValue||null,d=!1;return null!==b?d=!0:null===b&&null===c?d=!0:null===b&&null!==c&&(d=!1),d},a.$watch("otherModelValue",function(){d.$validate()})}}}])}(),function(){"use strict";angular.module("ph.common").directive("compareTo",[function(){return{restrict:"A",require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(a,b,c,d){d.$validators.compareTo=function(b){return b===a.otherModelValue},a.$watch("otherModelValue",function(){d.$validate()})}}}])}(),function(){"use strict";angular.module("ph.common").filter("unique",function(){return function(a,b){if(!a)return a;var c,d={},e=a.length,f=[];for(c=0;c<e;c+=1)d[a[c][b]]=a[c];for(c in d)f.push(d[c]);return f}})}(),function(){"use strict";angular.module("ph.common").service("uuid4",function(){var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";this.generate=function(){return a.replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})}})}(),function(){"use strict";angular.module("ph.alerts",["ui.bootstrap"])}(),function(){"use strict";function a(a){function c(c){var d=a.open({templateUrl:"modules/alerts/views/modals/alert.html",controller:b,resolve:c});return d.result}return{open:c}}function b(a,b){var c={danger:"Fehler",info:"Hinweis",success:"Erfolg",warning:"Warnung"};a.alert=b,a.title=b.title||c[b.type]||"Mitteilung"}b.$inject=["$scope","alert"],a.$inject=["$uibModal"],angular.module("ph.alerts").factory("AlertModal",a)}(),function(){"use strict";function a(a,b){function c(a,c,e){null===d&&(d=b.open({alert:function(){return{type:a,msg:c,title:e}}}),d.then(function(){d=null},function(){d=null}))}var d=null;return{danger:a.partial(c,"danger"),error:a.partial(c,"danger"),info:a.partial(c,"info"),success:a.partial(c,"success"),warning:a.partial(c,"warning")}}a.$inject=["_","AlertModal"],angular.module("ph.alerts").factory("Alert",a)}(),function(){"use strict";angular.module("ph.auth",["ngCookies","ph.common"])}(),function(){"use strict";angular.module("ph.auth").directive("accessLevel",["Auth",function(a){return{restrict:"A",link:function(b,c,d){function e(){f&&g&&(a.authorize(g,f,h)?c.css("display",i):c.css("display","none"))}var f,g,h,i=c.css("display");b.user=a.user,b.$watch("user",function(a){a.role&&(f=a.role),e()},!0),d.$observe("accessLevel",function(a){a&&(g=b.$eval(a)),e()}),d.$observe("organizationId",function(a){a&&(h=b.$eval(a)),e()})}}}])}(),function(){"use strict";function a(){return{$get:b,accessLevels:g,userRoles:f}}function b(){return{accessLevels:g,userRoles:f}}function c(a){var b="01",c={};for(var d in a){var e=parseInt(b,2);c[a[d]]={bitMask:e,title:a[d]},b=(e<<1).toString(2)}return c}function d(a,b){var c={};for(var d in a){var e,f;if("string"==typeof a[d])if("*"===a[d]){f="";for(e in b)f+="1";c[d]={bitMask:parseInt(f,2)}}else console.log("Access Control Error: Could not parse '"+a[d]+"' as access definition for level '"+d+"'");else{f=0;for(e in a[d])b.hasOwnProperty(a[d][e])?f|=b[a[d][e]].bitMask:console.log("Access Control Error: Could not find role '"+a[d][e]+"' in registered roles while building access for '"+d+"'");c[d]={bitMask:f}}}return c}angular.module("ph.auth").provider("auth",a);var e={roles:["public","user","manager","admin"],accessLevels:{"public":"*",anon:["public"],user:["user","manager","admin"],manager:["manager","admin"],admin:["admin"]}},f=c(e.roles),g=d(e.accessLevels,f)}(),function(){"use strict";function a(a,b,c,d){function e(a){angular.extend(k,a),l=c.find(a.memberships,{selected:!0}),g()}function f(a){c.forEach(k.memberships,function(b){b.selected=b===a}),l=a,g()}function g(){if(l){var a=j.manager.bitMask;l.isManager?k.role.bitMask=k.role.bitMask|a:k.role.bitMask=k.role.bitMask&~a}}function h(a){if(!a)return 0;var b=c.find(k.memberships,{organizationId:a});return b&&b.isManager?j.manager.bitMask:0}var i=d.accessLevels,j=d.userRoles,k=b.getObject("ph.user")||{username:"",role:j["public"]},l=c.find(k.memberships,{selected:!0});return g(),{authorize:function(a,b,c){return void 0===b&&(b=k.role),a.bitMask&(b.bitMask|h(c))},isLoggedIn:function(a){return void 0===a&&(a=k),a.role.title===j.user.title||a.role.title===j.admin.title},isManager:function(a,b){return void 0===b&&(b=k),b.memberships&&b.memberships.some(function(b){return b.organizationId===a&&b.isManager})},isMember:function(a,b){return void 0===b&&(b=k),b.memberships&&b.memberships.some(function(b){return b.organizationId===a})},login:function(c,d,f){a.post("/api/v0/sessions",{username:c.username,password:c.password,rememberme:c.rememberme}).success(function(a){b.putObject("ph.user",a,{secure:!1}),e(a),d(a)}).error(f)},logout:function(c,d){b.remove("ph.user"),a["delete"]("/api/v0/sessions").success(function(){e({memberships:void 0,username:"",role:j["public"]}),c()}).error(d)},select:function(b,c,d){f(b),a.get("/organization/select/"+b.organizationId).success(function(a){c&&c(a)}).error(d)},accessLevels:i,userRoles:j,user:k}}a.$inject=["$http","$cookies","_","auth"],angular.module("ph.auth").factory("Auth",a)}(),function(){"use strict";angular.module("ph.domain",[])}(),function(){"use strict";function a(){function a(a,b,c,d,e){return a+" "+b+"\n"+c+"\n"+d+" "+e}function b(a){return a.line1+"\n"+(a.line2?a.line2+"\n":"")+a.street+"\n"+a.postcode+" "+a.city}return{fromFirstAndLastName:a,fromLines:b}}angular.module("ph.domain").factory("PostalAddress",a)}(),function(){"use strict";function a(a){return function(b,c,d){function e(){return d&&d>0&&a.isMember(b)?d:c}function f(a,b){return Math.max(1,Math.ceil((b-a)/864e5))}function g(a,b,c,d){var g=f(a,b),h=Math.round(100*e()/7*g*c)/100;return d?Math.max(1,Math.round(h)):h}return{getDays:f,getPrice:e,getTotal:g}}}a.$inject=["Auth"],angular.module("ph.domain").factory("priceCalculatorFactory",a)}(),function(){"use strict";angular.module("ph.ui",["ui.bootstrap","ngTagsInput","ph.common"])}(),function(){"use strict";angular.module("ph.ui").config(["uibDatepickerPopupConfig",function(a){a.clearText="Leeren",a.currentText="Heute",a.closeText="Schliessen"}])}(),function(){"use strict";angular.module("ph.ui").directive("activeNav",["$location",function(a){function b(a){return"/"!==a[a.length-1]&&(a+="/"),a}return{restrict:"A",link:function(c,d,e){var f=d[0];"A"!==d[0].tagName.toUpperCase()&&(f=d.find("a")[0]);var g=f.href;c.location=a,c.$watch("location.absUrl()",function(a){g=b(g),a=b(a),g===a||"nestedTop"===e.activeNav&&0===a.indexOf(g)?d.addClass("active"):d.removeClass("active")})}}}])}(),function(){"use strict";angular.module("ph.ui").directive("hasError",[function(){return{restrict:"A",link:function(a,b,c){var d,e,f,g=c.hasError,h=g.split(".")[0];a.$watch(h+".$submitted",function(a){d=a,i()}),a.$watch(g+".$invalid",function(a){e=a,i()}),a.$watch(g+".$touched",function(a){f=a,i()});var i=function(){e&&f||e&&d?b.addClass("has-error"):b.removeClass("has-error")}}}}])}(),function(){"use strict";angular.module("ph.ui").directive("phCheckbox",[function(){return{restrict:"E",transclude:!0,scope:{spin:"="},template:'<div data-ng-class="{\'checkbox\': true}" data-ng-hide="spin" data-ng-transclude></div><span class="glyphicon glyphicon-refresh glyphicon-spin" data-ng-show="spin"></span>'}}])}(),function(){"use strict";angular.module("ph.ui").directive("phDate",[function(){return{restrict:"E",replace:!0,scope:{value:"=",format:"@"},link:function(a){a.format=a.format||"mediumDate"},template:"<span title=\"{{value | date:'medium'}}\">{{value | date:format}}</span>"}}])}(),function(){"use strict";angular.module("ph.ui").directive("phEditable",["$parse",function(a){return{restrict:"A",scope:!1,link:function(b,c,d){var e,f=b[d.name],g=a(d.phEditable);f.$show=function(){e=angular.copy(g(b)),f.$visible=!0},f.$cancel=function(){f.$visible=!1,g.assign(b,e)}}}}])}(),function(){"use strict";angular.module("ph.ui").directive("phEditArticleLink",[function(){return{restrict:"E",scope:{articleId:"=",articleShortId:"=",ownerId:"=",ownerType:"="},template:['<a data-ng-show="ownerType == \'organization\'" href="" data-ui-sref="organization.product.details({organizationId: ownerId, articleId: articleId, articleShortId: articleShortId})">org</a>','<a data-ng-show="ownerType == \'user\'" href="" data-ui-sref="user.product.details({userId: ownerId, articleId: articleId, articleShortId: articleShortId})">user</a>'].join("")}}])}(),function(){"use strict";angular.module("ph.ui").directive("phEmailAddress",[function(){return{restrict:"EA",scope:{emailAddress:"="},template:'<a href="mailto:{{emailAddress}}">{{emailAddress}}</a>'}}])}(),function(){"use strict";function a(){return{restrict:"E",replace:!0,scope:{value:"="},template:'<span title="{{value}}">{{value | guid}}</span>'}}angular.module("ph.ui").directive("phGuid",a)}(),function(){"use strict";angular.module("ph.ui").directive("phHistoryBack",["$window",function(a){return{restrict:"A",link:function(b,c){c.bind("click",function(){a.history.back()})}}}])}(),function(){"use strict";angular.module("ph.ui").directive("phLessorLink",[function(){return{restrict:"E",scope:{lessor:"=lessor"},template:'<a data-ng-show="lessor.url" href="{{lessor.url}}">{{lessor.name}}</a><a data-ng-show="!lessor.url && lessor.type == \'user\'" href="" data-ui-sref="user.home({userId: lessor.lessorId})">{{lessor.name}}</a><a data-ng-show="!lessor.url && lessor.type == \'organization\'" href="" data-ui-sref="organization.home({organizationId: lessor.lessorId})">{{lessor.name}}</a>'}}])}(),function(){"use strict";angular.module("ph.ui").directive("phSubmit",function(){return{restrict:"E",replace:!0,scope:{form:"=",text:"@"},template:'<button class="btn" type="submit" data-ng-disabled="form.$invalid || form.$submitting || form.$pending || form.$pristine"><span class="glyphicon glyphicon-refresh glyphicon-spin" aria-hidden="true" data-ng-show="form.$submitting"></span> {{text}}</button>'}})}(),function(){"use strict";angular.module("ph.ui").directive("phVcard",[function(){return{restrict:"E",scope:{vcard:"=contact"},templateUrl:"modules/ui/views/directives/ph-vcard.html"}}])}(),function(){"use strict";function a(){return{restrict:"E",scope:{tags:"=",clicked:"="},template:'<ul class="tags"><li ng-repeat="tag in tags"><a href="#" data-ng-click="clicked(tag)">{{tag}}</a></li></ul>'}}angular.module("ph.ui").directive("phTags",a)}(),function(){"use strict";angular.module("ph.ui").directive("stSelectMultiple",["_",function(a){return{restrict:"E",require:"^stTable",scope:{collection:"=",predicate:"@",predicateExpression:"="},templateUrl:"modules/ui/views/directives/stSelectMultiple.html",link:function(b,c,d,e){function f(){j(b.collection)}function g(){var a=b.predicate;return!a&&b.predicateExpression&&(a=b.predicateExpression),a}function h(){var a=b.distinctItems.length,c=i();return a===c.length||0===c.length?"Alle":1===c.length?c[0]:c.length+" Elemente"}function i(){var a=[];return angular.forEach(b.distinctItems,function(b){b.selected&&a.push(b.value)}),a}function j(a){var c=g(),d=[];angular.forEach(a,function(a){var b=a[c];l(b,d)}),d.sort(function(a,b){return a.value>b.value?1:a.value<b.value?-1:0}),b.distinctItems=d,k()}function k(){b.dropdownLabel=h();var a=g(),c={matchAny:{}};c.matchAny.items=i();var d=c.matchAny.items.length;0===d||d===b.distinctItems.length?c.matchAny.all=!0:c.matchAny.all=!1,e.search(c,a)}function l(a,b){a&&a.trim().length>0&&!m(b,a)&&b.push({value:a,selected:!0})}function m(b,c){var d=a.find(b,function(a){return a.value===c});return d}b.dropdownLabel="",b.filterChanged=k,b.$watch("collection",function(a){a&&f()})}}}]).filter("customFilter",["$filter",function(a){var b=a("filter"),c=function(a,b){return b=(""+b).toLowerCase(),(""+a).toLowerCase().indexOf(b)>-1};return function(a,d){function e(a,b){var d,e,f,g,h=b.before,i=b.after,j=b.lower,k=b.higher;if(angular.isObject(b)){if(b.distinct)return!(!a||a.toLowerCase()!==b.distinct.toLowerCase());if(b.matchAny){if(b.matchAny.all)return!0;if(!a)return!1;for(var l=0;l<b.matchAny.items.length;l++)if(a.toLowerCase()===b.matchAny.items[l].toLowerCase())return!0;return!1}if(b.before||b.after)try{return!(h&&(d=b.before,f=new Date(a),g=new Date(d),f>g))&&!(i&&(e=b.after,f=new Date(a),g=new Date(e),f<g))}catch(m){return!1}else if(j||k)return!(j&&(d=b.lower,a>d))&&!(k&&(e=b.higher,a<e));return!0}return c(a,b)}var f=b(a,d,e);return f}}])}(),function(){"use strict";angular.module("ph.ui").filter("guid",function(){return function(a,b){return void 0===a||null===a?null:(b=b||5,a.substring(0,b))}})}(),function(){"use strict";angular.module("ph.ui").filter("replace",function(){return function(a,b,c){return void 0===a||null===a?null:a.replace(new RegExp(b,"mg"),c)}})}(),function(){"use strict";angular.module("ph.messages",["ngMessages"])}(),function(){"use strict";function a(){return{restrict:"A",transclude:!0,scope:{field:"=phMessages"},templateUrl:"modules/messages/views/directives/phMessages.html"}}angular.module("ph.messages").directive("phMessages",a)}(),function(){"use strict";angular.module("ph.upload",[])}(),function(){"use strict";function a(a,b){var c,d=a.file;d.url?(d.$state=function(){return c},d.$destroy=function(){return c="pending",b({url:d.deleteUrl,method:d.deleteType}).then(function(){c="resolved",a.clear(d)},function(){c="rejected"})}):d.$cancel||d._index||(d.$cancel=function(){a.clear(d)})}a.$inject=["$scope","$http"],angular.module("ph.upload").controller("FileDestroyCtrl",a)}(),function(){"use strict";function a(a,b,c,d){var e=b.url;b.options={url:e},b.loadingFiles=!0,c.get(e).then(function(a){b.loadingFiles=!1,b.queue=a.data.files||[]},function(){b.loadingFiles=!1}),b.toggleIsPreview=function(f){b.isPreviewSubmitting=f.isPreviewSubmitting=!0,c.patch(e+"/"+f.name,{isPreview:f.isPreview}).then(function(){b.isPreviewSubmitting=f.isPreviewSubmitting=!1,a.forEach(b.queue,function(a){a.isPreview=f===a})},function(){b.isPreviewSubmitting=f.isPreviewSubmitting=!1,f.isPreview=!1,d.error("Fehler beim Setzen als Vorschaubild.")})}}a.$inject=["_","$scope","$http","Alert"],angular.module("ph.upload").controller("FileUploadCtrl",a)}(),function(){"use strict";function a(a,b){function c(a){return"modules/account/views/"+a}var d=b.accessLevels;a.state("anon.signup",{url:"/signup",templateUrl:c("signup.html"),controller:"SignUpCtrl"}).state("anon.login",{url:"/login",data:{access:d["public"]},templateUrl:c("login.html"),controller:"LoginCtrl"}).state("anon.loggedout",{url:"/logged-out",templateUrl:c("logged-out.html")}).state("anon.reset-password",{url:"/forgot",templateUrl:c("reset-password.html"),controller:"ResetPasswordCtrl"}).state("public.validate-account",{url:"/validate/account?key",templateUrl:c("validate-account.html"),controller:"AccountValidateCtrl",resolve:{key:["$stateParams",function(a){return a.key}]}}).state("public.validate-e-mail-address",{url:"/validate/email-address?key",templateUrl:c("validate-email-address.html"),controller:"AccountValidateCtrl",resolve:{key:["$stateParams",function(a){return a.key}]}}).state("public.logout",{url:"/logout",templateUrl:c("logout.html"),controller:"LogoutCtrl"}).state("user.account",{url:"/account",templateUrl:c("account.html"),controller:"AccountCtrl"})}a.$inject=["$stateProvider","authProvider"];var b=angular.module("ph.account",["ph.messages"]);b.config(a)}(),function(){"use strict";function a(a,b,c,d,e,f){c.get({userId:b},function(b){var c=b.address;c.postcode=parseInt(c.postcode),a.address=c,a.emailAddress=b.email}),a.showChangeContact=function(){var c=d.open({userId:function(){return b},contact:function(){return angular.copy(a.address)}});c.then(function(b){a.address=b})},a.showChangePassword=function(){e.open()},a.showChangeEmailAddress=function(){f.open()}}a.$inject=["$scope","userId","Users","AccountEditContactDetailsModal","AccountChangePasswordModal","AccountChangeEmailAddressModal"],angular.module("ph.account").controller("AccountCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e){a.rememberMe=!1,a.login=function(){a.loginForm.$submitting=!0,d.login({username:a.username,password:a.password,rememberme:a.rememberMe},function(){var d=b.search().ReturnUrl;if(d)c.location.href=d;else{var e=b.search().returnPath||"/";delete b.search().returnPath,b.path(e)}a.loginForm.$submitting=!1},function(b){a.loginForm.$submitting=!1,e.error("Fehler bei der Anmeldung: "+b.message)})},a.range=function(a,b,c){c=c||1;for(var d=[],e=a;e<=b;e+=c)d.push(e);return d},a.autoLogin=function(b,c){a.username=b,a.password=c||"1234",a.login()}}a.$inject=["$scope","$location","$window","Auth","Alert"],angular.module("ph.account").controller("LoginCtrl",a)}(),function(){"use strict";function a(a,b,c){c.isLoggedIn?c.logout(function(){b.path("/logged-out")},function(b){var c="Der Server hat nicht geantwortet.";b&&(c=b.message),a.errorMessage="Fehler bei der Abmeldung: "+c}):b.path("/logged-out")}a.$inject=["$scope","$location","Auth"],angular.module("ph.account").controller("LogoutCtrl",a)}(),function(){"use strict";function a(a,b,c){a.submitted=!1,a.submit=function(){a.form.$submitting=!0,c.post(a.resetPassword,function(){a.form.$submitting=!1,a.submitted=!0},function(){a.form.$submitting=!1,b.error("Fehler beim Zurücksetzen des Passworts.")})}}a.$inject=["$scope","Alert","AccountResetPassword"],angular.module("ph.account").controller("ResetPasswordCtrl",a)}(),function(){"use strict";function a(a,b,c,d){a.user={},a.submitted=!1,c.query({},function(b){a.organizations=b.results},function(){d.error("Fehler beim Laden der Organisationen.")}),a.submit=function(){return a.form.$valid?(a.form.$submitting=!0,void b.post(a.user,function(){a.form.$submitting=!1,a.submitted=!0},function(b){a.form.$submitting=!1,d.error("Fehler bei der Registrierung: "+b.data.message)})):void d.error("Bitte überprüfe deine Eingaben.")}}a.$inject=["$scope","Users","Organizations","Alert"],angular.module("ph.account").controller("SignUpCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e){a.validate={key:d},a.submitted=!1,a.submit=function(){a.form.$submitting=!0,c.post(a.validate,function(){a.form.$submitting=!1,a.submitted=!0},function(){a.form.$submitting=!1,b.error("Fehler beim Validieren des Keys.")})},void 0!==d&&e(a.submit)}a.$inject=["$scope","Alert","Validate","key","$timeout"],angular.module("ph.account").controller("AccountValidateCtrl",a)}(),function(){"use strict";angular.module("ph.account").directive("isUniqueEmailAddress",["$q","$http",function(a,b){return{restrict:"A",require:"ngModel",link:function(c,d,e,f){f.$asyncValidators.isUnique=function(c,d){return b.post("/api/v0/email-address-check",{emailAddress:d}).then(function(b){return!!b.data.validEmailAddress||a.reject(b.data.errorMessage)})}}}}])}(),function(){"use strict";angular.module("ph.account").directive("isUniqueUsername",["$q","$http",function(a,b){return{restrict:"A",require:"ngModel",link:function(c,d,e,f){f.$asyncValidators.isUnique=function(c,d){return b.post("/api/v0/username-check",{username:d}).then(function(b){return!!b.data.validUsername||a.reject(b.data.errorMessage)})}}}}])}(),function(){"use strict";function a(a){function c(){a.open({templateUrl:"modules/account/views/modals/change-email-address.html",controller:b})}return{open:c}}function b(a,b,c,d){function e(){a.formChangeEmailAddress.$valid&&(a.success=null,a.error=null,a.formChangeEmailAddress.$submitting=!0,d.post(a.changeEmailAddress,function(){a.formChangeEmailAddress.$submitting=!1,a.formChangeEmailAddress&&(a.formChangeEmailAddress.$setPristine(),a.formChangeEmailAddress.$setUntouched()),a.changeEmailAddress={},a.success="Das Bestätigungs-E-Mail wurde versendet.",c(function(){b.close()},2e3)},function(){a.formChangeEmailAddress.$submitting=!1,a.error="Fehler beim Ändern der E-Mail-Addresse."}))}function f(){b.dismiss("cancel")}a.ok=e,a.cancel=f}b.$inject=["$scope","$uibModalInstance","$timeout","AccountChangeEmailAddress"],angular.module("ph.account").factory("AccountChangeEmailAddressModal",["$uibModal",a])}(),function(){"use strict";function a(a){function c(){a.open({templateUrl:"modules/account/views/modals/change-password.html",controller:b})}return{open:c}}function b(a,b,c,d){function e(){a.formChangePassword.$valid&&(a.success=null,a.error=null,a.formChangePassword.$submitting=!0,d.post(a.changePassword,function(){a.formChangePassword.$submitting=!1,a.formChangePassword&&(a.formChangePassword.$setPristine(),a.formChangePassword.$setUntouched()),a.changePassword={},a.success="Das Passwort wurde erfolgreich geändert.",c(function(){b.close()},2e3)},function(){a.formChangePassword.$submitting=!1,a.error="Fehler beim Ändern des Passworts."}))}function f(){b.dismiss("cancel")}a.ok=e,a.cancel=f}b.$inject=["$scope","$uibModalInstance","$timeout","AccountChangePassword"],a.$inject=["$uibModal"],angular.module("ph.account").factory("AccountChangePasswordModal",a)}(),function(){"use strict";function a(a){function c(c){var d=a.open({templateUrl:"modules/account/views/modals/change-contact.html",controller:b,resolve:c});return d.result}return{open:c}}function b(a,b,c,d,e,f){function g(){a.formChangeContact.$valid&&(a.success=null,a.error=null,f.put({userId:d},a.contact,function(){a.success="Die Kontaktangaben wurden erfolgreich geändert.",b(function(){c.close(a.contact)},2e3)},function(){a.error="Fehler beim Speichern der Kontaktangaben."}))}function h(){c.dismiss("cancel")}a.contact=e,a.ok=g,a.cancel=h}b.$inject=["$scope","$timeout","$uibModalInstance","userId","contact","UsersAddress"],a.$inject=["$uibModal"],angular.module("ph.account").factory("AccountEditContactDetailsModal",a)}(),function(){"use strict";angular.module("ph.account").factory("AccountChangeEmailAddress",["$resource",function(a){return a("/api/account/change-email-address")}]).factory("AccountChangePassword",["$resource",function(a){return a("/api/account/change-password")}]).factory("AccountResetPassword",["$resource",function(a){return a("/api/account/reset-password")}]).factory("Validate",["$resource",function(a){return a("/api/v0/account/validate")}])}(),function(){"use strict";function a(a,b){function c(a){return"modules/admin/views/"+a}var d=b.accessLevels;a.state("admin",{"abstract":!0,template:"<ui-view/>",data:{access:d.admin},url:"/admin"}).state("admin.eventLog",{url:"/event-log",templateUrl:c("event-log.html"),controller:"AdminEventLogCtrl"}).state("admin.eventProcessors",{url:"/event-processors",templateUrl:c("event-processors.html"),controller:"AdminEventProcessorsCtrl"}).state("admin.mails",{url:"/mails/",templateUrl:c("mails.html"),controller:"AdminMailsIndexCtrl"}).state("admin.organizations",{url:"/organizations/",templateUrl:c("organizations.html"),controller:"AdminOrganizationsIndexCtrl"}).state("admin.schemaUpdate",{url:"/schema-update",template:"<h1>Schema-Update</h1><pre>{{schemaUpdate}}</pre>",controller:"AdminSchemaUpdateCtrl"}).state("admin.status",{url:"/status",template:"<h1>Status</h1><pre>{{data | json}}</pre>",controller:"AdminStatusCtrl"}).state("admin.users",{url:"/users/",templateUrl:c("users.html"),controller:"AdminUsersIndexCtrl"})}a.$inject=["$stateProvider","authProvider"],angular.module("ph.admin",[]).config(a)}(),function(){"use strict";angular.module("ph.admin").controller("AdminMailsIndexCtrl",["$scope","Mails","Auth","Alert",function(a,b,c,d){a.loading=!0,a.userRoles=c.userRoles,b.query(function(b){a.rowCollection=b.results,a.displayedCollection=[].concat(a.rowCollection),a.loading=!1},function(){d.error("Fehler beim Laden der E-Mails."),a.loading=!1}),a["delete"]=function(c){c?b["delete"]({mailId:c.mailId},function(){var b=a.rowCollection.indexOf(c);b!==-1&&a.rowCollection.splice(b,1)}):b["delete"]({},function(){a.rowCollection=[]})}}])}(),function(){"use strict";angular.module("ph.admin").controller("AdminEventLogCtrl",["$scope","EventLog",function(a,b){b.query(function(b){a.rowCollection=b.results,a.displayedCollection=[].concat(a.rowCollection)})}])}(),function(){"use strict";angular.module("ph.admin").controller("AdminEventProcessorsCtrl",["$scope","EventProcessors","$window",function(a,b,c){b.query(function(b){a.maxEventId=b.maxEventId,a.rowCollection=b.results,a.displayedCollection=[].concat(a.rowCollection)}),a.process=function(a){b.patch({processorId:a.processorId})},a.processAll=function(){b.patch()},a.reset=function(a){b.put({processorId:a.processorId})},a.recreate=function(a){b["delete"]({processorId:a.processorId})},a.showStatus=function(a){null!==a.errorMessage&&c.alert(a.errorMessage)}}])}(),function(){"use strict";angular.module("ph.admin").controller("AdminOrganizationsIndexCtrl",["$scope","AdminOrganizations","Organizations","Auth","Alert","$window","$state",function(a,b,c,d,e,f,g){a.loading=!0,b.query(function(b){a.rowCollection=b.results,a.displayedCollection=[].concat(a.rowCollection),a.loading=!1},function(){e.error("Fehler beim Laden der Organisationen."),a.loading=!1}),a.establishOrganization=function(){var a=f.prompt("Name der neuen Organisation","");a&&c.post({name:a},function(a){e.success("Die Organisation wurde erfolgreich gegründet."),g.go("organization.home",{organizationId:a.organizationId})},function(){e.error("Fehler beim Gründen der Organisation.")})},a.changePlan=function(a,b){c.patch({organizationId:a.organizationId,plan:b},function(){a.plan=b})}}])}(),function(){"use strict";angular.module("ph.admin").controller("AdminSchemaUpdateCtrl",["$scope","SchemaUpdate","Alert",function(a,b,c){a.loading=!0,b.query(function(b){a.loading=!1,a.schemaUpdate=b.script},function(){a.loading=!1,c.error("Fehler beim Laden des Schema-Updates.")})}])}(),function(){"use strict";angular.module("ph.admin").controller("AdminStatusCtrl",["$scope","$resource","Alert",function(a,b,c){b("/api/v0/status").get({},function(b){a.data=b},function(){c.error("Fehler beim Laden der Statusinformationen.")})}])}(),function(){"use strict";angular.module("ph.admin").controller("AdminUsersIndexCtrl",["$scope","AdminUsers","Alert",function(a,b,c){b.query({},function(b){a.rowCollection=b.results,a.displayedCollection=[].concat(a.rowCollection)},function(){c.error("Fehler beim Laden der Benutzer.")}),a.toggleIsApproved=function(a){a.isApprovedSubmitting=!0,b.patch({userId:a.userId,isApproved:a.isApproved},function(){a.isApprovedSubmitting=!1},function(){a.isApproved=!a.isApproved,a.isApprovedSubmitting=!1,c.error("Fehler beim Bestätigen des Benutzers.")})},a.toggleIsLocked=function(a){a.isLockedSubmitting=!0,b.patch({userId:a.userId,isLocked:a.isLocked},function(){a.isLockedSubmitting=!1},function(){a.isLocked=!a.isLocked,a.isLockedSubmitting=!1,c.error("Fehler beim Sperren/Entsperren des Benutzers.")})},a.toggleIsAdmin=function(a){a.isAdminSubmitting=!0,b.patch({userId:a.userId,isAdmin:a.isAdmin},function(){a.isAdminSubmitting=!1},function(){a.isAdmin=!a.isAdmin,a.isAdminSubmitting=!1,c.error("Fehler beim Setzen der Rolle des Benutzers.")})}}])}(),function(){"use strict";angular.module("ph.admin").filter("organizationPlan",[function(){return function(a){var b={free:"Kostenlos",membership:"Mitgliedschaft"};return b[a]||a}}])}(),function(){"use strict";angular.module("ph.admin").factory("AdminOrganizations",["$resource",function(a){return a("/api/v0/admin/organizations/:organizationId",{organizationId:"@organizationId"})}]).factory("AdminUsers",["$resource",function(a){return a("/api/v0/admin/users/:userId",{userId:"@userId"})}]).factory("EventLog",["$resource",function(a){return a("/api/v0/event-log",{})}]).factory("EventProcessors",["$resource",function(a){return a("/api/v0/event-processors/:processorId",{processorId:"@processorId"})}]).factory("Mails",["$resource",function(a){return a("/api/v0/mails/:mailId",{mailId:"@mailId"})}]).factory("SchemaUpdate",["$resource",function(a){return a("/api/v0/schema-update")}])}(),function(){"use strict";angular.module("ph.contracts",[])}(),function(){"use strict";angular.module("ph.contracts").factory("Contracts",["$resource",function(a){return a("/api/v0/contracts/:contractId",{contractId:"@contractId"})}]).factory("ContractItems",["$resource",function(a){return a("/api/v0/contracts/:contractId/items/:contractItemId",{contractId:"@contractId",contractItemId:"@contractItemId"})}])}(),function(){"use strict";function a(a){a.state("public.debug",{url:"/debug",templateUrl:"modules/debug/views/debug.html",controller:"DebugCtrl"})}a.$inject=["$stateProvider"],angular.module("ph.debug",[]).config(a),a.inject=["$stateProvider"]}(),function(){"use strict";function a(a,b,c,d,e,f,g){b.status={},b.host=f.host(),c.get("/api/v0/status").success(function(a){b.status=a}),b.toggleCartPopover=function(){a("#popover-glyphicon-cart").popover("show"),e(function(){a("#popover-glyphicon-cart").popover("hide")},4e3,!0)},b.cookies=d.getAll(),b.alertMsg="Alert message",b.addError=function(){g.error(b.alertMsg)},b.addDanger=function(){g.danger(b.alertMsg)},b.addWarning=function(){g.warning(b.alertMsg)},b.addSuccess=function(){g.success(b.alertMsg)}}a.$inject=["$","$scope","$http","$cookies","$timeout","$location","Alert"],angular.module("ph.debug").controller("DebugCtrl",a)}(),function(){"use strict";function a(a){a.state("public.feedback",{url:"/feedback",templateUrl:"modules/feedback/views/feedback.html",controller:"FeedbackCtrl"})}a.$inject=["$stateProvider"];var b=angular.module("ph.feedback",["ngResource","ui.router","ph.alerts","ph.auth"]);b.config(a)}(),function(){"use strict";function a(a,b,c,d){a.feedback={emailAddress:b.user.username||void 0},a.submitted=!1,a.submit=function(){a.form.$submitting=!0,d.post(a.feedback,function(){a.form.$submitting=!1,a.submitted=!0},function(){a.form.$submitting=!1,c.error("Fehler beim Senden des Feedbacks.")})}}a.$inject=["$scope","Auth","Alert","Feedback"],angular.module("ph.feedback").controller("FeedbackCtrl",a)}(),function(){"use strict";angular.module("ph.feedback").factory("Feedback",["$resource",function(a){return a("/api/v0/feedback")}])}(),function(){"use strict";angular.module("ph.inventory",["ph.upload"])}(),function(){"use strict";function a(){return{restrict:"EA",replace:"true",bindToController:{tenantId:"=",articleId:"="},controllerAs:"ipa",controller:b,templateUrl:"modules/inventory/views/directives/phInventoryArticleActivities.html"}}function b(a,b){var c=this;a.get({articleId:c.articleId},function(a){c.actions=a.results},function(a){b.error("Fehler beim Laden der Artikel-Aktivitäten: "+a.data.message)})}b.$inject=["ArticlesActions","Alert"],angular.module("ph.inventory").directive("phInventoryArticleActivities",a)}(),function(){"use strict";function a(){return{restrict:"EA",replace:"true",bindToController:{tenantId:"=",articleId:"="},controllerAs:"vm",controller:b,templateUrl:"modules/inventory/views/directives/phInventoryArticleDescription.html"}}function b(a,b){var c=this;c.data={},a.get({ownerId:c.tenantId,articleId:c.articleId},function(a){c.data.description=a.description},function(){b.error("Fehler beim Laden der Beschreibung.")}),c.submit=function(){c.form.$submitting=!0,a.patch({ownerId:c.tenantId,articleId:c.articleId,description:c.data.description},function(){c.form.$submitting=!1,b.success("Die Beschreibung wurde erfolgreich gespeichert.")},function(){c.form.$submitting=!1,b.error("Fehler beim Speichern der Beschreibung.")})}}b.$inject=["Articles","Alert"],angular.module("ph.inventory").directive("phInventoryArticleDescription",a)}(),function(){"use strict";function a(){function a(a){function b(){function b(a){return c.article=a,a}a.get({tenantId:c.tenantId,articleId:c.articleId}).$promise.then(b)}var c=this;c.article=null,b()}return a.$inject=["Articles"],{restrict:"EA",replace:"true",bindToController:{tenantId:"=",articleId:"=",hasMemberPrice:"="},controllerAs:"vm",controller:a,templateUrl:"modules/inventory/views/directives/phInventoryArticleDetails.html"}}angular.module("ph.inventory").directive("phInventoryArticleDetails",a);
}(),function(){"use strict";function a(){return{restrict:"EA",replace:"true",scope:{tenantId:"=",articleId:"=",article:"="},controller:b,templateUrl:"modules/inventory/views/directives/phInventoryArticleFields.html"}}function b(a,b,c,d){function e(){b.form.$submitting=!0;var a=b.formModel;c.patch({ownerId:b.tenantId,articleId:b.articleId,name:a.name,brand:a.brand,grossStock:a.grossStock,color:a.color},function(){b.form.$submitting=!1,d.success("Das Material wurde erfolgreich gespeichert.")},function(){b.form.$submitting=!1,d.error("Fehler beim Speichern des Material.")})}function f(){angular.copy(b.formReset,b.formModel),b.form.$setPristine()}b.submit=e,b.reset=f,b.$watch("article",function(c){c&&(b.formReset=a.pick(c,["name","brand","grossStock","color"]),b.formModel=angular.copy(b.formReset))})}b.$inject=["_","$scope","Articles","Alert"],angular.module("ph.inventory").directive("phInventoryArticleFields",a)}(),function(){"use strict";function a(){return{restrict:"EA",replace:"true",scope:{tenantId:"=",articleId:"="},controller:b,templateUrl:"modules/inventory/views/directives/phInventoryArticleFiles.html"}}function b(a){a.url="/api/v0/articles/"+a.articleId+"/files",a.hasPreview=!0}b.$inject=["$scope"],angular.module("ph.inventory").directive("phInventoryArticleFiles",a)}(),function(){"use strict";function a(){return{restrict:"EA",replace:"true",scope:{tenantId:"=",articleId:"=",hasMemberPrice:"=",article:"="},controller:b,templateUrl:"modules/inventory/views/directives/phInventoryArticlePrices.html"}}function b(a,b,c,d){function e(a,e){a.$submitting=!0,c.patch({articleId:b.articleId,prices:e},function(){b.pricesFormReset=angular.copy(b.pricesFormModel),a.$setPristine(),a.$submitting=!1,d.success("Die Einstellungen wurden erfolgreich gespeichert.")},function(b){a.$submitting=!1,d.error("Fehler beim Speichern der Einstellungen: "+(angular.isDefined(b.message)?b.message:"Unbekannter Fehler."))})}function f(a,b,c){angular.copy(c,b),a.$setPristine()}b.submitPrices=e,b.resetPrices=f,b.$watch("article",function(c){c&&(b.pricesFormReset=a.pick(c,["publicPrice","memberPrice"]),b.pricesFormModel=angular.copy(b.pricesFormReset))})}b.$inject=["_","$scope","Articles","Alert"],angular.module("ph.inventory").directive("phInventoryArticlePrices",a)}(),function(){"use strict";function a(){return{restrict:"EA",replace:"true",bindToController:{tenantId:"=",articleId:"="},controllerAs:"vm",controller:b,templateUrl:"modules/inventory/views/directives/phInventoryArticleSpecification.html"}}function b(a,b){var c=this;c.data={},a.get({ownerId:c.tenantId,articleId:c.articleId},function(a){c.data.specification=a.specification},function(){b.error("Fehler beim Laden der Spezifikation.")}),c.submit=function(){c.form.$submitting=!0,a.patch({ownerId:c.tenantId,articleId:c.articleId,specification:c.data.specification},function(){c.form.$submitting=!1,b.success("Die Spezifikation wurde erfolgreich gespeichert.")},function(){c.form.$submitting=!1,b.error("Fehler beim Speichern der Spezifikation.")})}}b.$inject=["Articles","Alert"],angular.module("ph.inventory").directive("phInventoryArticleSpecification",a)}(),function(){"use strict";function a(){return{restrict:"EA",replace:"true",bindToController:{tenantId:"=",articleId:"="},controllerAs:"vm",controller:b,templateUrl:"modules/inventory/views/directives/phInventoryArticleStock.html"}}function b(a){var b=this;a.get({ownerId:b.tenantId,articleId:b.articleId},function(a){b.availabilities=a.availabilities,b.reservations=a.reservations})}b.$inject=["ArticlesStock"],angular.module("ph.inventory").directive("phInventoryArticleStock",a)}(),function(){"use strict";function a(){function a(a,b,c,d,e){function f(d){var f={tenantId:b.tenantId,articleId:b.articleId,name:d.text};c.post(f,function(){},function(){e.error("Fehler beim Hinzufügen des Tags."),a.remove(b.tags,d)})}function g(a){var d={tenantId:b.tenantId,articleId:b.articleId,tag:a.text};c["delete"](d,function(){},function(){e.error("Fehler beim Entfernen des Tags."),b.tags.push(a)})}function h(b){return d.query({q:b}).$promise.then(function(b){return a.map(b.results,function(a){return a.name})})}b.tagAdded=f,b.tagRemoved=g,b.loadTags=h}return{restrict:"E",replace:"true",scope:{tenantId:"=",articleId:"=",tags:"="},controller:["_","$scope","InventoryArticleTags","InventoryTags","Alert",a],templateUrl:"modules/inventory/views/directives/phInventoryArticleTagsInput.html"}}angular.module("ph.inventory").directive("phInventoryArticleTagsInput",a)}(),function(){"use strict";function a(a,c,d){function e(e,f){var g=a.open({templateUrl:"modules/inventory/views/modals/inventoryCreateArticleModal.html",controller:b,resolve:{tenantId:function(){return e}}});g.result.then(function(a){c.post(a,f,function(){d.error("Fehler beim Erstellen des Materials.")})})}return{open:e}}function b(a,b,c){a.name="",a.quantity=1,a.ok=function(){a.form.$valid&&b.close({ownerId:c,name:a.name,quantity:a.quantity})},a.cancel=function(){b.dismiss("cancel")}}b.$inject=["$scope","$uibModalInstance","tenantId"],a.$inject=["$uibModal","Articles","Alert"],angular.module("ph.inventory").factory("inventoryCreateArticleModal",a)}(),function(){"use strict";angular.module("ph.inventory").factory("Articles",["$resource",function(a){return a("/api/v0/articles/:articleId",{articleId:"@articleId"})}]).factory("ArticlesActions",["$resource",function(a){return a("/api/v0/articles/:articleId/actions",{articleId:"@articleId"})}]).factory("ArticlesStock",["$resource",function(a){return a("/api/v0/articles/:articleId/stock",{articleId:"@articleId"})}]).factory("InventoryArticleTags",["$resource",function(a){return a("/api/v0/inventory/:tenantId/articles/:articleId/tags/:tag",{tenantId:"@tenantId",articleId:"@articleId",tag:"@tag"})}]).factory("InventoryTags",["$resource",function(a){return a("/api/v0/inventory/tags")}])}(),function(){"use strict";angular.module("ph.orders",[])}(),function(){"use strict";function a(){return function(a){var b={Pending:"Provisorisch",Approved:"Bestätigt",Rejected:"Abgelehnt",Closed:"Abgeschlossen"};return b[a]||a}}angular.module("ph.orders").filter("orderStatusText",a)}(),function(){"use strict";function a(a){function c(c){var d=a.open({templateUrl:"modules/orders/views/modals/add-order-item.html",controller:b,resolve:c});return d.result}return{open:c}}function b(a,b,c,d,e,f,g){var h={getPrice:function(){return 0},getTotal:function(){return 0}},i=function(){a.unitPrice=h.getPrice(),a.lineTotal=h.getTotal(a.fromUtc,a.toUtc,a.quantity,!0)};e?(a.fromUtc=e.fromUtc,a.toUtc=e.toUtc,a.quantity=e.quantity,a.unitPrice=e.unitPrice,a.lineTotal=e.lineTotal):(a.fromUtc=new Date,a.toUtc=new Date,a.quantity=1,a.unitPrice=0,a.lineTotal=0),a.getArticles=function(a){return f.get("/api/v0/articles",{params:{ownerId:c,q:a}}).then(function(a){return a.data.results})},a.ok=function(){a.addItemForm.$valid&&b.close({lessorId:c,orderId:d,articleId:a.selected.articleId,articleShortId:a.selected.articleShortId,text:a.selected.name,fromUtc:a.fromUtc,toUtc:a.toUtc,quantity:a.quantity,unitPrice:a.unitPrice,lineTotal:a.lineTotal})},a.cancel=function(){b.dismiss("cancel")},a.$watch("selected",function(a){a&&(h=g(c,a.publicPrice,a.memberPrice),i())}),a.$watch("fromUtc",function(a){a&&i()}),a.$watch("toUtc",function(a){a&&i()}),a.$watch("quantity",function(a){a&&i()})}b.$inject=["$scope","$uibModalInstance","lessorId","orderId","item","$http","priceCalculatorFactory"],a.$inject=["$uibModal"],angular.module("ph.orders").factory("OrdersAddOrderItemModal",a)}(),function(){"use strict";function a(a){function c(c){var d=a.open({templateUrl:"modules/orders/views/modals/create-order.html",controller:b,resolve:c});return d.result}return{open:c}}function b(a,b,c,d){a.getMembers=function(a){return d.get("/api/v0/organizations/"+c+"/members",{params:{username:a}}).then(function(a){return a.data.results.map(function(a){return a})})},a.ok=function(){b.close(a.selected)},a.cancel=function(){b.dismiss("cancel")}}b.$inject=["$scope","$uibModalInstance","lessorId","$http"],a.$inject=["$uibModal"],angular.module("ph.orders").factory("OrdersCreateOrderModal",a)}(),function(){"use strict";angular.module("ph.orders").factory("Orders",["$resource",function(a){return a("/api/v0/orders/:orderId",{orderId:"@orderId"})}]).factory("OrderItems",["$resource",function(a){return a("/api/v0/orders/:orderId/items/:orderItemId",{orderId:"@orderId",orderItemId:"@orderItemId"})}])}(),function(){"use strict";function a(a,b){function c(a){return"modules/organizations/views/"+a}var d=b.accessLevels;a.state("organizations",{data:{access:d["public"]},url:"/organizations/",templateUrl:c("organizations.html"),controller:"OrganizationsCtrl"}).state("organization",{"abstract":!0,data:{access:d.manager},url:"/organizations/{organizationId}",template:'<ph-organization-navbar data-organization-id="organizationId"></ph-organization-navbar><ui-view></ui-view>',controller:["$scope","organizationId",function(a,b){a.organizationId=b}],resolve:{organizationId:["$stateParams",function(a){return a.organizationId}],tenantId:["$stateParams",function(a){return a.organizationId}]}}).state("organization.home",{data:{access:d["public"]},url:"",templateUrl:c("home.html"),controller:"OrganizationCtrl",resolve:{organizationId:["$stateParams",function(a){return a.organizationId}]}}).state("organization.applications",{url:"/applications/",templateUrl:c("applications.html"),controller:"OrganizationApplicationsCtrl"}).state("organization.contact-details",{url:"/contact",templateUrl:c("edit-contact-details.html"),controller:"OrganizationsEditContactDetailsCtrl"}).state("organization.files",{url:"/files/",templateUrl:c("files.html"),controller:["$scope","organizationId",function(a,b){a.url="/api/v0/organizations/"+b+"/files"}]}).state("organization.members",{url:"/members/",templateUrl:c("members.html"),controller:"OrganizationMembersCtrl"}).state("organization.orders",{url:"/orders/",templateUrl:c("orders.html"),controller:"OrganizationOrdersCtrl",controllerAs:"vm"}).state("organization.order",{url:"/orders/{orderId}",templateUrl:c("order.html"),controller:"OrganizationOrderCtrl",resolve:{orderId:["$stateParams",function(a){return a.orderId}]}}).state("organization.products",{url:"/products/",templateUrl:c("products.html"),controller:"OrganizationsProductsCtrl"}).state("organization.product",{"abstract":!0,url:"/products/:articleId/:articleShortId",template:'<ph-organization-article-navbar data-organization-id="organizationId" data-article-id="articleId" data-article-short-id="articleShortId"></ph-organization-article-navbar><ui-view/>',controller:["$scope","organizationId","articleId","articleShortId",function(a,b,c,d){a.tenantId=b,a.articleId=c,a.articleShortId=d}],resolve:{articleId:["$stateParams",function(a){return a.articleId||a.productId}],articleShortId:["$stateParams",function(a){return a.articleShortId}]}}).state("organization.product.actions",{url:"/actions",template:'<view-title>Aktivitäten</view-title><div ph-inventory-article-activities tenant-id="tenantId" article-id="articleId"></div>'}).state("organization.product.details",{url:"/",template:'<view-title>Material bearbeiten</view-title><div ph-inventory-article-details tenant-id="tenantId" article-id="articleId" has-member-price="true"></div>'}).state("organization.product.description",{url:"/description",template:'<view-title>Beschreibung bearbeiten</view-title><div ph-inventory-article-description tenant-id="tenantId" article-id="articleId"></div>'}).state("organization.product.specification",{url:"/specification",template:'<view-title>Spezifikation bearbeiten</view-title><div ph-inventory-article-specification tenant-id="tenantId" article-id="articleId"></div>'}).state("organization.product.stock",{url:"/stock",template:'<view-title>Bestand</view-title><div ph-inventory-article-stock tenant-id="tenantId" article-id="articleId"></div>'}).state("organization.product.files",{url:"/files",template:'<view-title>Dateien</view-title><div ph-inventory-article-files tenant-id="tenantId" article-id="articleId"></div>'}).state("organization.settings",{url:"/settings",templateUrl:c("settings.html"),controller:"OrganizationsSettingsCtrl"}).state("organization.startpage",{url:"/startpage",templateUrl:c("edit-startpage.html"),controller:"OrganizationsEditStartpageCtrl"}).state("organization.store",{url:"/store",template:'<ph-store store="store" data-is-editable="true" loaded="true"></ph-store>',controller:"OrganizationsStoreCtrl"})}a.$inject=["$stateProvider","authProvider"];var b=angular.module("ph.organizations",["ph.inventory","ph.orders","ph.stores","ph.upload"]);b.config(a)}(),function(){"use strict";function a(a,b,c,d,e,f){d.query({organizationId:c},function(a){b.rowCollection=a.results,b.displayedCollection=[].concat(b.rowCollection)},function(){f.error("Fehler beim Laden der Beitrittsanfragen.")}),b.approve=function(a){a.isApproving=!0,e.post({organizationId:c,applicationId:a.applicationId},function(){a.isApproved=!0,a.isApproving=!1;var c=b.rowCollection.indexOf(a);c!==-1&&b.rowCollection.splice(c,1)},function(){a.isApproving=!1,f.error("Fehler beim Bestätigen der Beitrittsanfrage.")})},b.reject=function(a){a.isRejecting=!0,d["delete"]({organizationId:c,applicationId:a.applicationId},function(){a.isRejected=!0,a.isRejecting=!1;var c=b.rowCollection.indexOf(a);c!==-1&&b.rowCollection.splice(c,1)},function(){a.isRejecting=!1,f.error("Fehler beim Ablehnen der Beitrittsanfrage.")})}}a.$inject=["_","$scope","organizationId","Applications","Members","Alert"],angular.module("ph.organizations").controller("OrganizationApplicationsCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e,f){b.contactDetails=null,d.get({organizationId:c},function(a){var c=a.contact;c.postcode=parseInt(c.postcode),b.contactDetails=c},function(){e.error("Fehler beim Laden der Kontaktdetails.")});var g=function(){f.go("organization.home",{organizationId:c})};b.submit=function(){b.form.$submitting=!0,d.patch({organizationId:c,contactDetails:b.contactDetails},function(){b.form.$submitting=!1,e.success("Die Kontaktdetails wurde erfolgreich gespeichert."),g()},function(){b.form.$submitting=!1,e.error("Fehler beim Speichern der Kontaktdetails.")})},b.cancel=g}a.$inject=["_","$scope","organizationId","Organizations","Alert","$state"],angular.module("ph.organizations").controller("OrganizationsEditContactDetailsCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e){a.data={},c.get({organizationId:b},function(b){a.data.startpage=b.startpage},function(){d.error("Fehler beim Laden der Startseite.")});var f=function(){e.go("organization.home",{organizationId:b})};a.submit=function(){a.form.$submitting=!0,c.patch({organizationId:b,startpage:a.data.startpage},function(){a.form.$submitting=!1,d.success("Die Startseite wurde erfolgreich gespeichert."),f()},function(){a.form.$submitting=!1,d.error("Fehler beim Speichern der Startseite.")})},a.cancel=f}a.$inject=["$scope","organizationId","Organizations","Alert","$state"],angular.module("ph.organizations").controller("OrganizationsEditStartpageCtrl",a)}(),function(){"use strict";function a(a,b,c,d){c.query({organizationId:b},function(b){a.rowCollection=b.results,a.displayedCollection=[].concat(a.rowCollection)},function(){d.error("Fehler beim Laden der Mitglieder.")}),a.toggleIsLocked=function(a){a.isLockedSubmitting=!0,c.patch({organizationId:b,memberId:a.memberId,isLocked:a.isLocked},function(){a.isLockedSubmitting=!1},function(){a.isLocked=!a.isLocked,a.isLockedSubmitting=!1,d.error("Fehler beim Sperren/Entsperren des Benutzers.")})},a.toggleIsManager=function(a){a.isManagerSubmitting=!0,c.patch({organizationId:b,memberId:a.memberId,isManager:a.isManager},function(){a.isManagerSubmitting=!1,a.recievesEmailNotifications=a.isManager},function(){a.isManager=!a.isManager,a.isManagerSubmitting=!1,d.error("Fehler beim Sperren/Entsperren des Benutzers.")})},a.toggleRecievesEmailNotifications=function(a){a.isRecievesEmailNotificationsSubmitting=!0,c.patch({organizationId:b,memberId:a.memberId,recievesEmailNotifications:a.recievesEmailNotifications},function(){a.isRecievesEmailNotificationsSubmitting=!1},function(){a.recievesEmailNotifications=!a.recievesEmailNotifications,a.isRecievesEmailNotificationsSubmitting=!1,d.error("Fehler beim Setzen der E-Mail-Benachrichtung-Option des Benutzers.")})}}a.$inject=["$scope","organizationId","Members","Alert"],angular.module("ph.organizations").controller("OrganizationMembersCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){b.organizationId=c,b.orderId=d,b.order=null,b.newItem={fromUtc:new Date,toUtc:new Date},e.get({orderId:d},function(a){b.order=a},function(){g.error("Fehler beim Laden der Bestellung.")}),b.canEdit=function(){return b.order&&"Pending"===b.order.status},b.canConfirm=function(){return b.canEdit()},b.canReject=function(){return b.canEdit()},b.canClose=function(){return b.order&&"Approved"===b.order.status},b.getTotal=function(){if(!b.order||!b.order.items)return 0;for(var a=0,c=0;c<b.order.items.length;c++)a+=parseFloat(b.order.items[c].lineTotal);return a},b.newItem={articleId:"",quantity:1,fromUtc:new Date,toUtc:new Date,orderId:d},b.showAddItem=function(){var a=i.open({lessorId:function(){return b.order.lessorId},orderId:function(){return d},item:function(){return b.newItem},isMember:function(){return b.order.isMember}});a.then(function(a){b.newItem.fromUtc=a.fromUtc,b.newItem.toUtc=a.toUtc,b.newItem.quantity=a.quantity,b.newItem.lineTotal=a.lineTotal,f.post(a,function(c){a.orderLineId=c.orderLineId,a.orderItemId=c.orderLineId,a.isAvailable=c.isAvailable,b.order.items.push(a)},function(){g.error("Fehler beim Hinzufügen des Materials.")})})},b.editItem=function(a){b.saveValues={quantity:a.quantity,fromUtc:a.fromUtc,toUtc:a.toUtc,lineTotal:a.lineTotal},a.editing=!0},b.saveEditedItem=function(a){a.editing=!1,b.newItem.fromUtc=a.fromUtc,b.newItem.toUtc=a.toUtc,b.newItem.quantity=a.quantity,f.patch({orderId:b.order.orderId},a,function(b){a.quantity=b.quantity,a.fromUtc=b.fromUtc,a.toUtc=b.toUtc,a.isAvailable=b.isAvailable,a.unitPrice=b.unitPrice,a.lineTotal=b.lineTotal})},b.cancelEditing=function(a){a.editing=!1,a.quantity=b.saveValues.quantity,a.fromUtc=b.saveValues.fromUtc,a.toUtc=b.saveValues.toUtc,a.lineTotal=b.saveValues.lineTotal},b.calculateLineTotal=function(a){var b=Math.max(1,Math.ceil((new Date(a.toUtc)-new Date(a.fromUtc))/864e5));a.lineTotal=Math.round(100*a.unitPrice/7*b*a.quantity)/100},b.removeItem=function(a){h.confirm('Möchten Sie die Position "'+a.text+'" wirklich löschen?')&&f["delete"]({orderId:b.order.orderId,orderItemId:a.orderItemId},function(){var c=b.order.items.indexOf(a);b.order.items.splice(c,1)})},b.confirmOrder=function(a){for(var c=0,d=0;d<b.order.items.length;d++)b.order.items[d].isAvailable||c++;var f="Möchten Sie die Bestellung wirklich bestätigen?";if(1===c?f="1 Position ist zur Zeit nicht verfügbar.\n\n"+f:c>1&&(f=c+" Positionen sind zur Zeit nicht verfügbar.\n\n"+f),h.confirm(f)){var g=a.status;a.status="Approved",e.patch({orderId:a.orderId,status:a.status},function(){},function(){a.status=g})}},b.rejectOrder=function(a){if(h.confirm("Möchten Sie die Bestellung wirklich ablehnen?")){var b=a.status;a.status="Rejected",e.patch({orderId:a.orderId,status:a.status},function(){},function(){a.status=b})}},b.closeOrder=function(a){if(h.confirm("Möchten Sie die Bestellung wirklich abschliessen?\n\nAusstehendes Material wird dann nicht mehr reserviert sein.")){var b=a.status;a.status="Closed",e.patch({orderId:a.orderId,status:a.status},function(){},function(){a.status=b})}}}a.$inject=["$","$scope","organizationId","orderId","Orders","OrderItems","Alert","$window","OrdersAddOrderItemModal"],angular.module("ph.orders").controller("OrganizationOrderCtrl",a)}(),function(){"use strict";function a(a,b,c,d){function e(){b.query({organizationId:a},function(a){g.rowCollection=a.results,g.displayedCollection=[].concat(g.rowCollection)})}function f(){var e=d.open({lessorId:function(){return a}});e.then(function(d){b.post({lessorId:a,lesseeId:d.memberId},function(b){c.go("organization.order",{organizationId:a,orderId:b.orderId})})})}var g=this;g.rowCollection=[],g.displayedCollection=[],g.createOrder=f,e()}a.$inject=["organizationId","Orders","$state","OrdersCreateOrderModal"],angular.module("ph.organizations").controller("OrganizationOrdersCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k){b.loading=!0,b.accessLevels=e.accessLevels,b.organization=null,b.organizationId=a,b.hasContactOptions=function(){return b.organization&&(b.organization.address||b.organization.emailAddress||b.organization.website)},f.get({organizationId:a},function(f){b.organization=f,b.startpage=c.trustAsHtml(f.startpage),k(function(){b.organization.stores[0]&&b.organization.stores[0].coordinate&&i.getMap().then(function(a){var c=b.organization.stores[0].coordinate,d={lat:c.latitude,lng:c.longitude};a.setView(d,14),b.marker?b.marker.setLatLng(d):(b.marker=j.createMarker(d),b.marker.addTo(a))})},0),e.isLoggedIn()&&g.get(a,function(a){b.relationship=a.result},function(){d.error("Fehler beim Laden des Mitgliedschaftsstatus.")})},function(){d.error("Fehler beim Laden der Organisation.")}),b.join=function(){b.isJoining=!0,h.post({organizationId:a},function(){b.isJoining=!1,d.info("Die Mitgliedschaft wurde beantragt. Du erhältst ein E-Mail wenn ein Administrator diese bestätigt oder ablehnt."),b.relationship={status:"application",timestamp:new Date}},function(){b.isJoining=!1,d.error("Fehler beim Beantragen der Mitgliedschaft.")})}}a.$inject=["organizationId","$scope","$sce","Alert","Auth","Organizations","Relationships","Applications","leafletData","leafletMarkersHelpers","$timeout"],angular.module("ph.organizations").controller("OrganizationCtrl",a)}(),function(){"use strict";function a(a,b,c){a.loading=!0,b.query(function(b){a.organizations=b.results,a.displayedOrganizations=[].concat(a.organizations),a.loading=!1},function(){c.error("Fehler beim Laden der Organisationen."),a.loading=!1})}a.$inject=["$scope","Organizations","Alert"],angular.module("ph.organizations").controller("OrganizationsCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){b.loading=!0,b.userRoles=e.userRoles,b.organizationId=g,d.query({ownerId:g},function(a){b.articles=a.results,b.displayedArticles=[].concat(b.articles),b.loading=!1},function(){f.error("Fehler beim Laden der Artikel."),b.loading=!1}),b["delete"]=function(e,g){c.confirm('Möchtest du den Artikel "'+g+'" wirklich löschen?')&&d["delete"]({articleId:e},function(){f.success('Der Artikel "'+g+'" wurder erfolgreich gelöscht.'),a.remove(b.displayedArticles,{id:e}),a.remove(b.articles,{id:e})},function(){f.error('Fehler beim Löschen des Artikels "'+g+'".')})},b.createArticle=function(){i.open(g,function(a){h.go("organization.product.details",{organizationId:g,articleShortId:a.articleShortId,articleId:a.articleId})})}}a.$inject=["_","$scope","$window","Articles","Auth","Alert","organizationId","$state","inventoryCreateArticleModal"],angular.module("ph.organizations").controller("OrganizationsProductsCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e,f){d.get({organizationId:c},function(d){b.publicFormReset=a.pick(d,["organizationId","publicRental"]),b.publicFormModel=angular.copy(b.publicFormReset),b.pdfTemplateFormReset=a.pick(d,["organizationId","pdfTemplate"]),b.pdfTemplateFormModel=angular.copy(b.pdfTemplateFormReset),b.emailTemplateFormReset=a.pick(d,["organizationId","orderReceivedEmail"]),b.emailTemplateFormModel=angular.copy(b.emailTemplateFormReset),f.get("/api/v0/organizations/"+c+"/files").success(function(c){b.files=a.filter(c.files,{type:"pdf"})})},function(a){e.error("Fehler beim Laden der Einstellungen: "+(angular.isDefined(a.message)?a.message:"Unbekannter Fehler."))}),b.submit=function(a,b){a.$submitting=!0,d.patch(b,function(){a.$submitting=!1,e.success("Die Einstellungen wurden erfolgreich gespeichert.")},function(b){a.$submitting=!1,e.error("Fehler beim Speichern der Einstellungen: "+(angular.isDefined(b.message)?b.message:"Unbekannter Fehler."))})},b.reset=function(a,b){angular.copy(b,a)}}a.$inject=["_","$scope","organizationId","OrganizationSettings","Alert","$http"],angular.module("ph.organizations").controller("OrganizationsSettingsCtrl",a)}(),function(){"use strict";function a(a,b,c,d){a.store=null,c.query({ownerId:b},function(b){var c=b.results[0]||null;c&&c.contact&&(c.contact.postcode=parseInt(c.contact.postcode)),a.store=c,a.store||d.error("Die Materialstelle konnte nicht gefunden werden. Kontaktiere bitte das phundus-Team.")},function(){d.error("Fehler beim Laden der Materialstelle.")})}a.$inject=["$scope","organizationId","Stores","Alert"],angular.module("ph.organizations").controller("OrganizationsStoreCtrl",a)}(),function(){"use strict";function a(a){return{restrict:"EA",replace:"true",scope:{organizationId:"=",articleId:"=",articleShortId:"="},link:function(b){b.accessLevels=a.accessLevels,b.userRoles=a.userRoles},templateUrl:"modules/organizations/views/directives/ph-organization-product-navbar.html"}}a.$inject=["Auth"],angular.module("ph.organizations").directive("phOrganizationArticleNavbar",a)}(),function(){"use strict";function a(a){return{restrict:"EA",replace:"true",scope:{organizationId:"="},link:function(b){b.accessLevels=a.accessLevels,b.userRoles=a.userRoles},templateUrl:"modules/organizations/views/directives/ph-organization-navbar.html"}}a.$inject=["Auth"],angular.module("ph.organizations").directive("phOrganizationNavbar",a)}(),function(){"use strict";angular.module("ph.organizations").factory("Applications",["$resource",function(a){return a("/api/v0/organizations/:organizationId/applications/:applicationId",{organizationId:"@organizationId",applicationId:"@applicationId"})}]).factory("Members",["$resource",function(a){return a("/api/v0/organizations/:organizationId/members/:memberId",{organizationId:"@organizationId",memberId:"@memberId"})}]).factory("Organizations",["$resource",function(a){return a("/api/v0/organizations/:organizationId",{organizationId:"@organizationId"})}]).factory("OrganizationSettings",["$resource",function(a){return a("/api/v0/organizations/:organizationId/settings",{organizationId:"@organizationId"})}]).factory("Relationships",["$http",function(a){return{get:function(b,c,d){a.get("/api/v0/organizations/"+b+"/relationships").success(c).error(d)}}}])}(),function(){"use strict";function a(a,b){function c(a){return"modules/shop/views/"+a}var d=b.accessLevels;a.state("public.index",{url:"/?q&l",templateUrl:c("index.html"),controller:"ShopCtrl",resolve:{filter:["$stateParams",function(a){return{text:a.q,lessorId:a.l}}]}}).state("public.shop-item",{url:"/shop/:itemId",templateUrl:c("shop-item-page.html"),controller:"ShopItemCtrl",resolve:{itemId:["$stateParams",function(a){return a.itemId}],$uibModalInstance:function(){return null}}}).state("cart",{url:"/cart",data:{access:d.user},templateUrl:c("cart.html"),controller:"ShopCartCtrl",resolve:{userId:["Auth",function(a){return a.user.userId}]}}).state("checkout",{url:"/checkout",data:{access:d.user},templateUrl:c("checkout.html"),controller:"ShopCheckoutCtrl",resolve:{userId:["Auth",function(a){return a.user.userId}]}})}a.$inject=["$stateProvider","authProvider"],angular.module("ph.shop",["ngResource","ui.router","ph.alerts","ph.auth","ph.ui"]).config(a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){var i=null,j=function(b,c){a.forEach(c,function(a){a.availabilityChecking=!0});var d={productId:b,items:a.map(c,function(b){var c=a.pick(b,["fromUtc","toUtc","quantity"]);return c.correlationId=b.cartItemId,c})};f.post(d,function(b){a.forEach(b.items,function(b){var d=a.find(c,{cartItemId:b.correlationId});d&&(d.isAvailable=b.isAvailable,d.availabilityChecking=!1)})},function(b){a.forEach(c,function(a){a.isAvailable=!1,a.availabilityChecking=!1}),g.error("Fehler beim Prüfen der Verfügbarkeit: "+b.data.message)})},k=function(c){if(c){var d=a.groupBy(b.cart.items,"productId");a.forEach(d,function(a,b){j(b,a)})}};b.checkAvailability=function(b){if(b){var c=b.productId,d=a.filter(i.items,{productId:c});0!==d.length&&j(c,d)}},d.get({userId:c},function(a){b.cart=i=a,k(b.cart.items)},function(a){g.error("Fehler beim Laden des Warenkorbes: "+a.data.message)}),b.canEdit=function(){return!0},b.editItem=function(a){b.saveValues={quantity:a.quantity,fromUtc:a.fromUtc,toUtc:a.toUtc,isAvailable:a.isAvailable},a.editing=!0},b.cancelEditing=function(a){a.editing=!1,a.quantity=b.saveValues.quantity,a.fromUtc=b.saveValues.fromUtc,a.toUtc=b.saveValues.toUtc,a.isAvailable=b.saveValues.isAvailable},b.saveEditedItem=function(a){e.patch({userId:c,cartItemId:a.cartItemId},a,function(){a.editing=!1,b.calculateDaysAndItemTotal(a),b.checkAvailability(a)},function(a){g.error(a.data.message)})},b.removeItem=function(a){e["delete"]({userId:c,cartItemId:a.cartItemId},function(){var c=b.cart.items.indexOf(a);b.cart.items.splice(c,1),b.cartCleared=0===b.cart.items.length,b.checkAvailability(a)})},b.calculateDaysAndItemTotal=function(a){var b=new Date(a.toUtc)-new Date(a.fromUtc)+1;a.days=Math.max(1,Math.ceil(b/864e5)),a.itemTotal=Math.max(1,Math.round(a.unitPricePerWeek/7*a.days*a.quantity))},b.getTotal=function(){if(!b.cart||!b.cart.items)return 0;for(var a=0,c=0;c<b.cart.items.length;c++)a+=parseFloat(b.cart.items[c].itemTotal);return a},b.canGoToCheckout=function(){return!!b.cart&&a.every(b.cart.items,function(a){return!a.editing&&a.isAvailable&&!a.availabilityChecking})},b.goToCheckout=function(){b.canGoToCheckout()&&h.go("checkout")},b.clearCart=function(){b.clearingCart=!0,d["delete"]({userId:c},function(){b.clearingCart=!1,b.cart.items=[],b.cartCleared=!0},function(a){b.clearingCart=!1,g.error("Fehler beim Leeren des Warenkorbs: "+a.data.message)})}}a.$inject=["_","$scope","userId","UsersCart","UsersCartItems","ShopProductsAvailabilityCheck","Alert","$state"],angular.module("ph.shop").controller("ShopCartCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){d.get({userId:c},function(d){var g=a.groupBy(d.items,"ownerId"),i=a.reduce(g,function(b,c,d){return b.push({lessorId:d,items:c,total:a.sumBy(c,"itemTotal"),legal_notice:!1}),b},[]);b.orders=a.forEach(i,function(a){e.get({lessorId:a.lessorId},function(b){a.lessor=b},function(a){h.error("Fehler beim Laden des Vermieters: "+a.data.message)})}),f.get({lesseeId:c},function(c){a.forEach(b.orders,function(a){a.lessee=c})},function(a){h.error("Fehler beim Laden des Mieters: "+a.data.message)})},function(a){h.error("Fehler beim Laden des Warenkorbes: "+a.data.message)}),b.canPlaceOrder=function(a){return a.legal_notice},b.placeOrder=function(a){a.placing=!0,g.post({lessorId:a.lessorId},function(){a.placing=!1,a.placed=!0},function(b){a.placing=!1,a.placed=!1,h.error("Fehler beim Bestellen der Materialien: "+b.data.message)})}}a.$inject=["_","$scope","userId","UsersCart","shopLessorsResource","Lessees","ShopOrders","Alert"],angular.module("ph.shop").controller("ShopCheckoutCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){g&&g.dismiss("cancel")}function j(a){i(),h.go("public.index",{q:a})}var k=null;a.isLoading=!0,a.item=null,a.itemId=b,a.accessLevels=f.accessLevels,a.canEdit=!1,a.canRent=!1,a.close=i,a.tagClicked=j,c.get({itemId:b},function(b){a.item=b,a.isLoading=!1,d.get({lessorId:b.lessor.lessorId},function(b){a.lessor=k=b,a.canEdit=f.user.userId===k.lessorId||f.isManager(k.lessorId),a.canRent=k.publicRental||f.isMember(k.lessorId)},function(a){e.error("Fehler beim Laden des Vermieters: "+a.data.message)})},function(b){a.isLoading=!1,e.error("Fehler beim Laden des Artikels: "+b.data.message)}),a.hasDocuments=function(){return a.item&&a.item.documents.length>0}}a.$inject=["$scope","itemId","shopItemsResource","shopLessorsResource","Alert","Auth","$uibModalInstance","$state"],angular.module("ph.shop").controller("ShopItemCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(){g(1,d)}function g(a,b){e.query(a,8,b).then(h)["catch"](i)}function h(b){a.items=b.results}function i(a){
b.error("Fehler beim Laden der Artikel: "+a.data.message)}function j(a,b){a.preventDefault(),c.open({itemId:function(){return b}})}a.page=e.page,a.openItem=j,a.$watch("page.current",function(a,b){a!==b&&g(a)}),f()}a.$inject=["$scope","Alert","shopItemModal","filter","shopQueryService"],angular.module("ph.shop").controller("ShopCtrl",a)}(),function(){"use strict";function a(){function a(a,b,c,d,e,f,g,h,i,j,k){function l(){s=c.addToCartFormModel={userId:f.user.userId,fromUtc:h.fromUtc,toUtc:h.toUtc,quantity:1,isAvailable:!1,availabilityChecking:!0},e(m,500)}function m(){c.addToCartForm.$setPristine(!1),c.addToCartForm.$setDirty(!0),p()}function n(a){a&&(u=a,t=i(u.lessor.lessorId,u.publicPrice,u.memberPrice),s.itemId=s.articleId=u.itemId,s.pricePerWeek=d("number")(t.getPrice(),2))}function o(a,b){a!==b&&void 0!==b&&p()}function p(){var b=c.addToCartFormModel;if(b&&void 0!==b.itemId){if(b.toUtc<b.fromUtc)return void(b.isAvailable=!1);b.availabilityChecking=!0;var d=a.pick(b,["articleId","itemId","fromUtc","toUtc","quantity"]);j.post(d,function(a){b.isAvailable=a.isAvailable,b.availabilityChecking=!1},function(a){b.isAvailable=!1,b.availabilityChecking=!1,g.error("Fehler beim Prüfen der Verfügbarkeit: "+a.data.message)})}}function q(){if(s.availabilityChecking||!s.isAvailable)return void g.error("Das Material ist im gewählten Zeitraum mit dieser Menge nicht verfügbar.");var d=a.pick(s,["fromUtc","toUtc","quantity"]);d.lessorId=u.lessor.lessorId,d.productId=u.itemId,d.userId=f.user.userId,k.post(d,function(){h.fromUtc=d.fromUtc,h.toUtc=d.toUtc,c.added&&c.added(),b("#popover-glyphicon-cart").popover("show"),e(function(){b("#popover-glyphicon-cart").popover("hide")},3e3)},function(a){g.error("Fehler beim Hinzufügen des Artikels in den Warenkorb: "+a.data.message)})}function r(){if(t)return t.getTotal(s.fromUtc,s.toUtc,s.quantity,!0)}var s=null,t=null,u=null;c.checkAvailability=p,c.submit=q,c.total=r,c.$watch("item",n),c.$watch("addToCartFormModel.fromUtc",o),c.$watch("addToCartFormModel.toUtc",o),c.$watch("addToCartFormModel.quantity",o),l()}return a.$inject=["_","$","$scope","$filter","$timeout","Auth","Alert","Shop","priceCalculatorFactory","ShopItemsAvailabilityCheck","UsersCartItems"],{restrict:"EA",replace:!0,scope:{item:"=",added:"="},templateUrl:"modules/shop/views/directives/phShopItemAddToCart.html",controller:a}}angular.module("ph.shop").directive("phShopItemAddToCart",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(c){function f(a){var b=g(a),d=h(a);c.labels=b,c.series=[""],c.data=[d]}function g(c){var d=a.map(c,function(a){return b("date")(a.fromUtc,"mediumDate")});return d.push(""),d}function h(b){var c=a.map(b,function(a){return a.quantity});return c.push(c[c.length-1]),c}d.get({itemId:c.itemId},function(a){c.availabilities=a.result,f(a.result)},function(a){e.error("Fehler beim Laden der Verfügbarkeit: "+a.data.message)})}return{restrict:"E",replace:!0,scope:{itemId:"="},template:'<div><canvas id="line" class="chart chart-line" chart-data="data" chart-labels="labels"></canvas></div>',link:f}}a.$inject=["_","$filter","$compile","ShopItemAvailability","Alert"],angular.module("ph.shop").directive("phShopItemAvailability",a)}(),function(){"use strict";function a(){return{restrict:"EA",replace:!0,scope:{documents:"="},templateUrl:"modules/shop/views/directives/phShopItemDocuments.html"}}angular.module("ph.shop").directive("phShopItemDocuments",a)}(),function(){"use strict";function a(){return{restrict:"EA",replace:!0,scope:{images:"="},templateUrl:"modules/shop/views/directives/phShopItemImages.html",link:function(a){a.$watch("images",function(b){if(b){var c=a.slides=[],d=0;b.forEach(function(a){c.push({image:a.url,id:d++})})}})}}}angular.module("ph.shop").directive("phShopItemImages",a)}(),function(){"use strict";function a(){function a(a,b){a.page=b.page}return{restrict:"E",scope:{},templateUrl:"modules/shop/views/directives/phShopPagination.html",controller:["$scope","shopQueryService",a]}}angular.module("ph.shop").directive("phShopPagination",a)}(),function(){"use strict";function a(){function a(a,b,c,d,e){function f(){d.query().$promise.then(h)["catch"](i)}function g(){b.go("public.index",{q:a.filter.text,l:a.filter.lessorId})}function h(b){a.lessors=b.results}function i(a){e.error("Fehler beim Laden der Vermieter: "+a.data.message)}a.filter=c.filter,a.search=g,f()}return{restrict:"E",replace:!0,scope:{},templateUrl:"modules/shop/views/directives/phShopSearch.html",controller:["$scope","$state","shopQueryService","shopLessorsResource","Alert",a]}}angular.module("ph.shop").directive("phShopSearch",a)}(),function(){"use strict";function a(a){function b(b){a.open({templateUrl:"modules/shop/views/shop-item-modal.html",controller:"ShopItemCtrl",resolve:b,size:"lg"})}return{open:b}}a.$inject=["$uibModal"],angular.module("ph.shop").factory("shopItemModal",a)}(),function(){"use strict";function a(a){function b(b,e,f){return f&&(d.lessorId=f.lessorId||d.lessorId,d.text=f.text||d.text),a.query({q:d.text,lessorId:d.lessorId,offset:e*(b-1),limit:e}).$promise.then(c)}function c(a){return e.current=Math.ceil((a.offset+1)/a.limit),e.start=a.offset,e.size=a.limit,e.total=a.total,a}var d={lessorId:null,string:null},e={current:1,start:0,size:8,total:null};return{filter:d,page:e,query:b}}a.$inject=["shopItemsResource"],angular.module("ph.shop").factory("shopQueryService",a)}(),function(){"use strict";angular.module("ph.shop").factory("Lessees",["$resource",function(a){return a("/api/v0/lessees/:lesseeId",{lesseeId:"@lesseeId"})}]).factory("shopLessorsResource",["$resource",function(a){return a("/api/v0/lessors/:lessorId",{lessorId:"@lessorId"})}]).factory("shopItemsResource",["$resource",function(a){return a("/api/v0/shop/items/:itemId",{itemId:"@itemId"})}]).factory("ShopItemAvailability",["$resource",function(a){return a("/api/v0/shop/items/:itemId/availability",{itemId:"@itemId"})}]).factory("ShopItemsAvailabilityCheck",["$resource",function(a){return a("/api/v0/shop/items/:itemId/availability-check",{itemId:"@articleId"})}]).factory("ShopOrders",["$resource",function(a){return a("/api/v0/shop/orders")}]).factory("ShopProductsAvailabilityCheck",["$resource",function(a){return a("/api/v0/shop/products/:productId/availability-check",{productId:"@productId"})}])}(),function(){"use strict";function a(){var a=new Date,b=new Date;return b.setDate(b.getDate()+7),{fromUtc:a,toUtc:b}}angular.module("ph.shop").factory("Shop",a)}(),function(){"use strict";angular.module("ph.stores",[])}(),function(){"use strict";function a(a,b,c,d,e,f){return{restrict:"E",replace:"true",scope:{loaded:"=",store:"=",isEditable:"="},link:function(g){var h={lat:46.80121,lng:8.226692};a(function(){d.getMap().then(function(a){a.setView(h,7)})},0);var i=function(){if(!g.coordinateForm.$visible&&g.store&&g.store.coordinate){if(!angular.isNumber(g.store.coordinate.latitude)||!angular.isNumber(g.store.coordinate.longitude))return;a(function(){d.getMap().then(function(a){var b={lat:g.store.coordinate.latitude,lng:g.store.coordinate.longitude};a.setView(b,16),g.marker?g.marker.setLatLng(b):(g.marker=e.createMarker(b,{draggable:!0}),g.marker.addTo(a))})},500)}};i(),g.fromMap=function(){d.getMap().then(function(a){var b=a.getCenter();g.store.coordinate={latitude:b.lat,longitude:b.lng},g.coordinateForm.$setDirty()})},g.$watch("store.coordinate.latitude",function(){i()}),g.$watch("store.coordinate.longitude",function(){i()}),g.updateName=function(){g.nameForm.$submitting=!0,b.patch({storeId:g.store.storeId,name:g.store.name},function(){g.nameForm.$submitting=!1,g.nameForm.$visible=!1},function(){g.nameForm.$submitting=!1,c.error("Fehler beim Speichern des Namens.")})},g.showChangeContact=function(){var a=f.open({storeId:function(){return g.store.storeId},contact:function(){return angular.copy(g.store.contact)}});a.then(function(a){g.store.contact=a})},g.updateOpeningHours=function(){g.openingHoursForm.$submitting=!0,b.patch({storeId:g.store.storeId,openingHours:g.store.openingHours},function(){g.openingHoursForm.$submitting=!1,g.openingHoursForm.$visible=!1},function(){g.openingHoursForm.$submitting=!1,c.error("Fehler beim Speichern der Öffnungszeiten.")})},g.updateCoordinate=function(){g.coordinateForm.$submitting=!0,b.patch({storeId:g.store.storeId,coordinate:g.store.coordinate},function(){g.coordinateForm.$submitting=!1,g.coordinateForm.$visible=!1,i()},function(){g.coordinateForm.$submitting=!1,c.error("Fehler beim Speichern der Koordinate.")})}},templateUrl:"modules/stores/views/directives/ph-store.html"}}a.$inject=["$timeout","Stores","Alert","leafletData","leafletMarkersHelpers","StoresEditContactDetailsModal"],angular.module("ph.stores").directive("phStore",a)}(),function(){"use strict";function a(a){function c(c){var d=a.open({templateUrl:"modules/stores/views/modals/edit-contact-details.html",controller:b,resolve:c});return d.result}return{open:c}}function b(a,b,c,d,e,f,g){a.contact=e,a.ok=function(){a.formChangeContact.$valid&&(a.success=null,a.error=null,f.patch({storeId:d},{contact:a.contact},function(){a.contact.postalAddress=g.fromLines(a.contact),a.success="Die Kontaktangaben wurden erfolgreich geändert.",b(function(){c.close(a.contact)},2e3)},function(){a.error="Fehler beim Speichern der Kontaktangaben."}))},a.cancel=function(){c.dismiss("cancel")}}b.$inject=["$scope","$timeout","$uibModalInstance","storeId","contact","Stores","PostalAddress"],a.$inject=["$uibModal"],angular.module("ph.stores").factory("StoresEditContactDetailsModal",a)}(),function(){"use strict";angular.module("ph.stores").factory("Stores",["$resource",function(a){return a("/api/v0/stores/:storeId",{storeId:"@storeId"})}])}(),function(){"use strict";function a(a,b){function c(a){return"modules/users/views/"+a}var d=b.accessLevels;a.state("user",{"abstract":!0,url:"/users/:userId",data:{access:d.user},template:'<ph-user-navbar data-user-id="userId"></ph-user-navbar><ui-view/>',controller:"UserCtrl",resolve:{userId:["$stateParams",function(a){return a.userId}],tenantId:["$stateParams",function(a){return a.userId}]}}).state("user.home",{url:"",data:{access:d["public"]},templateUrl:c("home.html"),controller:"UserHomeCtrl"}).state("user.products",{url:"/products/",templateUrl:c("products.html"),controller:"UserProductsCtrl"}).state("user.product",{"abstract":!0,url:"/products/:articleId/:articleShortId",template:'<ph-user-article-navbar data-user-id="userId" data-article-id="articleId" data-article-short-id="articleShortId"></ph-user-article-navbar><ui-view/>',controller:["$scope","userId","articleId","articleShortId",function(a,b,c,d){a.tenantId=b,a.articleId=c,a.articleShortId=d}],resolve:{articleId:["$stateParams",function(a){return a.articleId||a.productId}],articleShortId:["$stateParams",function(a){return a.articleShortId}]}}).state("user.product.actions",{url:"/actions",template:'<view-title>Aktivitäten</view-title><div ph-inventory-article-activities tenant-id="tenantId" article-id="articleId"></div>'}).state("user.product.details",{url:"/",template:'<view-title>Material bearbeiten</view-title><div ph-inventory-article-details tenant-id="tenantId" article-id="articleId" has-member-price="false"></div>'}).state("user.product.description",{url:"/description",template:'<view-title>Beschreibung bearbeiten</view-title><div ph-inventory-article-description tenant-id="tenantId" article-id="articleId"></div>'}).state("user.product.specification",{url:"/specification",template:'<view-title>Spezifikation bearbeiten</view-title><div ph-inventory-article-specification tenant-id="tenantId" article-id="articleId"></div>'}).state("user.product.stock",{url:"/stock",template:'<view-title>Bestand</view-title><div ph-inventory-article-stock tenant-id="tenantId" article-id="articleId"></div>'}).state("user.product.files",{url:"/files",template:'<view-title>Dateien</view-title><div ph-inventory-article-files tenant-id="tenantId" article-id="articleId"></div>'}).state("user.orders",{"abstract":!0,url:"/orders",template:"<ui-view/>"}).state("user.orders.index",{url:"/",templateUrl:c("orders.html"),controller:"UserOrdersCtrl",controllerAs:"vm"}).state("user.orders.order",{url:"/{orderId}",templateUrl:c("order.html"),controller:"UserOrderCtrl",resolve:{orderId:["$stateParams",function(a){return a.orderId}]}})}a.$inject=["$stateProvider","authProvider"];var b=angular.module("ph.users",["ph.inventory","ph.orders","ph.stores"]);b.config(a)}(),function(){"use strict";function a(a,b,c){a.openStore=function(){a.isOpeningStore=!0,b.post({userId:a.user.userId},function(b){a.isOpeningStore=!1,a.user.store=b,c.success("Deine Materialstelle wurde erfolgreich eröffnet.")},function(){a.isOpeningStore=!1,c.error("Fehler beim Eröffnen deiner Materialstelle.")})}}a.$inject=["$scope","Stores","Alert"],angular.module("ph.users").controller("UserHomeCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e){a.userId=b,a.isHome=b+""==d.user.userId+"",a.user=null,c.get({userId:b},function(b){var c=b;c.store&&c.store.contact&&(c.store.contact.postcode=parseInt(c.store.contact.postcode)),a.user=b},function(){e.error("Fehler beim Laden des Benutzers.")})}a.$inject=["$scope","userId","Users","Auth","Alert"],angular.module("ph.users").controller("UserCtrl",a)}(),function(){"use strict";function a(a,b){function c(){b.query({userId:a},function(a){d.rowCollection=a.results,d.displayedCollection=[].concat(d.rowCollection)})}var d=this;d.rowCollection=[],d.displayedCollection=[],c()}a.$inject=["userId","Orders"],angular.module("ph.orders").controller("UserOrdersCtrl",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j){b.loading=!0,b.store=null,b.articles=null,e.query({ownerId:i.user.userId},function(a){return 0===a.results.length?void(b.loading=!1):(b.store=a.results[0],void f.query({ownerId:c},function(a){b.articles=a.results,b.displayedArticles=[].concat(b.articles),b.loading=!1},function(){g.error("Fehler beim Laden der Artikel."),b.loading=!1}))}),b["delete"]=function(c,e){d.confirm('Möchtest du den Artikel "'+e+'" wirklich löschen?')&&f["delete"]({articleId:c},function(){g.success('Der Artikel "'+e+'" wurder erfolgreich gelöscht.'),a.remove(b.displayedArticles,{id:c}),a.remove(b.articles,{id:c})},function(){g.error('Fehler beim Löschen des Artikels "'+e+'".')})},b.createArticle=function(){j.open(c,function(a){h.go("user.product.details",{userId:c,articleId:a.articleId,articleShortId:a.articleShortId})})}}a.$inject=["_","$scope","userId","$window","Stores","Articles","Alert","$state","Auth","inventoryCreateArticleModal"],angular.module("ph.users").controller("UserProductsCtrl",a)}(),function(){"use strict";function a(a){return{restrict:"E",replace:"true",scope:{userId:"=",articleId:"=",articleShortId:"="},link:function(b){b.accessLevels=a.accessLevels,b.userRoles=a.userRoles},templateUrl:"modules/users/views/directives/ph-user-article-navbar.html"}}a.$inject=["Auth"],angular.module("ph.users").directive("phUserArticleNavbar",a)}(),function(){"use strict";function a(a){return{restrict:"E",replace:"true",scope:!1,link:function(b){b.accessLevels=a.accessLevels,b.userRoles=a.userRoles,b.isHome=b.userId+""==a.user.userId+""},templateUrl:"modules/users/views/directives/ph-user-navbar.html"}}a.$inject=["Auth"],angular.module("ph.users").directive("phUserNavbar",a)}(),function(){"use strict";function a(){return{restrict:"E",replace:"true",scope:{user:"=",isEditable:"=",isHome:"="},templateUrl:"modules/users/views/directives/ph-user-vcard.html"}}angular.module("ph.users").directive("phUserVcard",a)}(),function(){"use strict";angular.module("ph.users").factory("Users",["$resource",function(a){return a("/api/v0/users/:userId",{userId:"@userId"})}]).factory("UsersAddress",["$resource",function(a){return a("/api/v0/users/:userId/address",{userId:"@userId"})}]).factory("UsersCart",["$resource",function(a){return a("/api/v0/users/:userId/cart",{userId:"@userId"})}]).factory("UsersCartItems",["$resource",function(a){return a("/api/v0/users/:userId/cart/items/:cartItemId",{userId:"@userId",cartItemId:"@cartItemId"})}])}(),function(){"use strict";var a=angular.module("ph.app",["angularMoment","blueimp.fileupload","chart.js","leaflet-directive","ngHolder","ngMessages","ngResource","ngSanitize","smart-table","ui.bootstrap","ui.gravatar","ui.router","ui.tinymce","mwl.confirm","viewhead","ph.common","ph.auth","ph.domain","ph.ui","ph.admin","ph.account","ph.debug","ph.feedback","ph.users","ph.organizations","ph.orders","ph.shop","ph.inventory"]);a.run(["$rootScope","$state","$location","Auth","Alert","confirmationPopoverDefaults",function(a,b,c,d,e,f){a.isTestEnv=/(^localhost)|(^acceptance)/.test(c.host()),a.isLocalEnv=/(^localhost)/.test(c.host()),a.$state=b,f.confirmButtonType="primary",f.confirmText="Ja",f.cancelText="Nein",a.$on("$stateChangeStart",function(a,c,f,g){"data"in c&&"access"in c.data?d.authorize(c.data.access,void 0,f.organizationId)||(e.error("Seems like you tried accessing a route you don't have access to..."),a.preventDefault(),"^"===g.url&&(d.isLoggedIn()?b.go("anon.login"):b.go("anon.login"))):(e.error("Access undefined for this state."),a.preventDefault())})}])}(),function(){"use strict";var a=angular.module("ph.app");a.config(["$httpProvider","fileUploadProvider",function(a,b){delete a.defaults.headers.common["X-Requested-With"],b.defaults.redirect=window.location.href.replace(/\/[^\/]*$/,"/cors/result.html?%s")}]),a.config(["$resourceProvider",function(a){angular.extend(a.defaults.actions,{patch:{method:"PATCH"},post:{method:"POST"},put:{method:"PUT"},query:{method:"GET",isArray:!1}})}])}(),function(){"use strict";function a(a,b,c,d,e){var f=e.accessLevels;a.state("anon",{"abstract":!0,template:"<ui-view/>",data:{access:f.anon}}).state("public",{"abstract":!0,template:"<ui-view/>",data:{access:f["public"]}}).state("public.404",{url:"/404",templateUrl:"views/404.html"}).state("public.impressum",{url:"/impressum",templateUrl:"views/impressum.html"}),b.otherwise("/404"),c.html5Mode(!1),b.rule(function(a,b){if("file"!==b.protocol()&&""===b.path())return"/"}),d.interceptors.push(["$q","$location",function(a,b){return{responseError:function(c){return 401!==c.status&&403!==c.status||(b.search("returnPath",encodeURI(b.path())),b.path("/#/login")),a.reject(c)}}}])}a.$inject=["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","authProvider"],angular.module("ph.app").config(a)}(),function(){"use strict";function a(a,b,c,d,e){a.user=d.user,a.userRoles=d.userRoles,a.accessLevels=d.accessLevels,a.queryString="",a.search=function(){c.location.href="/shop/Search?queryString="+a.queryString},a.logout=function(){d.logout(function(){b.path("/logged-out")},function(a){e.error(a)})}}a.$inject=["$scope","$location","$window","Auth","Alert"],angular.module("ph.app").controller("NavCtrl",a)}(),angular.module("ph.app").run(["$templateCache",function(a){"use strict";a.put("views/404.html","<h2 data-view-title>404</h2> <p>Hier ist nichts zu finden.</p> <div ui-view></div>"),a.put("views/impressum.html",'<div class="page-header"> <h1 data-view-title>Impressum</h1> </div> <address> <strong>phundus.ch</strong><br> Sandstrasse 5<br> 3302 Moosseedorf<br> info@phundus.ch </address> <p> <strong>Vertreten durch:</strong><br> Präsident: Lukas Müller<br> Vizepräsident: Reto Inderbitzin<br> Kassier: Markus Gander </p> <p><strong>Kontakt:</strong><br>info@phundus.ch</p> <h2>Allgemeine Grundsätze</h2> <p class="text-justify">Die Nutzer von phundus.ch sind verpflichtet, die bei der Nutzung von phundus.ch gesetzliche Vorgaben einzuhalten. Dabei sind die Nutzer selber dafür verantwortlich, dass sie bei der Nutzung der Plattform keine Rechte Dritter verletzen und ihre Angebote und Angaben rechtmässig sind. Die Nutzer dürfen Informationen, welche sie als Nutzer der Plattform von phundus.ch erhalten, sowie weitere Daten der Webseite (z.B. Angaben der Artikel, Abbildungen, etc.) für keine anderen kommerziellen Zwecke als die auf der Plattform von phundus.ch beschriebenen verwenden. Die Verwendung dieser Seite ist nur für den privaten, nicht kommerziellen Gebrauch gestattet. phundus.ch unterhält eine Vermittlungsplattform, auf der sich Organisationen der Kinder- und Jugendarbeit eintragen können, um im Rahmen der Schweizer Gesetzgebung Mietenden ihre Leihartikel für einen definierten Zeitraum zur Nutzung zu überlassen. Mietende können Anfragen zur Miete von Artikel auf der Internetplattform stellen. Die Vermittlungsplattform phundus.ch ermöglicht dabei das Suchen und Reservieren von Artikel. Phundus.ch bietet selbst grundsätzlich keine Artikel zur Miete an, sondern ist Vermittler zwischen Vermieter und Mieter.</p> <h2>Registrierung</h2> <p class="text-justify">Die Registrierung auf phundus.ch ist unentgeltlich und verpflichtet den Nutzer nicht zum Abschluss eines Nutzungsvertrages. Anmeldungen können aber von phundus.ch jederzeit und ohne Begründung abgelehnt werde. Registrierungsberechtigt sind voll handlungsfähige natürliche Personen. Es ist nur eine Anmeldung pro Person zulässig. Bei der Anmeldung hat der Nutzer alle für die Registrierung notwendigen Angaben wahrheitsgetreu an zu geben. Allfällige spätere Änderungen sind direkt im Userkonto sofortvorzunehmen. Der Nutzer ist verpflichtet, alle Anmeldedaten und Passwörter geheim zu halten und so aufzubewahren, dass Dritte keinen Zugriff darauf haben. Das Userkonto ist persönlich und nicht übertragbar. Wir die Anmeldung über eine Drittanwendung ausgeführt trägt der Drittanbieter die Verantwortung der Datenrichtigkeit und ist sich dessen Auswirkungen auf phundus.ch bewusst.</p> <h2>Mietvertrag</h2> <p class="text-justify">Nutzer haben keinen Anspruch auf Abschluss eines Mietvertrages durch eine angefragte Materialstelle. Die Plattform phundus.ch ist generell nicht Partei des Mietvertrages sondern agiert lediglich als Vermittler zwischen Vermieter und Mieter. Die Erfüllung des Mietvertrages erfolgt ausschliesslich zwischen Vermieter und Mieter. Der Vermieter publiziert lediglich die von ihm zur Miete angebotenen Artikel mit Beschreibung und Verfügbarkeitszeitraum auf der Plattform. Der Mieter kann phundus.ch nach den für ihn passenden Artikel durchsuchen. Findet der Mieter etwas Passendes, kann er den Artikel für einen gewünschten Zeitraum reservieren sofern er in diesem Zeitraum zur Verfügung steht. Die Materialstelle kontrolliert die Verfügbarkeit manuell und bestätigt die Reservation. Der Mietvertrag kommt mit der erfolgreichen Bestätigung durch die Materialstelle zustande. Mieter und Vermieter werden über den Abschluss des Mietvertrages durch eine E-Mail-Bestätigung. Individuellen Mietbestimmungen der Vermieter sind erlaubt sofern sie sich an die Schweizerischen Gesetzgebung nach (Art. 253 OR) halten. Mit dem Zustandekommen des Mietvertrages ist der Vermieter verpflichtet, dem Mieter den Artikel zum persönlich vereinbarten Zeitpunkt, am vereinbarten Ort und zu den vereinbarten Bedingungen des geschlossenen zur Verfügung zu stellen. Der einseitige Rücktritt vom Mietvertrag, die gemeinsame Aufhebung des Mietvertrages oder die nachträgliche Verkürzung der Mietdauer ist ausser in Fällen höherer Gewalt nicht möglich.</p> <h2>Inhalte</h2> <p class="text-justify">Als Plattform sind wir nicht verpflichtet, übermittelte oder gespeicherte fremde Informationen zu überwachen oder nach Umständen zu forschen, die auf eine rechtswidrige Tätigkeit hinweisen. Verpflichtungen zur Entfernung oder Sperrung der Nutzung von Informationen nach den allgemeinen Gesetzen bleiben hiervon unberührt. Eine diesbezügliche Haftung ist erst ab dem Zeitpunkt der Kenntnis einer konkreten Rechtsverletzung möglich. Die Plattform kann benutzter angelegte Inhalte und Links zu externen Webseiten enthalten, auf deren Inhalte wir keinen Einfluss haben. Für die nutzergenerierten Inhalte ist stets der jeweilige Nutzer verantwortlich. Diskriminierenden oder Ehrverletzenden sind untersagt und können ohne Rücksprache von der Plattform entfernt werden. Eine permanente inhaltliche Kontrolle ist jedoch ohne konkrete Anhaltspunkte einer Rechtsverletzung nicht zumutbar. Soweit die Inhalte auf dieser Seite nicht vom Betreiber erstellt wurden, werden die Urheberrechte nach URG Art. 10 Abs. 2 von Dritter beachtet.</p> <h2>Datenschutz</h2> <p class="text-justify">Sie haben jederzeit das Recht auf Berichtigung, Sperrung oder Löschung ihrer Daten. Hierzu sowie zu weiteren Fragen zum Thema personenbezogene Daten können Sie sich jederzeit per E-Mail an info@phundus.ch an uns wenden. Die Plattform verwenden Cookies welche dazu dienen das Angebot nutzerfreundlicher, effektiver und sicherer zu machen Der Provider der Seiten erhebt und speichert automatisch Informationen in so genannten Server-Log Files, die dein Browser automatisch an uns übermittelt. Dies sind:</p> <ul> <li>Browertyp- und version</li> <li>Verwendetes Betriebssystem</li> <li>URL-Hostname des zugreifenden Rechners</li> <li>Uhrzeit der Serveranfrage</li> </ul> <p class="text-justify">Diese Daten sind nicht bestimmten Personen zuordenbar. Eine Zusammenführung dieser Daten mit anderen Datenquellen wird nicht vorgenommen. Wir behalten uns vor, diese Daten nachträglich zu prüfen, wenn uns konkrete Anhaltspunkte für eine rechtswidrige Nutzung bekannt werden.</p> <p>&nbsp;</p> <p>Moosseedorf, 22.07.2016</p>'),a.put("modules/account/views/account.html",'<view-title>Einstellungen</view-title> <div class="row"> <div class="col-xs-12 col-sm-6"> <h2>Kontakt</h2> <p> {{address.firstName}} {{address.lastName}}<br> {{address.street}}<br> {{address.postcode}} {{address.city}} </p> <p> <span class="glyphicon glyphicon-earphone" title="Telefonnummer"></span> {{address.phoneNumber}} </p> <p> <span class="glyphicon glyphicon-envelope" title="E-Mail-Adresse"></span> {{emailAddress}} </p> <p> <a href="" class="btn btn-default btn-lg" style="display:block" data-ng-click="showChangeContact()">Kontakt ändern</a> </p> </div> <div class="col-xs-12 col-sm-6"> <h2>Konto</h2> <p> <a href="" class="btn btn-default btn-lg" style="display:block" data-ng-click="showChangeEmailAddress()">E-Mail-Adresse ändern</a> </p> <p> <a href="" class="btn btn-default btn-lg" style="display:block" data-ng-click="showChangePassword()">Passwort ändern</a> </p> </div> </div>'),a.put("modules/account/views/logged-out.html",'<div class="row"> <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3"> <div class="page-header"> <h1 data-view-title>Danke <small>dass du s`phundus benutzt!</small> </h1> </div> <div role="alert" class="alert alert-success"> <strong>Alles klar!</strong> Du bist nun abgemeldet. </div> </div> </div>'),a.put("modules/account/views/login.html",'<div class="row"> <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3"> <div class="page-header"> <h1 data-view-title>Anmeldung</h1> </div> <form name="loginForm" novalidate> <div class="form-group" data-has-error="loginForm.username"> <!--<label class="control-label" for="username">E-Mail-Adresse</label>--> <input type="email" class="form-control input-lg" data-ng-model="username" placeholder="E-Mail-Adresse" id="username" name="username" required autofocus> </div> <div class="form-group" data-has-error="loginForm.password"> <!--<label class="control-label" for="password">Passwort</label>--> <input type="password" class="form-control input-lg" data-ng-model="password" placeholder="Passwort" id="password" name="password" required> </div> <div class="form-group"> <p> <ph-submit class="btn-primary btn-lg" data-ng-click="login()" data-form="loginForm" data-text="Anmelden"></ph-submit> </p> </div> </form> <div style="margin-top:40px"> <p> Passwort vergessen? Ein neues <a href="" data-ui-sref="anon.reset-password">anfordern</a>! </p> <p> Noch nicht dabei? Jetzt kostenlos <a href="" data-ui-sref="anon.signup">registrieren</a>. </p> </div> </div> </div> <div data-ng-show="isTestEnv"> <div class="row" style="margin-top: 20px"> <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3"> <h3>Test-Umgebung</h3> <p>One-Click-Logins in der Test-Umgebung</p> <p> <button class="btn btn-default" type="button" data-ng-click="autoLogin(\'member@test.phundus.ch\')">member</button> <button class="btn btn-default" type="button" data-ng-click="autoLogin(\'manager@test.phundus.ch\')">manager</button> <button class="btn btn-default" type="button" data-ng-click="autoLogin(\'admin@test.phundus.ch\')">admin</button> </p> </div> </div> </div>'),a.put("modules/account/views/logout.html",'<div class="row"> <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3"> <div class="page-header"> <h1 data-view-title>Abmeldung</h1> </div> <div role="alert" class="alert alert-info" data-ng-hide="errorMessage"> <strong>Einen Moment!</strong> Du wirst gleich abgemeldet. </div> <div role="alert" class="alert alert-danger" data-ng-show="errorMessage"> <strong>Hmm...</strong> {{errorMessage}} </div> </div> </div>'),a.put("modules/account/views/modals/change-contact.html",'<div class="modal-header"> <button type="button" class="close" data-ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button> <h3 data-view-title>Kontakt ändern</h3> </div> <div class="modal-body"> <div class="alert alert-danger" data-ng-show="error"> {{error}} </div> <div class="alert alert-success" data-ng-show="success"> {{success}} </div> <form name="formChangeContact" class="form-horizontal" novalidate> <div class="form-group"> <label class="col-sm-4 control-label" for="firstName">Vorname</label> <div class="col-sm-8" data-has-error="formChangeContact.firstName"> <input type="text" class="form-control" id="firstName" name="firstName" data-ng-model="contact.firstName" required> <div ph-messages="formChangeContact.firstName"></div> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label" for="lastName">Nachname</label> <div class="col-sm-8" data-has-error="formChangeContact.lastName"> <input type="text" class="form-control" id="lastName" name="lastName" data-ng-model="contact.lastName" required> <div ph-messages="formChangeContact.lastName"></div> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label" for="street">Strasse</label> <div class="col-sm-8" data-has-error="formChangeContact.street"> <input type="text" class="form-control" id="street" name="street" data-ng-model="contact.street" required> <div ph-messages="formChangeContact.street"></div> </div> </div> <div class="form-group"> <label class="col-xs-12 col-sm-4 control-label" for="postcode">Postleitzahl / Ort</label> <div class="col-xs-5 col-sm-3" data-has-error="formChangeContact.postcode"> <input type="number" class="form-control" id="postcode" name="postcode" data-ng-model="contact.postcode" required min="1000" max="9999"> <div ph-messages="formChangeContact.postcode"> <span class="help-block" data-ng-message="number, min, max">Die Postleitzahl ist ungültig.</span> </div> </div> <div class="col-xs-7 col-sm-5" data-has-error="formChangeContact.city"> <input type="text" class="form-control" id="city" name="city" data-ng-model="contact.city" required> <div ph-messages="formChangeContact.city"></div> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label" for="phoneNumber">Telefon</label> <div class="col-sm-8" data-has-error="formChangeContact.phoneNumber"> <input type="text" class="form-control" id="phoneNumber" name="phoneNumber" data-ng-model="contact.phoneNumber" required> <div ph-messages="formChangeContact.phoneNumber"></div> </div> </div> </form> </div> <div class="modal-footer"> <ph-submit class="btn-primary btn" data-ng-click="ok()" data-form="formChangeContact" data-text="Kontakt ändern"></ph-submit> <button class="btn btn-default" type="button" data-ng-click="cancel()">Abbrechen</button> </div>'),a.put("modules/account/views/modals/change-email-address.html",'<div class="modal-header"> <button type="button" class="close" data-ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button> <h3 data-view-title>E-Mail-Adresse ändern</h3> </div> <div class="modal-body"> <div class="alert alert-danger" data-ng-show="error"> {{error}} </div> <div class="alert alert-success" data-ng-show="success"> {{success}} </div> <form name="formChangeEmailAddress" class="form-horizontal" novalidate> <div class="form-group"> <label class="control-label col-sm-4" for="password">Aktuelles Passwort</label> <div class="col-sm-8" data-has-error="formChangeEmailAddress.password"> <input type="password" class="form-control" id="password" name="password" data-ng-model="changeEmailAddress.password" required> <div ph-messages="formChangeEmailAddress.password"></div> </div> </div> <div class="form-group"> <label class="control-label col-sm-4" for="newEmailAddress">Neue E-Mail-Adresse</label> <div class="col-sm-8" data-has-error="formChangeEmailAddress.newEmailAddress"> <input type="email" class="form-control input" id="newEmailAddress" name="newEmailAddress" data-ng-model="changeEmailAddress.newEmailAddress" required is-unique-email-address> <div ph-messages="formChangeEmailAddress.newEmailAddress"> <span class="help-block" data-ng-message="isUnique">Die E-Mail-Adresse wird bereits verwendet.</span> </div> </div> </div> </form> </div> <div class="modal-footer"> <ph-submit class="btn-primary btn" data-ng-click="ok()" data-form="formChangeEmailAddress" data-text="Bestätigungs-E-Mail senden"></ph-submit> <button class="btn btn-default" type="button" data-ng-click="cancel()">Abbrechen</button> </div>'),
a.put("modules/account/views/modals/change-password.html",'<div class="modal-header"> <button type="button" class="close" data-ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button> <h3 data-view-title>Passwort ändern</h3> </div> <div class="modal-body"> <div class="alert alert-danger" data-ng-show="error"> {{error}} </div> <div class="alert alert-success" data-ng-show="success"> {{success}} </div> <form name="formChangePassword" class="form-horizontal" novalidate> <div class="form-group"> <label class="control-label col-sm-4" for="oldPassword">Aktuelles Passwort</label> <div class="col-sm-8" data-has-error="formChangePassword.oldPassword"> <input type="password" class="form-control" id="oldPassword" name="oldPassword" data-ng-model="changePassword.oldPassword" required> <div ph-messages="formChangePassword.oldPassword"></div> </div> </div> <div class="form-group"> <label class="control-label col-sm-4" for="newPassword">Neues Passwort</label> <div class="col-sm-8" data-has-error="formChangePassword.newPassword"> <input type="password" class="form-control" id="newPassword" name="newPassword" data-ng-model="changePassword.newPassword" required> <div ph-messages="formChangePassword.newPassword"></div> </div> </div> <div class="form-group"> <label class="control-label col-sm-4" for="confirmPassword">Wiederholung</label> <div class="col-sm-8" data-has-error="formChangePassword.confirmPassword"> <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" data-ng-model="changePassword.confirmPassword" required data-compare-to="changePassword.newPassword"> <div ph-messages="formChangePassword.confirmPassword"> <span class="help-block" data-ng-message="compareTo">Die Passwort-Wiederholung stimmt nicht mit dem Passwort überein.</span> </div> </div> </div> </form> </div> <div class="modal-footer"> <ph-submit class="btn-primary btn" data-ng-click="ok()" data-form="formChangePassword" data-text="Passwort ändern"></ph-submit> <button class="btn btn-default" type="button" data-ng-click="cancel()">Abbrechen</button> </div>'),a.put("modules/account/views/reset-password.html",'<div class="row" data-ng-show="submitted"> <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"> <div class="page-header"> <h1 data-view-title>Passwort zurücksetzen</h1> </div> <div role="alert" class="alert alert-success"> <strong>Alles klar!</strong> Ein neues Passwort wurde an die angegebene E-Mail-Adresse gesendet. </div> </div> </div> <div class="row" data-ng-hide="submitted"> <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"> <div class="page-header"> <h1>Passwort zurücksetzen</h1> </div> <form name="form" novalidate> <div class="form-group" data-has-error="form.emailAddress"> <label class="control-label" for="emailAddress">E-Mail-Adresse</label> <input type="email" class="form-control input-lg" id="emailAddress" name="emailAddress" data-ng-model="resetPassword.emailAddress" required> <div ph-messages="form.emailAddress"></div> </div> <div class="form-group"> <ph-submit class="btn-primary btn-lg" data-ng-click="submit()" data-form="form" data-text="Password zurücksetzen"></ph-submit> </div> </form> </div> </div>'),a.put("modules/account/views/signup.html",'<div class="row"> <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3"> <div class="page-header"> <h1 data-view-title>Registrierung</h1> </div> </div> </div> <div class="row" data-ng-show="submitted"> <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3"> <p>Um die Registrierung abzuschliessen, musst du deine E-Mail-Adresse bestätigen. Dazu wurde dir ein E-Mail geschickt, in welchem sich einen Link befindet, um die Registrierung abzuschliessen.</p> <p>Falls du eine Organisation ausgewählt hast, wird nun deine Mitgliedschaftsanfrage manuell überprüft. Gewisse Materialien sowie die Vorzugspreise der Organisation stehen dir bis dahin noch nicht zur Verfügung. Du erhälst eine Benachrichtigung per E-Mail sobald du für die Organisation freigegeben wurdest.</p> </div> </div> <div class="row" data-ng-hide="submitted"> <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3"> <p>Mit der Anmeldung bestätigst du verantwortungsbewusst mit den Materialen umzugehen. Dir ist ersichtlich, dass du Teil einer sehr grossen Interessensgemeinschaft bist und vermeidest Nachlässigkeiten. Bestätigte Buchungen können nicht rückgängig gemacht werden. Der Mietbetrag ist beim Abholen des Material bar zu bezahlen. Bei Unsachgemässer Anwendung kannst du jederzeit vom phundus ausgeschlossen werden.</p> </div> </div> <div class="row" data-ng-hide="submitted"> <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-sm-offset-1 col-md-offset-2 col-lg-offset-3"> <form class="form-horizontal" name="form" novalidate> <fieldset> <legend>Benutzerkonto</legend> <div class="form-group"> <label class="col-sm-5 control-label" for="emailAddress">E-Mail-Adresse</label> <div class="col-sm-7" data-has-error="form.emailAddress"> <input type="email" class="form-control" id="emailAddress" name="emailAddress" data-ng-model="user.emailAddress" data-ng-model-options="{ debounce: 500 }" required is-unique-email-address> <div ph-messages="form.emailAddress"> <span class="help-block" data-ng-message="isUnique">Die E-Mail-Adresse wird bereits verwendet.</span> </div> </div> </div> <div class="form-group"> <label class="col-sm-5 control-label" for="password">Passwort</label> <div class="col-sm-7" data-has-error="form.password"> <input type="password" class="form-control" id="password" name="password" data-ng-model="user.password" required> <div ph-messages="form.password"></div> </div> </div> <div class="form-group"> <label class="col-sm-5 control-label" for="confirmPassword">Passwort (Wiederholung)</label> <div class="col-sm-7" data-has-error="form.confirmPassword"> <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" data-ng-model="user.confirmPassword" required data-compare-to="user.password"> <div ph-messages="form.confirmPassword"> <span class="help-block" data-ng-message="compareTo">Die Passwort-Wiederholung stimmt nicht mit dem Passwort überein.</span> </div> </div> </div> </fieldset> <fieldset> <legend>Kontakt</legend> <div class="form-group"> <label class="col-sm-5 control-label" for="firstName">Vorname</label> <div class="col-sm-7" data-has-error="form.firstName"> <input type="text" class="form-control" id="firstName" name="firstName" data-ng-model="user.firstName" required> <div ph-messages="form.firstName"></div> </div> </div> <div class="form-group"> <label class="col-sm-5 control-label" for="lastName">Nachname</label> <div class="col-sm-7" data-has-error="form.lastName"> <input type="text" class="form-control" id="lastName" name="lastName" data-ng-model="user.lastName" required> <div ph-messages="form.lastName"></div> </div> </div> <div class="form-group"> <label class="col-sm-5 control-label" for="street">Strasse</label> <div class="col-sm-7" data-has-error="form.street"> <input type="text" class="form-control" id="street" name="street" data-ng-model="user.street" required> <div ph-messages="form.street"></div> </div> </div> <div class="form-group"> <label class="col-sm-5 control-label" for="postcode">Postleitzahl</label> <div class="col-sm-7" data-has-error="form.postcode"> <input type="number" class="form-control" id="postcode" name="postcode" data-ng-model="user.postcode" required min="1000" max="9999"> <div ph-messages="form.postcode"> <span class="help-block" data-ng-message="number, min, max">Die Postleitzahl ist ungültig.</span> </div> </div> </div> <div class="form-group"> <label class="col-sm-5 control-label" for="city">Ort</label> <div class="col-sm-7" data-has-error="form.city"> <input type="text" class="form-control" id="city" name="city" data-ng-model="user.city" required> <div ph-messages="form.city"></div> </div> </div> <div class="form-group"> <label class="col-sm-5 control-label" for="mobilePhone">Mobiltelefon</label> <div class="col-sm-7" data-has-error="form.mobilePhone"> <input type="text" class="form-control" id="mobilePhone" name="mobilePhone" data-ng-model="user.mobilePhone" required> <div ph-messages="form.mobilePhone"></div> </div> </div> </fieldset> <fieldset> <legend>Mitgliedschaft</legend> <div class="form-group"> <label class="col-sm-5 control-label" for="organization">Ich bin Mitglied folgender Organisation</label> <div class="col-sm-7"> <select class="form-control" id="organization" name="organizationId" data-ng-model="user.organizationId" data-ng-options="organization.organizationId as organization.name for organization in organizations"> <option></option> </select> <span class="help-block"><span class="glyphicon glyphicon-info-sign"></span> Weitere Mitgliedschaften kannst du nach der Registrierung über die jeweilige Organisationsseite beantragen.</span> </div> </div> </fieldset> <div class="form-group"> <div class="col-sm-offset-5 col-sm-7"> <ph-submit class="btn-primary" data-ng-click="submit()" data-form="form" data-text="Registrieren"></ph-submit> <a class="btn-default btn" href="/">Abbrechen</a> </div> </div> </form> </div> </div>'),a.put("modules/account/views/validate-account.html",'<div class="row" data-ng-show="submitted"> <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"> <div class="page-header"> <h1 data-view-title>Validierung</h1> </div> <p>Deine E-Mail-Adresse wurde erfolgreich bestätigt. Du kannst dich jetzt <a href="" data-ui-sref="anon.login">anmelden</a> und mit dieser E-Mail-Adresse und deinem Passwort den phundus durchstöbern und interessante Artikel gleich reservieren.</p> <p>Einige Organisation verleihen gewisses Material nur an ihre Mitglieder. Prüfe doch daher auch die verschiedenen Organisationen und beantrage eine Mitgliedschaft, wo du auch real dazugehörst.</p> <p>Wir wünschen dir viel Spass dabei!</p> </div> </div> <div class="row" data-ng-hide="submitted"> <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"> <div class="page-header"> <h1>Validierung</h1> </div> <p>Hier wird die Richtigkeit deiner E-Mail-Adresse kontrolliert. Gibt dazu den Validierungs-Code ein, welcher an deine eingegebe E-Mail-Adresse versendet wurde.</p> <form name="form" novalidate> <div class="form-group" data-has-error="form.key"> <label class="control-label" for="key">Code</label> <input type="text" class="form-control input-lg" id="key" name="key" data-ng-model="validate.key" required> <div ph-messages="form.key"></div> </div> <div class="form-group"> <ph-submit class="btn-primary btn-lg" data-ng-click="submit()" data-form="form" data-text="Senden"></ph-submit> </div> </form> </div> </div>'),a.put("modules/account/views/validate-email-address.html",'<div class="row" data-ng-show="submitted"> <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"> <div class="page-header"> <h1 data-view-title>Validierung</h1> </div> <p>Deine E-Mail-Adresse wurde erfolgreich geändert.</p> <p>Du kannst dich nun <a href="" data-ui-sref="anon.login">anmelden</a>.</p> </div> </div> <div class="row" data-ng-hide="submitted"> <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"> <div class="page-header"> <h1>Validierung</h1> </div> <p>Hier wird die Richtigkeit deiner E-Mail-Adresse kontrolliert. Gibt dazu den Validierungs-Code ein, welcher an deine eingegebe E-Mail-Adresse versendet wurde.</p> <form name="form" novalidate> <div class="form-group" data-has-error="form.key"> <label class="control-label" for="key">Code</label> <input type="text" class="form-control input-lg" id="key" name="key" data-ng-model="validate.key" required> <div ph-messages="form.key"></div> </div> <div class="form-group"> <ph-submit class="btn-primary btn-lg" data-ng-click="submit()" data-form="form" data-text="Senden"></ph-submit> </div> </form> </div> </div>'),a.put("modules/admin/views/event-log.html",'<h1 data-view-title>Event-Log</h1> <table class="table table-hover" data-st-table="displayedCollection" data-st-safe-src="rowCollection"> <thead> <tr> <th class="col-sm-2">Datum</th> <th>Typ</th> <th>Text</th> </tr> <tr> <th colspan="7"><input data-st-search class="form-control" type="search" placeholder="Suchen..."></th> </tr> </thead> <tbody> <tr data-ng-repeat="row in displayedCollection"> <td>{{row.occuredOnUtc | date: \'medium\'}}</td> <td>{{row.type}}</td> <td>{{row.text}}</td> </tr> </tbody> </table>'),a.put("modules/admin/views/event-processors.html",'<h1 data-view-title>Event-Processors</h1> <table class="table table-hover" data-st-table="displayedCollection" data-st-safe-src="rowCollection"> <thead> <tr> <th data-st-sort="status">Status</th> <th data-st-sort="context">Context</th> <th data-st-sort="name">Name</th> <th data-st-sort="processedAtUtc">Processed</th> <th data-st-sort="processedEventId">Event</th> <th data-st-sort="behind">Behind</th> <th class="text-right"><a class="btn btn-primary" href="" data-ng-click="processAll()" title="Process all"><span class="glyphicon glyphicon-arrow-right"></span></a></th> </tr> <tr> <th colspan="7"><input data-st-search class="form-control" type="search" placeholder="Suchen..."></th> </tr> </thead> <tbody> <tr data-ng-repeat="row in displayedCollection"> <td> <button type="button" data-ng-disabled data-ng-switch="row.status" class="btn btn-{{row.status}} btn-sm" data-ng-click="showStatus(row)"> <span data-ng-switch-when="success" class="glyphicon glyphicon-ok"></span> <span data-ng-switch-when="warning" class="glyphicon glyphicon-warning-sign"></span> <span data-ng-switch-when="danger" class="glyphicon glyphicon-remove"></span> <span data-ng-switch-default="" class="glyphicon glyphicon-question-sign"></span> </button> </td> <td>{{row.context}}</td> <td>{{row.name}}</td> <td>{{row.processedAtUtc | date:\'medium\'}}</td> <td>{{row.processedEventId}}</td> <td>{{row.behind}}</td> <td class="text-right"> <a class="btn btn-warning btn-sm" href="" data-ng-click="reset(row)" title="Reset" data-ng-show="row.isProjection"><span class="glyphicon glyphicon-refresh"></span></a> <a class="btn btn-primary btn-sm" href="" data-ng-click="process(row)" title="Process"><span class="glyphicon glyphicon-arrow-right"></span></a> <!--<a class="btn btn-danger btn-sm" href="" data-ng-click="recreate(row)">Recreate</a>--> </td> </tr> </tbody> </table> <div class="alert alert-info" data-ng-show="!loading && rowCollection.length == 0"> <strong>Nichts gefunden!</strong> Es sind keine Event processors vorhanden. </div> <div class="alert alert-info" data-ng-show="!loading && displayedCollection.length == 0 && rowCollection.length > 0"> <strong>Nichts gefunden!</strong> Deine Suche liefert keine Ergebnisse. </div>'),a.put("modules/admin/views/mails.html",'<h1 data-view-title>E-Mails</h1> <table class="table table-hover" data-st-table="displayedCollection" data-st-safe-src="rowCollection"> <thead> <tr> <th data-st-sort="date" class="col-sm-2">Datum</th> <th data-st-sort="subject">Betreff</th> <th>Empfänger</th> <th class="text-right"><a class="btn btn-danger" data-ng-click="delete()">Alle löschen</a></th> </tr> <tr> <th colspan="4"><input data-st-search class="form-control" type="search" placeholder="Suchen..."></th> </tr> </thead> <tbody> <tr data-ng-repeat="row in displayedCollection"> <td>{{row.date|date:\'dd.MM.yyyy HH:mm:ss\'}}</td> <td>{{row.subject}}</td> <td> <div data-ng-repeat="to in row.to">{{to}}</div> </td> <td class="text-right"> <a class="btn btn-default btn-sm" href="/api/v0/mails/{{row.mailId}}/html" target="_blank" data-ng-show="row.hasHtmlPart" title="HTML-Ansicht öffnen"><span class="glyphicon glyphicon-new-window"></span></a> <a class="btn btn-default btn-sm" href="/api/v0/mails/{{row.mailId}}/text" target="_blank" data-ng-show="row.hasTextPart" title="Text-Ansicht öffnen"><span class="glyphicon glyphicon-new-window"></span></a> <a class="btn btn-danger btn-sm" href="" data-ng-click="delete(row)" title="Löschen"><span class="glyphicon glyphicon-remove"></span></a></td> </tr> </tbody> </table> <div class="alert alert-info" data-ng-show="!loading && rowCollection.length == 0"> <strong>Nichts gefunden!</strong> Es sind keine E-Mails vorhanden. </div> <div class="alert alert-info" data-ng-show="!loading && displayedCollection.length == 0 && rowCollection.length > 0"> <strong>Nichts gefunden!</strong> Deine Suche liefert keine Ergebnisse. </div>'),a.put("modules/admin/views/organizations.html",'<h1 data-view-title>Organisationen</h1> <table class="table table-hover" data-st-table="displayedCollection" data-st-safe-src="rowCollection"> <thead> <tr> <th data-st-sort="organizationId">Id</th> <th data-st-sort="name">Name</th> <th data-st-sort="establishedAtUtc">Erstellt</th> <th data-st-sort="plan">Plan</th> <th class="text-right"> <button type="button" class="btn btn-primary" data-ng-click="establishOrganization()">Neue Organisation</button> </th> </tr> <tr> <th colspan="7"><input data-st-search class="form-control" type="search" placeholder="Suchen..."></th> </tr> </thead> <tbody> <tr data-ng-repeat="row in displayedCollection"> <td> <ph-guid data-value="row.organizationId"></ph-guid> </td> <td>{{row.name}}</td> <td> <ph-date data-value="row.establishedAtUtc"></ph-date> </td> <td> <div class="btn-group"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> {{row.plan | organizationPlan}} <span class="caret"></span> </button> <ul class="dropdown-menu"> <li><a href="" data-ng-click="changePlan(row, \'free\')">{{\'free\' | organizationPlan}}</a></li> <li><a href="" data-ng-click="changePlan(row, \'membership\')">{{\'membership\' | organizationPlan}}</a></li> </ul> </div> </td> <td></td> </tr> </tbody> </table> <div class="alert alert-info" data-ng-show="rowCollection.length == 0"> <strong>Nichts gefunden!</strong> Es sind keine Organisationen vorhanden. </div> <div class="alert alert-info" data-ng-show="displayedCollection.length == 0 && rowCollection.length > 0"> <strong>Nichts gefunden!</strong> Deine Suche liefert keine Ergebnisse. </div>'),a.put("modules/admin/views/users.html",'<h1 data-view-title>Benutzer</h1> <table class="table table-hover" data-st-table="displayedCollection" data-st-safe-src="rowCollection"> <thead> <tr> <th data-st-sort="userId">Id</th> <th data-st-sort="firstName">Vorname</th> <th data-st-sort="lastName">Nachname</th> <th data-st-sort="emailAddress">E-Mail-Adresse</th> <th data-st-sort="signedUpAtUtc">Registriert am</th> <th data-st-sort="lastLogInAtUtc">Letztes Login</th> <th data-st-sort="isApproved" style="text-align:center">Bestätigt</th> <th data-st-sort="isAdmin" style="text-align:center">Admin</th> <th data-st-sort="isLocked" style="text-align:center">Gesperrt</th> </tr> <tr> <th colspan="9"><input data-st-search class="form-control" type="search" placeholder="Suchen..."></th> </tr> </thead> <tbody> <tr data-ng-repeat="row in displayedCollection"> <td> <ph-guid value="row.userId"></ph-guid> </td> <td>{{row.firstName}}</td> <td>{{row.lastName}}</td> <td>{{row.emailAddress}}</td> <td> <ph-date value="row.signedUpAtUtc"></ph-date> </td> <td> <ph-date value="row.lastLogInAtUtc"></ph-date> </td> <td style="text-align:center"> <ph-checkbox data-spin="row.isApprovedSubmitting"> <input type="checkbox" data-ng-model="row.isApproved" data-ng-change="toggleIsApproved(row)" data-ng-disabled="row.isApproved"> <label></label> </ph-checkbox> </td> <td style="text-align:center"> <ph-checkbox class="checkbox-danger" data-spin="row.isAdminSubmitting"> <input type="checkbox" data-ng-model="row.isAdmin" data-ng-change="toggleIsAdmin(row)"> <label></label> </ph-checkbox> </td> <td style="text-align:center"> <ph-checkbox class="checkbox-warning" data-spin="row.isLockedSubmitting"> <input type="checkbox" data-ng-model="row.isLocked" data-ng-change="toggleIsLocked(row)"> <label></label> </ph-checkbox> </td> </tr> </tbody> </table> <div class="alert alert-info" data-ng-show="rowCollection.length == 0"> <strong>Nichts gefunden!</strong> Es sind keine Benutzer vorhanden. </div> <div class="alert alert-info" data-ng-show="displayedCollection.length == 0 && rowCollection.length > 0"> <strong>Nichts gefunden!</strong> Deine Suche liefert keine Ergebnisse. </div>'),a.put("modules/alerts/views/modals/alert.html",'<div class="modal-header"> <button type="button" class="close" data-ng-click="$dismiss()" aria-label="Close"><span aria-hidden="true">&times;</span></button> <h3 data-view-title data-ng-bind="title"></h3> </div> <div class="modal-body"> <div class="alert alert-{{alert.type}}"> <p data-ng-bind="alert.msg"></p> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" data-ng-click="$close()">Schliessen</button> <!--<button class="btn btn-default" type="button" data-ng-click="cancel()">Abbrechen</button>--> </div>'),a.put("modules/debug/views/debug.html",'<h2 data-view-title>Debug</h2> <p>Host: {{host}}</p> <p>IsTestEnv: {{isTestEnv}}</p> <p><button class="btn btn-default" data-ng-click="toggleCartPopover()">Zeige Warenkorb-Meldung</button></p> <h2>Test Alerts</h2> <form> <div class="form-group"> <input type="text" class="form-control" id="inputAlertMsg" data-ng-model="alertMsg"> </div> <button class="btn btn-default" data-ng-click="addError()">Add error</button> <button class="btn btn-default" data-ng-click="addDanger()">Add danger</button> <button class="btn btn-default" data-ng-click="addWarning()">Add warning</button> <button class="btn btn-default" data-ng-click="addSuccess()">Add success</button> </form> <h2>Status</h2> <pre>{{status|json}}</pre> <h2>Cookies</h2> <pre>{{cookies|json}}</pre>'),a.put("modules/feedback/views/feedback.html",'<div class="row" data-ng-show="submitted"> <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"> <div class="page-header"> <h1 data-view-title>Feedback</h1> </div> <p>Merci!</p> </div> </div> <div class="row" data-ng-hide="submitted"> <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"> <div class="page-header"> <h1>Feedback</h1> </div> <form name="form" novalidate> <div class="form-group" data-has-error="form.emailAddress"> <label class="control-label" for="emailAddress">E-Mail-Adresse</label> <input type="email" class="form-control input-lg" id="emailAddress" name="emailAddress" data-ng-model="feedback.emailAddress" required> <div ph-messages="form.emailAddress"></div> </div> <div class="form-group" data-has-error="form.comment"> <label class="control-label" for="comment">Feedback</label> <textarea class="form-control input-lg" id="comment" name="comment" data-ng-model="feedback.comment" rows="10" required></textarea> <div ph-messages="form.comment"></div> </div> <div class="form-group"> <ph-submit class="btn-primary btn-lg" data-ng-click="submit()" data-form="form" data-text="Senden"></ph-submit> </div> </form> </div> </div>'),a.put("modules/inventory/views/directives/phInventoryArticleActivities.html",'<div> <div class="actions" data-ng-repeat="row in ipa.actions" data-ng-switch="row.type" style="margin-top:10px"> <strong data-ng-show="row.data.initiator">{{row.data.initiator.FullName}}</strong> <span data-ng-hide="row.data.initiator">Jemand</span> <span data-ng-switch-when="ArticleCreated">hat den Artikel <b>{{row.data.name}}</b> erfasst.</span> <span data-ng-switch-when="PricesChanged">hat die Preise angepasst.</span> <span data-ng-switch-when="SpecificationChanged">hat die Spezifikation aktualisiert.</span> <span data-ng-switch-when="DescriptionChanged">hat die Beschreibung aktualisiert.</span> <span data-ng-switch-when="ImageAdded">hat eine neue Datei hinzugefügt.</span> <span data-ng-switch-when="ImageRemoved">hat eine Datei entfernt.</span> <span data-ng-switch-default=""> {{row.name}} </span> <br> <span am-time-ago="row.occuredOnUtc" title="{{row.occuredOnUtc | date:\'medium\'}}" class="text-muted" style="display:inline-block"></span> </div> </div>'),a.put("modules/inventory/views/directives/phInventoryArticleDescription.html",'<div> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <form name="vm.form"> <div class="form-group"> <textarea class="form-control" data-ui-tinymce rows="20" data-ng-model="vm.data.description" autofocus></textarea> </div> <div class="form-group"> <ph-submit class="btn-primary" data-ng-click="vm.submit()" data-form="form" data-text="Speichern"></ph-submit> <a class="btn btn-default" href="" ph-history-back>Abbrechen</a> </div> </form> </div> </div> </div>'),a.put("modules/inventory/views/directives/phInventoryArticleDetails.html",'<div> <div class="row"> <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6"> <ph-inventory-article-fields tenant-id="vm.tenantId" article-id="vm.articleId" article="vm.article"></ph-inventory-article-fields> </div> <div class="col-xs-12 col-sm-10 col-md-4 col-lg-offset-2 col-lg-4"> <ph-inventory-article-prices tenant-id="vm.tenantId" article-id="vm.articleId" has-member-price="vm.hasMemberPrice" article="vm.article"></ph-inventory-article-prices> </div> </div> <div class="row"> <div class="col-xs-12"> <ph-inventory-article-tags-input tenant-id="vm.tenantId" article-id="vm.articleId" tags="vm.article.tags"></ph-inventory-article-tags-input> </div> </div> </div>'),a.put("modules/inventory/views/directives/phInventoryArticleFields.html",'<div> <form class="form-horizontal" name="form" novalidate> <div class="form-group"> <label class="control-label col-sm-3" for="name">Name</label> <div class="col-sm-9" data-has-error="form.name"> <input type="text" class="form-control" id="name" name="name" data-ng-model="formModel.name" required autofocus> <div ph-messages="form.name"></div> </div> </div> <div class="form-group"> <label class="control-label col-sm-3" for="brand">Marke</label> <div class="col-sm-9" data-has-error="form.brand"> <input type="text" class="form-control" id="brand" name="brand" data-ng-model="formModel.brand"> <div ph-messages="form.brand"></div> </div> </div> <div class="form-group"> <label class="control-label col-sm-3" for="grossStock">Bestand (Brutto)</label> <div class="col-sm-9" data-has-error="form.grossStock"> <input type="number" class="form-control" id="grossStock" name="grossStock" data-ng-model="formModel.grossStock" min="0" required> <div ph-messages="form.grossStock"></div> </div> </div> <div class="form-group"> <label class="control-label col-sm-3" for="color">Farbe</label> <div class="col-sm-9" data-has-error="form.color"> <input type="text" class="form-control" id="color" name="color" data-ng-model="formModel.color"> <div ph-messages="form.color"></div> </div> </div> <div class="form-group"> <div class="col-sm-offset-3 col-sm-9"> <ph-submit class="btn-primary" data-ng-click="submit()" data-form="form" data-text="Speichern"></ph-submit> <a class="btn btn-default" href="" data-ng-click="reset()">Verwerfen</a> </div> </div> </form> </div>'),a.put("modules/inventory/views/directives/phInventoryArticleFiles.html",'<div> <!-- The file upload form used as target for the file upload widget --> <form id="fileupload" action="" method="POST" enctype="multipart/form-data" data-ng-controller="FileUploadCtrl" data-file-upload="options" data-ng-class="{\'fileupload-processing\': processing() || loadingFiles}"> <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload --> <div class="row fileupload-buttonbar"> <div class="col-lg-7"> <!-- The fileinput-button span is used to style the file input field as button --> <span class="btn btn-success fileinput-button" ng-class="{disabled: disabled}"> <i class="glyphicon glyphicon-plus"></i> <span>Add files...</span> <input type="file" name="files[]" multiple ng-disabled="disabled"> </span> <button type="button" class="btn btn-primary start" data-ng-click="submit()"> <i class="glyphicon glyphicon-upload"></i> <span>Start upload</span> </button> <button type="button" class="btn btn-warning cancel" data-ng-click="cancel()"> <i class="glyphicon glyphicon-ban-circle"></i> <span>Cancel upload</span> </button> <!-- The global file processing state --> <span class="fileupload-process"></span> </div> <!-- The global progress state --> <div class="col-lg-5 fade" data-ng-class="{in: active()}"> <!-- The global progress bar --> <div class="progress progress-striped active" data-file-upload-progress="progress()"> <div class="progress-bar progress-bar-success" data-ng-style="{width: num + \'%\'}"></div> </div> <!-- The extended global progress state --> <div class="progress-extended">&nbsp;</div> </div> </div> <!-- The table listing the files available for upload/download --> <table class="table table-striped files ng-cloak"> <tr data-ng-repeat="file in queue" data-ng-class="{\'processing\': file.$processing()}"> <td style="width:50px" data-ng-show="hasPreview"> <ph-checkbox data-spin="file.isPreviewSubmitting"> <input type="checkbox" data-ng-model="file.isPreview" data-ng-change="toggleIsPreview(file)" data-ng-disabled="isPreviewSubmitting || file.isPreview || file.$state() == \'pending\' || file.$state() == \'rejected\' || file.$state() == \'resolved\'"> <label></label> </ph-checkbox> </td> <td data-ng-switch data-on="!!file.thumbnailUrl"> <div class="preview" data-ng-switch-when="true"> <a data-ng-href="{{file.url}}" title="{{file.name}}" download="{{file.name}}" data-gallery><img data-ng-src="{{file.thumbnailUrl}}" alt=""></a> </div> <div class="preview" data-ng-switch-default data-file-upload-preview="file"></div> </td> <td> <p class="name" data-ng-switch data-on="!!file.url"> <span data-ng-switch-when="true" data-ng-switch data-on="!!file.thumbnailUrl"> <a data-ng-switch-when="true" data-ng-href="{{file.url}}" title="{{file.name}}" download="{{file.name}}" data-gallery>{{file.name}}</a> <a data-ng-switch-default data-ng-href="{{file.url}}" title="{{file.name}}" download="{{file.name}}">{{file.name}}</a> </span> <span data-ng-switch-default>{{file.name}}</span> </p> <strong data-ng-show="file.error" class="error text-danger">{{file.error}}</strong> </td> <td> <p class="size">{{file.size | formatFileSize}}</p> <div class="progress progress-striped active fade" data-ng-class="{pending: \'in\'}[file.$state()]" data-file-upload-progress="file.$progress()"> <div class="progress-bar progress-bar-success" data-ng-style="{width: num + \'%\'}"></div> </div> </td> <td> <button type="button" class="btn btn-primary start" data-ng-click="file.$submit()" data-ng-hide="!file.$submit || options.autoUpload" data-ng-disabled="file.$state() == \'pending\' || file.$state() == \'rejected\'"> <i class="glyphicon glyphicon-upload"></i> <span>Start</span> </button> <button type="button" class="btn btn-warning cancel" data-ng-click="file.$cancel()" data-ng-hide="!file.$cancel"> <i class="glyphicon glyphicon-ban-circle"></i> <span>Cancel</span> </button> <button data-ng-controller="FileDestroyCtrl" type="button" class="btn btn-danger destroy" data-ng-click="file.$destroy()" data-ng-hide="!file.$destroy"> <i class="glyphicon glyphicon-trash"></i> <span>Delete</span> </button> </td> </tr> </table> </form> </div>'),a.put("modules/inventory/views/directives/phInventoryArticlePrices.html",'<div> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title">Preis pro Woche</h3> </div> <div class="panel-body"> <form name="formPrices" novalidate> <div class="form-group" data-has-error="formPrices.memberPrice" data-ng-show="hasMemberPrice"> <label class="control-label" for="memberPrice">Mitglieder</label> <input type="number" class="form-control" id="memberPrice" name="memberPrice" data-ng-model="pricesFormModel.memberPrice" min="0.01"> <div ph-messages="formPrices.memberPrice"></div> </div> <div class="form-group" data-has-error="formPrices.publicPrice"> <label class="control-label" for="publicPrice">Externe</label> <input type="number" class="form-control" id="publicPrice" name="publicPrice" data-ng-model="pricesFormModel.publicPrice" min="0.01"> <div ph-messages="formPrices.publicPrice"></div> </div> <div class="form-group"> <ph-submit class="btn-primary" data-ng-click="submitPrices(formPrices, pricesFormModel)" data-form="formPrices" data-text="Speichern"></ph-submit> <button type="button" class="btn btn-default" data-ng-click="resetPrices(formPrices, pricesFormModel, pricesFormReset)"> Verwerfen </button> </div> </form> </div> </div> </div>'),
a.put("modules/inventory/views/directives/phInventoryArticleSpecification.html",'<div> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <form name="vm.form"> <div class="form-group"> <textarea class="form-control" data-ui-tinymce rows="20" data-ng-model="vm.data.specification" autofocus></textarea> </div> <div class="form-group"> <ph-submit class="btn-primary" data-ng-click="vm.submit()" data-form="form" data-text="Speichern"></ph-submit> <a class="btn btn-default" href="" ph-history-back>Abbrechen</a> </div> </form> </div> </div> </div>'),a.put("modules/inventory/views/directives/phInventoryArticleStock.html",'<div> <div class="row"> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="panel panel-default"> <div class="panel-heading">Verfügbarkeit</div> <div class="panel-body"> <table class="table"> <thead> <tr> <th>Ab</th> <th>Anzahl</th> </tr> </thead> <tbody> <tr data-ng-repeat="row in vm.availabilities"> <td>{{row.fromUtc |date:\'dd.MM.yyyy\'}}</td> <td>{{row.quantity}}</td> </tr> </tbody> </table> </div> </div> </div> <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6"> <div class="panel panel-default"> <div class="panel-heading">Reservationen</div> <div class="panel-body"> <table class="table"> <thead> <tr> <th>Von</th> <th>Bis</th> <th>Anzahl</th> </tr> </thead> <tbody> <tr data-ng-repeat="row in vm.reservations"> <td>{{row.fromUtc |date:\'dd.MM.yyyy\'}}</td> <td>{{row.toUtc |date:\'dd.MM.yyyy\'}}</td> <td>{{row.quantity}}</td> </tr> </tbody> </table> </div> </div> </div> </div> </div>'),a.put("modules/inventory/views/directives/phInventoryArticleTagsInput.html",'<div> <div class="panel panel-default"> <div class="panel-heading"> <h3 class="panel-title">Tags</h3> </div> <div class="panel-body"> <tags-input ng-model="tags" on-tag-added="tagAdded($tag)" on-tag-removed="tagRemoved($tag)"> <auto-complete source="loadTags($query)"></auto-complete> </tags-input> </div> </div> </div>'),a.put("modules/inventory/views/modals/inventoryCreateArticleModal.html",'<div class="modal-header"> <button type="button" class="close" data-ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button> <h3 data-view-title>Neues Material</h3> </div> <div class="modal-body"> <form class="form-horizontal" name="form" novalidate> <div class="form-group"> <label class="control-label col-sm-3" for="name">Name</label> <div class="col-sm-9" data-ng-class="{\'has-error\':!form.name.$valid && form.name.$touched}"> <input class="form-control" type="text" data-ng-model="name" id="name" name="name" required autofocus> </div> </div> <div class="form-group"> <label class="control-label col-sm-3" for="name">Bestand</label> <div class="col-sm-9" data-ng-class="{\'has-error\':!form.quantity.$valid && form.quantity.$touched}"> <input class="form-control" type="number" data-ng-model="quantity" id="quantity" name="quantity" min="0" required> </div> </div> </form> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" data-ng-click="ok()" data-ng-disabled="form.$invalid">Erstellen</button> <button class="btn btn-default" type="button" data-ng-click="cancel()">Abbrechen</button> </div>'),a.put("modules/messages/views/directives/phMessages.html",'<div role="alert" data-ng-messages="field.$error" data-ng-show="field.$touched || field.$$parentForm.$submitted"> <div data-ng-messages-include="modules/messages/views/messages.html"></div> <ng-transclude></ng-transclude> </div>'),a.put("modules/messages/views/messages.html",'<span class="help-block" data-ng-message="required">Dieses Feld erfordert eine Eingabe.</span> <span class="help-block" data-ng-message="minlength">Die Eingabe ist zu kurz.</span> <span class="help-block" data-ng-message="maxlength">Die Eingabe ist zu lang.</span> <span class="help-block" data-ng-message="min">Die Eingabe ist zu klein.</span> <span class="help-block" data-ng-message="max">Die Eingabe ist zu gross</span> <span class="help-block" data-ng-message="number">Die Eingabe ist keine gültige Zahl.</span> <span class="help-block" data-ng-message="integer">Die Eingabe ist keine gültige Zahl.</span> <span class="help-block" data-ng-message="email">Die E-Mail-Adresse ist ungültig.</span>'),a.put("modules/orders/views/modals/add-order-item.html",'<div class="modal-header"> <button type="button" class="close" data-ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button> <h3 data-view-title>Artikel hinzufügen</h3> </div> <div class="modal-body"> <form class="form-horizontal" name="addItemForm" novalidate> <div class="form-group"> <label class="col-sm-3 control-label" for="inputArticle">Artikel</label> <div class="col-sm-9" data-ng-class="{\'has-error\':!addItemForm.inputArticleId.$valid && addItemForm.inputArticleId.$touched}"> <input type="text" data-ng-model="selected" class="form-control" id="inputArticleId" name="inputArticleId" data-uib-typeahead="article as article.name for article in getArticles($viewValue)" data-typeahead-loading="loadingLocations" data-typeahead-no-results="noResults" id="inputArticle" required> <!--<span class="help-block">Benutzer-Id oder E-Mail-Adresse</span>--> <span class="help-block" data-ng-show="addItemForm.inputArticleId.$error.required && addItemForm.inputArticleId.$touched">Erforderlich!</span> <span class="help-block"> <span data-ng-hide="loadingLocations || noResults">&nbsp;</span> <span data-ng-show="loadingLocations"><span class="glyphicon glyphicon-refresh"></span> Bitte warten...</span> <span data-ng-show="noResults"><span class="glyphicon glyphicon-remove"></span> Kein Material gefunden</span> </span> <!--<pre>Model: {{selected | json}}</pre>--> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="fromUtc">Von</label> <div class="col-sm-9" data-ng-class="{\'has-error\':!addItemForm.fromUtc.$valid && addItemForm.fromUtc.$touched}"> <p class="input-group"> <input type="text" class="form-control" id="fromUtc" name="fromUtc" data-uib-datepicker-popup="mediumDate" data-ng-model="fromUtc" data-is-open="fromUtcIsOpen" required> <span class="input-group-btn"> <button type="button" class="btn btn-default" data-ng-click="fromUtcIsOpen = true"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> <span class="help-block" data-ng-show="addItemForm.fromUtc.$error.required && addItemForm.fromUtc.$touched">Erforderlich!</span> <span class="help-block" data-ng-show="addItemForm.fromUtc.$error.date && addItemForm.fromUtc.$touched">Ungültiges Datum!</span> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="toUtc">Bis</label> <div class="col-sm-9" data-ng-class="{\'has-error\':!addItemForm.toUtc.$valid && addItemForm.toUtc.$touched}"> <p class="input-group"> <input type="text" class="form-control" id="toUtc" name="toUtc" data-uib-datepicker-popup="mediumDate" data-ng-model="toUtc" data-is-open="toUtcIsOpen" required> <span class="input-group-btn"> <button type="button" class="btn btn-default" data-ng-click="toUtcIsOpen = true"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> <span class="help-block" data-ng-show="addItemForm.toUtc.$error.required && addItemForm.toUtc.$touched">Erforderlich!</span> <span class="help-block" data-ng-show="addItemForm.toUtc.$error.date && addItemForm.toUtc.$touched">Ungültiges Datum!</span> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="quantity">Menge</label> <div class="col-sm-9" data-ng-class="{\'has-error\':!addItemForm.quantity.$valid && addItemForm.quantity.$touched}"> <input type="number" class="form-control" id="quantity" name="quantity" data-ng-model="quantity" required min="0"> <span class="help-block" data-ng-show="addItemForm.quantity.$error.required && addItemForm.quantity.$touched">Erforderlich!</span> <span class="help-block" data-ng-show="addItemForm.quantity.$error.number">Keine gültige Zahl!</span> <span class="help-block" data-ng-show="addItemForm.quantity.$error.min || addItemForm.quantity.$error.max">Die Menge muss grösser als 0 sein!</span> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="lineTotal">Preis</label> <div class="col-sm-9" data-has-error="addItemForm.lineTotal"> <input type="number" class="form-control" id="lineTotal" name="lineTotal" data-ng-model="lineTotal" required> <span class="help-block" data-ng-show="addItemForm.lineTotal.$error.required && addItemForm.lineTotal.$touched">Erforderlich!</span> <span class="help-block" data-ng-show="addItemForm.lineTotal.$error.number">Keine gültige Zahl!</span> </div> </div> </form> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" data-ng-click="ok()" data-ng-disabled="addItemForm.$invalid">Hinzufügen</button> <button class="btn btn-default" type="button" data-ng-click="cancel()">Abbrechen</button> </div>'),a.put("modules/orders/views/modals/create-order.html",'<div class="modal-header"> <button type="button" class="close" data-ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button> <h3 data-view-title>Neue Bestellung</h3> </div> <div class="modal-body"> <form class="form-horizontal" name="form" novalidate> <div class="form-group"> <label class="control-label col-sm-3" for="lessee">Mieter</label> <div class="col-sm-9"> <input type="text" data-ng-model="selected" placeholder="" data-uib-typeahead="member as (member.firstName + \' \' + member.lastName) for member in getMembers($viewValue)" data-typeahead-loading="loadingLocations" data-typeahead-no-results="noResults" class="form-control" id="lessee" required> <!--<span class="help-block">Benutzer-Id oder E-Mail-Adresse</span>--> <span class="help-block"> <span data-ng-hide="loadingLocations || noResults">&nbsp;</span> <span data-ng-show="loadingLocations"><span class="glyphicon glyphicon-refresh"></span> Bitte warten...</span> <span data-ng-show="noResults"><span class="glyphicon glyphicon-remove"></span> Kein Mitglied gefunden</span> </span> <!--<pre>Model: {{selected | json}}</pre>--> </div> </div> </form> </div> <div class="modal-footer"> <button class="btn btn-primary" type="button" data-ng-click="ok()" data-ng-disabled="form.$invalid">Erstellen</button> <button class="btn btn-default" type="button" data-ng-click="cancel()">Abbrechen</button> </div>'),a.put("modules/organizations/views/applications.html",'<view-title>Beitrittsanfragen</view-title> <table class="table table-hover" data-st-table="displayedCollection" data-st-safe-src="rowCollection"> <thead> <tr> <th colspan="7"> <input data-st-search class="form-control" type="search" placeholder="Suchen..."> </th> </tr> <tr> </tr><tr> <th data-st-sort="requestedAtUtc">Datum</th> <th data-st-sort="firstName">Vorname</th> <th data-st-sort="lastName">Nachname</th> <th data-st-sort="emailAddress">E-Mail-Adresse</th> <th data-st-sort="customMemberNumber">Nummer</th> <th></th> </tr> </thead> <tbody> <tr data-ng-repeat="row in displayedCollection"> <td><ph-date value="row.requestedAtUtc"></ph-date></td> <td>{{row.firstName}}</td> <td>{{row.lastName}}</td> <td>{{row.emailAddress}}</td> <td>{{row.customMemberNumber}}</td> <td class="text-right"> <button type="button" class="btn btn-success btn-sm" data-ng-disabled="row.isApproving || row.isRejecting" data-mwl-confirm data-on-confirm="approve(row)" data-title="Bestätigung" data-message="Möchtest du <strong>{{row.firstName}} {{row.lastName}}</strong> wirklich bestätigen?" data-confirm-text="Ja" data-cancel-text="Nein"><span class="glyphicon glyphicon-refresh glyphicon-spin" data-ng-show="row.isApproving"></span> Bestätigen</button> <button type="button" class="btn btn-default btn-sm" data-ng-disabled="row.isApproving || row.isRejecting" data-mwl-confirm data-on-confirm="reject(row)" data-title="Bestätigung" data-message="Möchtest du <strong>{{row.firstName}} {{row.lastName}}</strong> wirklich ablehnen?" data-confirm-text="Ja" data-cancel-text="Nein"><span class="glyphicon glyphicon-refresh glyphicon-spin" data-ng-show="row.isRejecting"></span> Ablehnen</button> </td> </tr> </tbody> </table> <div class="alert alert-info" data-ng-show="rowCollection.length == 0"> <strong>Nichts gefunden!</strong> Es sind keine Beitrittsanfragen vorhanden. </div> <div class="alert alert-info" data-ng-show="displayedCollection.length == 0 && rowCollection.length > 0"> <strong>Nichts gefunden!</strong> Deine Suche liefert keine Ergebnisse. </div>'),a.put("modules/organizations/views/directives/ph-organization-navbar.html",'<ul class="nav nav-tabs" style="margin-bottom:10px" data-access-level="accessLevels.manager" data-organization-id="organizationId"> <li role="presentation" data-ui-sref-active="active"> <a href="" data-ui-sref="organization.home({organizationId: organizationId})" title="Profil"><span class="glyphicon glyphicon-home"></span></a> </li> <li role="presentation" data-ui-sref-active="active"> <a href="" data-ui-sref="organization.store({organizationId: organizationId})">Materialstelle</a> </li> <li role="presentation" data-ui-sref-active="active" active-nav="nestedTop"> <a href="" data-ui-sref="organization.orders({organizationId: organizationId})">Bestellungen</a> </li> <li role="presentation" data-ui-sref-active="active" active-nav="nestedTop"> <a href="" data-ui-sref="organization.products({organizationId: organizationId})">Material</a> </li> <li role="presentation" data-ui-sref-active="active"> <a href="" data-ui-sref="organization.members({organizationId: organizationId})">Mitglieder</a> </li> <li role="presentation" data-ui-sref-active="active"> <a href="" data-ui-sref="organization.applications({organizationId: organizationId})">Beitrittsanfragen</a> </li> <li role="presentation" class="pull-right" data-ui-sref-active="active"> <a href="" data-ui-sref="organization.settings({organizationId: organizationId})" title="Einstellungen"><span class="glyphicon glyphicon-cog"></span></a> </li> <li role="presentation" class="pull-right" data-ui-sref-active="active"> <a href="" data-ui-sref="organization.files({organizationId: organizationId})" title="Dateien"><span class="glyphicon glyphicon-file"></span></a> </li> </ul>'),a.put("modules/organizations/views/directives/ph-organization-product-navbar.html",'<ul class="nav nav-tabs" style="margin-bottom:10px"> <li role="presentation" data-ui-sref-active="active"> <a href="" data-ui-sref="organization.product.details({organizationId: organizationId, articleShortId: articleShortId, articleId: articleId})">#{{articleShortId}}</a> </li> <li role="presentation" data-ui-sref-active="active"> <a href="" data-ui-sref="organization.product.description({organizationId: organizationId, articleShortId: articleShortId, articleId: articleId})">Beschreibung</a> </li> <li role="presentation" data-ui-sref-active="active"> <a href="" data-ui-sref="organization.product.specification({organizationId: organizationId, articleShortId: articleShortId, articleId: articleId})">Spezifikation</a> </li> <li role="presentation" data-ui-sref-active="active"> <a href="" data-ui-sref="organization.product.stock({organizationId: organizationId, articleShortId: articleShortId, articleId: articleId})">Bestand</a> </li> <li role="presentation" data-ui-sref-active="active"> <a href="" data-ui-sref="organization.product.files({organizationId: organizationId, articleShortId: articleShortId, articleId: articleId})">Dateien</a> </li> <li role="presentation" data-ui-sref-active="active"> <a href="" data-ui-sref="organization.product.actions({organizationId: organizationId, articleShortId: articleShortId, articleId: articleId})" title="Aktivitäten"><span class="glyphicon glyphicon-flash"></span></a> </li> </ul>'),a.put("modules/organizations/views/edit-contact-details.html",'<view-title>Kontakt bearbeiten</view-title> <form class="form-horizontal" name="form"> <!--\n          <div class="form-group">\n            <label class="col-sm-2 control-label" for="name">Name</label>\n            <div class="col-sm-10">\n              <input type="text" class="form-control" id="name" placeholder="Name" ng-model="settings.name" />\n            </div>\n          </div>\n\n          <div class="form-group">\n            <label class="col-sm-2 control-label" for="url">URL</label>\n            <div class="col-sm-10">\n              <input type="text" class="form-control" id="url" placeholder="Name" ng-model="settings.url" readonly="readonly" />\n              <span class="help-block">Die Startseite der Organisation kann direkt mit <strong>https://www.phundus.ch/{{settings.url}}</strong> verlinkt werden.</span>\n            </div>\n          </div>\n  --> <div class="form-group"> <label class="col-sm-3 control-label" for="line1">Anschrift</label> <div class="col-sm-9" data-has-error="form.line1"> <input type="text" class="form-control" id="line1" name="line1" data-ng-model="contactDetails.line1"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="line2">Zusatz</label> <div class="col-sm-9" data-has-error="form.line2"> <input type="text" class="form-control" id="line2" name="line2" data-ng-model="contactDetails.line2"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="street">Strasse</label> <div class="col-sm-9" data-has-error="form.street"> <input type="text" class="form-control" id="street" name="street" data-ng-model="contactDetails.street"> </div> </div> <div class="form-group"> <label class="col-xs-12 col-sm-3 control-label" for="postcode">Postleitzahl / Ort</label> <div class="col-xs-5 col-sm-3" data-has-error="form.postcode"> <input type="number" class="form-control" id="postcode" name="postcode" data-ng-model="contactDetails.postcode" required min="1000" max="9999"> </div> <div class="col-xs-7 col-sm-6" data-has-error="form.city"> <input type="text" class="form-control" id="city" name="city" data-ng-model="contactDetails.city"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="phoneNumber">Telefonnummer</label> <div class="col-sm-9" data-has-error="form.phoneNumber"> <input type="text" class="form-control" id="phoneNumber" name="phoneNumber" data-ng-model="contactDetails.phoneNumber"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="emailAddress">E-Mail-Adresse</label> <div class="col-sm-9" data-has-error="form.emailAddress"> <input type="email" class="form-control" id="emailAddress" name="emailAddress" data-ng-model="contactDetails.emailAddress"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" for="website">Webseite</label> <div class="col-sm-9" data-has-error="form.website"> <input type="url" class="form-control" id="website" name="website" placeholder="https://www.domain.ch/" data-ng-model="contactDetails.website"> <span class="help-block">Die Webseite deiner Organisation, z.B. https://www.phundus.ch/.</span> </div> </div> <!--\n\n          <div class="form-group">\n            <label class="col-sm-2 control-label" for="documentTemplate">Dokumentvorlage</label>\n            <div class="col-sm-10">\n              <select class="form-control" id="documentTemplate" ng-model="settings.documentTemplate" ng-options="value.name as value.name for value in files">\n                <option value="">-- Weisse Seite --</option>\n              </select>\n            </div>\n          </div>\n  --> <div class="form-group"> <div class="col-sm-offset-3 col-sm-9"> <ph-submit class="btn-primary" data-ng-click="submit()" data-form="form" data-text="Speichern"></ph-submit> <button type="button" class="btn btn-default" data-ng-click="cancel()">Abbrechen</button> </div> </div> </form>'),a.put("modules/organizations/views/edit-startpage.html",'<view-title>Startseite bearbeiten</view-title> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <form name="form"> <div class="form-group"> <textarea class="form-control" data-ui-tinymce rows="20" data-ng-model="data.startpage" autofocus></textarea> </div> <div class="form-group"> <ph-submit class="btn-primary" data-ng-click="submit()" data-form="form" data-text="Speichern"></ph-submit> <button type="button" class="btn btn-default" data-ng-click="cancel()">Abbrechen</button> </div> </form> </div> </div>'),a.put("modules/organizations/views/files.html",'<div class="page-header"> <h1 data-view-title>Dateien</h1> </div> <!-- The file upload form used as target for the file upload widget --> <form id="fileupload" action="" method="POST" enctype="multipart/form-data" data-ng-controller="FileUploadCtrl" data-file-upload="options" data-ng-class="{\'fileupload-processing\': processing() || loadingFiles}"> <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload --> <div class="row fileupload-buttonbar"> <div class="col-lg-7"> <!-- The fileinput-button span is used to style the file input field as button --> <span class="btn btn-success fileinput-button" ng-class="{disabled: disabled}"> <i class="glyphicon glyphicon-plus"></i> <span>Add files...</span> <input type="file" name="files[]" multiple ng-disabled="disabled"> </span> <button type="button" class="btn btn-primary start" data-ng-click="submit()"> <i class="glyphicon glyphicon-upload"></i> <span>Start upload</span> </button> <button type="button" class="btn btn-warning cancel" data-ng-click="cancel()"> <i class="glyphicon glyphicon-ban-circle"></i> <span>Cancel upload</span> </button> <!-- The global file processing state --> <span class="fileupload-process"></span> </div> <!-- The global progress state --> <div class="col-lg-5 fade" data-ng-class="{in: active()}"> <!-- The global progress bar --> <div class="progress progress-striped active" data-file-upload-progress="progress()"><div class="progress-bar progress-bar-success" data-ng-style="{width: num + \'%\'}"></div></div> <!-- The extended global progress state --> <div class="progress-extended">&nbsp;</div> </div> </div> <!-- The table listing the files available for upload/download --> <table class="table table-striped files ng-cloak"> <tr data-ng-repeat="file in queue" data-ng-class="{\'processing\': file.$processing()}"> <td data-ng-switch data-on="!!file.thumbnailUrl"> <div class="preview" data-ng-switch-when="true"> <a data-ng-href="{{file.url}}" title="{{file.name}}" download="{{file.name}}" data-gallery><img data-ng-src="{{file.thumbnailUrl}}" alt=""></a> </div> <div class="preview" data-ng-switch-default data-file-upload-preview="file"></div> </td> <td> <p class="name" data-ng-switch data-on="!!file.url"> <span data-ng-switch-when="true" data-ng-switch data-on="!!file.thumbnailUrl"> <a data-ng-switch-when="true" data-ng-href="{{file.url}}" title="{{file.name}}" download="{{file.name}}" data-gallery>{{file.name}}</a> <a data-ng-switch-default data-ng-href="{{file.url}}" title="{{file.name}}" download="{{file.name}}">{{file.name}}</a> </span> <span data-ng-switch-default>{{file.name}}</span> </p> <strong data-ng-show="file.error" class="error text-danger">{{file.error}}</strong> </td> <td> <p class="size">{{file.size | formatFileSize}}</p> <div class="progress progress-striped active fade" data-ng-class="{pending: \'in\'}[file.$state()]" data-file-upload-progress="file.$progress()"><div class="progress-bar progress-bar-success" data-ng-style="{width: num + \'%\'}"></div></div> </td> <td> <button type="button" class="btn btn-primary start" data-ng-click="file.$submit()" data-ng-hide="!file.$submit || options.autoUpload" data-ng-disabled="file.$state() == \'pending\' || file.$state() == \'rejected\'"> <i class="glyphicon glyphicon-upload"></i> <span>Start</span> </button> <button type="button" class="btn btn-warning cancel" data-ng-click="file.$cancel()" data-ng-hide="!file.$cancel"> <i class="glyphicon glyphicon-ban-circle"></i> <span>Cancel</span> </button> <button data-ng-controller="FileDestroyCtrl" type="button" class="btn btn-danger destroy" data-ng-click="file.$destroy()" data-ng-hide="!file.$destroy"> <i class="glyphicon FileDestroyCtrl"></i> <span>Delete</span> </button> </td> </tr> </table> </form>'),a.put("modules/organizations/views/home.html",'<div class="row"> <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"> <h2 data-view-title>{{organization.name}} <a class="btn btn-default btn-sm" href="" data-access-level="accessLevels.manager" data-organization-id="organizationId" data-ui-sref="organization.startpage({organizationId: organizationId})"><span class="glyphicon glyphicon-pencil"></span></a></h2> <div data-ng-bind-html="startpage"></div> </div> <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"> <h3>Mitgliedschaft</h3> <div data-ng-show="relationship" data-ng-switch="relationship.status"> <div data-ng-switch-when="member"> <p>Du bist Mitglied seit dem {{relationship.timestamp | date: \'mediumDate\'}}.</p> </div> <div data-ng-switch-when="application"> <p>Du hast die Mitgliedschaft am {{relationship.timestamp | date: \'mediumDate\'}} beantragt.</p> </div> <div data-ng-switch-when="rejected"> <p>Dein Antrag zur Mitgliedschaft wurde am {{relationship.timestamp | date: \'mediumDate\'}} abgelehnt.</p> <p>Du kannst die Mitgliedschaft erneut <button type="button" class="btn btn-default btn-sm" data-ng-disabled="isJoining" data-mwl-confirm data-on-confirm="join()" data-title="Bestätigung" data-message="Möchtest du der Organisation {{organization.name}} wirklich beitreten?" data-confirm-text="Ja" data-cancel-text="Nein"><span class="glyphicon glyphicon-refresh glyphicon-spin" data-ng-show="isJoining"></span> beantragen </button> . </p> </div> <div data-ng-switch-default> <p>Du kannst dieser Organisation <button type="button" class="btn btn-default btn-sm" data-ng-disabled="isJoining" data-mwl-confirm data-on-confirm="join()" data-title="Bestätigung" data-message="Möchtest du der Organisation {{organization.name}} wirklich beitreten?" data-confirm-text="Ja" data-cancel-text="Nein"><span class="glyphicon glyphicon-refresh glyphicon-spin" data-ng-show="isJoining"></span> beitreten </button> . </p> </div> </div> <div> <h3>Kontakt <a class="btn btn-default btn-sm" href="" data-access-level="accessLevels.manager" data-organization-id="organizationId" data-ui-sref="organization.contact-details({organizationId: organizationId})"><span class="glyphicon glyphicon-pencil"></span></a></h3> <ph-vcard data-contact="organization.contact"></ph-vcard> </div> </div> </div> <div class="row" data-ng-show="organization.stores[0]"> <div class="col-xs-12"> <h3>Materialstelle</h3> <ph-vcard data-contact="organization.stores[0].contact"></ph-vcard> <div data-ng-show="organization.stores[0].openingHours" style="white-space:pre">{{organization.stores[0].openingHours}} </div> <div data-ng-show="organization.stores[0].coordinate"> <leaflet width="100%" height="400px" style="margin-bottom:10px"></leaflet> </div> <p></p> </div> </div>'),a.put("modules/organizations/views/members.html",'<view-title>Mitglieder</view-title> <table class="table table-hover" data-st-table="displayedCollection" data-st-safe-src="rowCollection"> <thead> <tr> <th colspan="8"> <input data-st-search class="form-control" type="search" placeholder="Suchen..."> </th> </tr> <tr> <th data-st-sort="memberId">Id</th> <th data-st-sort="firstName">Vorname</th> <th data-st-sort="lastName">Nachname</th> <th data-st-sort="emailAddress">E-Mail-Adresse</th> <th data-st-sort="jsNumber">J+S-Nummer</th> <th data-st-sort="role" style="text-align:center">Verwaltung</th> <th data-st-sort="recievesEmailNotifications" style="text-align:center">E-Mails</th> <th data-st-sort="isLocked" style="text-align:center">Gesperrt</th> </tr> </thead> <tbody> <tr data-ng-repeat="row in displayedCollection"> <td><ph-guid value="row.memberId"></ph-guid></td> <td>{{row.firstName}}</td> <td>{{row.lastName}}</td> <td>{{row.emailAddress}}</td> <td>{{row.jsNumber}}</td> <td style="text-align:center"> <ph-checkbox class="checkbox-danger" data-spin="row.isManagerSubmitting"> <input type="checkbox" data-ng-model="row.isManager" data-ng-change="toggleIsManager(row)"> <label></label> </ph-checkbox> </td> <td style="text-align:center"> <ph-checkbox class="checkbox" data-spin="row.isRecievesEmailNotifications"> <input type="checkbox" data-ng-model="row.recievesEmailNotifications" data-ng-change="toggleRecievesEmailNotifications(row)" data-ng-disabled="!row.isManager"> <label></label> </ph-checkbox> </td> <td style="text-align:center"> <ph-checkbox class="checkbox-warning" data-spin="row.isLockedSubmitting"> <input type="checkbox" data-ng-model="row.isLocked" data-ng-change="toggleIsLocked(row)"> <label></label> </ph-checkbox> </td> </tr> </tbody> </table> <div class="alert alert-info" data-ng-show="rowCollection.length == 0"> <strong>Nichts gefunden!</strong> Es sind keine Mitglieder vorhanden. </div> <div class="alert alert-info" data-ng-show="displayedCollection.length == 0 && rowCollection.length > 0"> <strong>Nichts gefunden!</strong> Deine Suche liefert keine Ergebnisse. </div>'),a.put("modules/organizations/views/order.html",'<h2 data-view-title>Bestellung {{order.orderShortId}}</h2> <div data-ng-show="order" class="row"> <div class="col-lg-4"> <p>Status: {{order.status | orderStatusText}}</p> <p>Vermieter: {{order.lessorName}}</p> <p>Erstellt: {{order.createdAtUtc | date:\'medium\'}}</p> <p>Bearbeitet: {{order.modifiedAtUtc | date:\'medium\'}}</p> </div> <div class="col-lg-4"> <p>{{order.lessee.name}}</p> <p>{{order.lessee.street}}</p> <p>{{order.lessee.postcode}} {{order.lessee.city}}</p> <p>{{order.lessee.memberNumber}}</p> </div> </div> <form name="orderForm" novalidate> <table data-ng-show="order" class="table table-bordered table-striped"> <thead> <tr> <th>#</th> <th>Artikel</th> <th>Verfügbar</th> <th>Von</th> <th>Bis</th> <th>Menge</th> <th>Stückpreis</th> <th>Total</th> <th data-ng-show="canEdit()"></th> </tr> </thead> <tbody> <tr data-ng-repeat="item in order.items"> <td>{{$index+1}}</td> <td>{{item.text}}</td> <td data-ng-show="item.isAvailable"><span class="glyphicon glyphicon-ok"></span></td> <td data-ng-show="!item.isAvailable"><span class="glyphicon glyphicon-remove"></span></td> <td data-ng-show="!item.editing">{{item.fromUtc | date:\'mediumDate\'}}</td> <td data-ng-show="!item.editing">{{item.toUtc | date:\'mediumDate\'}}</td> <td data-ng-show="!item.editing">{{item.quantity}}</td> <td data-ng-show="item.editing" class="col-sm-2" data-ng-class="{\'has-error\':!orderForm.item_{{$index}}_fromUtc.$valid && orderForm.item_{{$index}}_fromUtc.$touched}"> <p class="input-group"> <input class="form-control" type="text" required data-ng-model="item.fromUtc" name="item_{{$index}}_fromUtc" data-uib-datepicker-popup="mediumDate" data-is-open="fromUtcIsOpen"> <span class="input-group-btn"> <button type="button" class="btn btn-default" data-ng-click="fromUtcIsOpen = true"> <i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </td> <td data-ng-show="item.editing" class="col-sm-2" data-ng-class="{\'has-error\':!orderForm.item_{{$index}}_toUtc.$valid && orderForm.item_{{$index}}_toUtc.$touched}"> <p class="input-group"> <input class="form-control" type="text" required data-ng-model="item.toUtc" name="item_{{$index}}_toUtc" data-uib-datepicker-popup="mediumDate" data-is-open="toUtcIsOpen"> <span class="input-group-btn"> <button type="button" class="btn btn-default" data-ng-click="toUtcIsOpen = true"> <i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </td> <td data-ng-show="item.editing" class="col-sm-1" data-ng-class="{\'has-error\':!orderForm.item_{{$index}}_quantity.$valid && orderForm.item_{{$index}}_quantity.$touched}"> <input class="form-control" type="number" required data-ng-model="item.quantity" name="item_{{$index}}_quantity"> </td> <td>{{item.unitPrice | number:2}}</td> <td data-ng-show="!item.editing">{{item.lineTotal | number:2}}</td> <td data-ng-show="item.editing" class="col-sm-2" data-ng-class="{\'has-error\':!orderForm.item_{{$index}}_lineTotal.$valid && orderForm.item_{{$index}}_lineTotal.$touched}"> <p class="input-group"> <input class="form-control" type="text" required data-ng-model="item.lineTotal" name="item_{{$index}}_lineTotal"> <span class="input-group-btn"> <button class="btn btn-default" data-ng-click="calculateLineTotal(item)" title="Preis berechnen"> <i class="glyphicon glyphicon-refresh"></i></button> </span> </p> </td> <td data-ng-show="canEdit() && !item.editing"> <a data-ng-show="canEdit()" class="btn btn-default" href="" data-ng-click="editItem(item)" title="Bearbeiten"><span class="glyphicon glyphicon-edit"></span></a> <a data-ng-show="canEdit()" class="btn btn-default" href="" data-ng-click="removeItem(item)" title="Entfernen"><span class="glyphicon glyphicon-remove"></span></a> </td> <td data-ng-show="item.editing"> <a class="btn btn-default" href="" data-ng-click="saveEditedItem(item)" title="Speichern"><span class="glyphicon glyphicon-ok"></span></a> <a class="btn btn-default" href="" data-ng-click="cancelEditing(item)" title="Verwerfen"><span class="glyphicon glyphicon-asterisk"></span></a> </td> </tr> <tr style="font-weight:bold"> <td colspan="7" style="text-align:right">Total</td> <td>{{getTotal() | number:2}}</td> <td data-ng-show="canEdit()"></td> </tr> </tbody> </table> </form> <div class="row"> <div class="col-sm-6"> <a class="btn btn-default" href="" ph-history-back>Zurück</a> <a data-ng-show="order" class="btn btn-default" href="/api/orders/{{order.orderId}}/pdf">PDF</a> </div> <div ng-show="order" class="col-sm-6" style="text-align:right"> <a class="btn btn-default" data-ng-show="canEdit()" href="" data-ng-click="showAddItem(order)">Artikel hinzufügen</a> <a class="btn btn-primary" data-ng-show="canConfirm()" href="" data-ng-click="confirmOrder(order)">Bestätigen</a> <a class="btn btn-danger" data-ng-show="canReject()" href="" data-ng-click="rejectOrder(order)">Ablehnen</a> <a class="btn btn-primary" data-ng-show="canClose()" href="" data-ng-click="closeOrder(order)">Abschliessen</a> </div> </div>'),
a.put("modules/organizations/views/orders.html",'<view-title>Bestellungen</view-title> <table class="table table-hover" data-st-set-filter="customFilter" data-st-table="vm.displayedCollection" data-st-safe-src="vm.rowCollection"> <thead> <tr> <th colspan="3"> <input data-st-search class="form-control" type="search" placeholder="Suchen..."> </th> <th colspan="2"> <st-select-multiple collection="vm.rowCollection" predicate="status"></st-select-multiple> </th> </tr> <tr> <th data-st-sort-default="true" data-st-sort="orderShortId">Nummer</th> <th data-st-sort="createdAtUtc">Erstellt</th> <th data-st-sort="lesseeName">Mieter</th> <th data-st-sort="status">Status</th> <th class="text-right"> <a class="btn btn-primary" href="" data-ng-click="vm.createOrder()">Neue Bestellung</a> </th> </tr> </thead> <tbody> <tr data-ng-repeat="order in vm.displayedCollection"> <td>{{order.orderShortId}}</td> <td> <ph-date value="order.createdAtUtc"></ph-date> </td> <td>{{order.lessee.name}}</td> <td>{{order.status | orderStatusText}}</td> <td class="text-right"> <a class="btn btn-default btn-sm" href="" data-ui-sref="organization.order({organizationId: organizationId, orderId: order.orderId})">Öffnen</a> <a class="btn btn-default btn-sm" href="/api/v0/orders/{{order.orderId}}/pdf">PDF</a> </td> </tr> </tbody> </table> <div class="alert alert-info" data-ng-show="vm.rowCollection.length == 0"> <strong>Nichts gefunden!</strong> Es sind keine Bestellungen vorhanden. </div> <div class="alert alert-info" data-ng-show="vm.displayedCollection.length == 0 && vm.rowCollection.length > 0"> <strong>Nichts gefunden!</strong> Deine Suche liefert keine Ergebnisse. </div>'),a.put("modules/organizations/views/organizations.html",'<div class="row"> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"> <h2 data-view-title>Organisationen</h2> <table class="table table-hover" data-st-table="displayedOrganizations" data-st-safe-src="organizations"> <thead> <tr> <th colspan="2"> <input data-st-search class="form-control" type="search" placeholder="Suchen..."> </th> </tr> <tr> <th data-st-sort-default="true" data-st-sort="name">Name</th> <th data-st-sort="postalAddress">Adresse</th> </tr> </thead> <tbody> <tr data-ng-repeat="row in displayedOrganizations"> <td data-ng-show="row.url"><a href="/{{row.url}}">{{row.name}}</a></td> <td data-ng-hide="row.url"><a href="" data-ui-sref="organization.home({organizationId: row.organizationId})">{{row.name}}</a></td> <td style="white-space:pre-line">{{row.postalAddress}}</td> </tr> </tbody> </table> </div> <div class="col-xs-12 col-sm-12 col-md-12 col-lg-5"> <!--<div class="jumbotron">\n      <h2>Du möchtest deine eigene Organisation haben?</h2>\n      <p>Kontaktiere das phundus-Team über die Feedback-Funktion und wir kümmern uns drum!</p>\n      <p><a class="btn btn-primary btn-lg" href="/feedback" role="button">Zum Formular</a></p>\n    </div>--> </div> </div>'),a.put("modules/organizations/views/products.html",'<view-title>Material</view-title> <table class="table table-hover" data-st-table="displayedArticles" data-st-safe-src="articles"> <thead> <tr> <th colspan="6"> <input data-st-search class="form-control" type="search" placeholder="Suchen..."> </th> </tr> <tr> <th data-st-sort="articleShortId">Id</th> <th data-st-sort-default="true" data-st-sort="name">Name</th> <th class="text-right" data-st-sort="grossStock">Bestand</th> <th class="text-right" data-st-sort="pricePublic">Preis</th> <th class="text-right" data-st-sort="priceMember">Mitglieder</th> <th class="text-right"> <a class="btn btn-primary" href="" data-ng-click="createArticle()">Neues Material</a> </th> </tr> </thead> <tbody> <tr data-ng-repeat="row in displayedArticles"> <td>{{row.articleShortId}}</td> <td>{{row.name}}</td> <td class="text-right">{{row.grossStock}}</td> <td class="text-right">{{row.publicPrice | number:2}}</td> <td class="text-right">{{row.memberPrice | number:2}}</td> <td class="text-right"> <a class="btn btn-default btn-sm" href="" data-ui-sref="organization.product.details({organizationId: organizationId, articleId: row.articleId, articleShortId: row.articleShortId})">Bearbeiten</a> <a class="btn btn-danger btn-sm" href="" data-ng-click="delete(row.articleId, row.name)">Löschen</a> </td> </tr> </tbody> </table> <div class="alert alert-info" data-ng-show="articles.length == 0"> <strong>Nichts gefunden!</strong> Es sind keine Artikel vorhanden. </div> <div class="alert alert-info" data-ng-show="displayedArticles.length == 0 && articles.length > 0"> <strong>Nichts gefunden!</strong> Deine Suche liefert keine Ergebnisse. </div>'),a.put("modules/organizations/views/settings.html",'<div class="page-header"> <h1 data-view-title>Einstellungen</h1> </div> <form class="form-horizontal" name="publicForm" novalidate> <div class="form-group"> <label class="col-sm-3 control-label" for="publicRental">Öffentlicher Verleih</label> <div class="col-sm-9" data-has-error="publicForm.publicRental"> <div class="checkbox"> <input class="styled" id="publicRental" name="publicRental" type="checkbox" data-ng-model="publicFormModel.publicRental"> <label for="publicRental"> Das Material der Organisation öffentlich zugänglich machen. Dadurch können Benutzer, die nicht Mitglied der Organisation sind, das Material in den Warenkorb legen und eine Bestellung an deine Organisation auslösen. </label> </div> </div> </div> <div class="form-group"> <div class="col-sm-offset-3 col-sm-9"> <ph-submit class="btn-primary" data-ng-click="submit(publicForm, publicFormModel)" data-form="publicForm" data-text="Speichern"></ph-submit> <button type="button" class="btn btn-default" data-ng-click="reset(publicFormModel, publicFormReset)">Verwerfen </button> </div> </div> </form> <form class="form-horizontal" style="margin-top:50px" name="pdfTemplateForm" novalidate> <label class="col-sm-3 control-label" for="pdfTemplate">PDF-Template</label> <div class="col-sm-9" data-has-error="pdfTemplateForm.pdfTemplate"> <select class="form-control" id="pdfTemplate" name="pdfTemplate" data-ng-model="pdfTemplateFormModel.pdfTemplate" data-ng-options="file.name as file.name for file in files"> <option></option> </select> <span class="help-block">Wähle eine <a href="" data-ui-sref="organization.files({organizationId: organizationId})">zuvor hochgeladene</a> PDF-Datei aus, die als Dokumentvorlage für die automatisch generierten PDF-Dateien, wie zum Beispiel die Bestellungen, verwendet werden soll.</span> </div> <div class="form-group"> <div class="col-sm-offset-3 col-sm-9"> <ph-submit class="btn-primary" data-ng-click="submit(pdfTemplateForm, pdfTemplateFormModel)" data-form="pdfTemplateForm" data-text="Speichern"></ph-submit> <button type="button" class="btn btn-default" data-ng-click="reset(pdfTemplateFormModel, pdfTemplateFormReset)"> Verwerfen </button> </div> </div> </form> <form class="form-horizontal" style="margin-top:50px" name="emailTemplateForm" novalidate> <div class="form-group"> <label class="col-sm-3 control-label" for="orderReceivedEmail">Bestellbestätigung</label> <div class="col-sm-9" data-has-error="emailTemplateForm.orderReceivedEmail"> <textarea class="form-control" rows="6" id="orderReceivedEmail" data-ng-model="emailTemplateFormModel.orderReceivedEmail"></textarea> </div> </div> <div class="form-group"> <div class="col-sm-offset-3 col-sm-9"> <ph-submit class="btn-primary" data-ng-click="submit(emailTemplateForm, emailTemplateFormModel)" data-form="emailTemplateForm" data-text="Speichern"></ph-submit> <button type="button" class="btn btn-default" data-ng-click="reset(emailTemplateFormModel, emailTemplateFormReset)"> Verwerfen </button> </div> </div> </form>'),a.put("modules/shop/views/cart.html",'<div class="page-header"> <h1 data-view-title>Warenkorb</h1> </div> <form name="cartForm" novalidate> <table data-ng-show="cart.items.length > 0" class="table table-bordered table-striped"> <thead> <tr> <th>#</th> <th>Artikel</th> <th>Vermieter</th> <th class="text-center">Verfügbar</th> <th>Menge</th> <th>Von</th> <th>Bis</th> <th>Tage</th> <!--<th>Stückpreis/Woche</th>--> <th>Preis</th> <th></th> </tr> </thead> <tbody> <tr data-ng-repeat="item in cart.items"> <td>{{$index+1}}</td> <td>{{item.text}}</td> <td>{{item.ownerName}}</td> <td class="text-center"> <button type="button" class="btn btn-success" data-ng-show="item.isAvailable && !item.availabilityChecking" data-ng-click="checkAvailability(item)" title="Verfügbar!"><span class="glyphicon glyphicon-ok"></span></button> <button type="button" class="btn btn-danger" data-ng-show="!item.isAvailable && !item.availabilityChecking" data-ng-click="checkAvailability(item)" title="Nicht verfügbar!"> <span class="glyphicon glyphicon-remove"></span></button> <button type="button" class="btn btn-default" data-ng-show="item.availabilityChecking"><span class="glyphicon glyphicon-refresh glyphicon-spin" title="Verfügbarkeit wird geprüft..."></span></button> </td> <td data-ng-show="!item.editing">{{item.quantity}}</td> <td data-ng-show="item.editing" class="col-sm-1" data-ng-class="{\'has-error\':!cartForm.item_{{$index}}_quantity.$valid && cartForm.item_{{$index}}_quantity.$touched}"> <input class="form-control" type="number" required data-ng-model="item.quantity" name="item_{{$index}}_quantity"> </td> <td data-ng-show="!item.editing">{{item.fromUtc | date:\'mediumDate\'}}</td> <td data-ng-show="!item.editing">{{item.toUtc | date:\'mediumDate\'}}</td> <td data-ng-show="item.editing" class="col-sm-2" data-ng-class="{\'has-error\':!cartForm.item_{{$index}}_fromUtc.$valid && cartForm.item_{{$index}}_fromUtc.$touched}"> <p class="input-group"> <input class="form-control" type="text" required data-ng-model="item.fromUtc" name="item_{{$index}}_fromUtc" data-uib-datepicker-popup="mediumDate" data-is-open="fromUtcIsOpen"> <span class="input-group-btn"> <button type="button" class="btn btn-default" data-ng-click="fromUtcIsOpen = true"> <i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </td> <td data-ng-show="item.editing" class="col-sm-2" data-ng-class="{\'has-error\':!cartForm.item_{{$index}}_toUtc.$valid && cartForm.item_{{$index}}_toUtc.$touched}"> <p class="input-group"> <input class="form-control" type="text" required data-ng-model="item.toUtc" name="item_{{$index}}_toUtc" data-uib-datepicker-popup="mediumDate" data-is-open="toUtcIsOpen"> <span class="input-group-btn"> <button type="button" class="btn btn-default" data-ng-click="toUtcIsOpen = true"> <i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </td> <td>{{item.days}}</td> <!--<td>{{item.unitPricePerWeek | number:2}}</td>--> <td>{{item.itemTotal | number:2}}</td> <td data-ng-show="canEdit() && !item.editing"> <a data-ng-show="canEdit()" class="btn btn-default" href="" data-ng-click="editItem(item)" title="Bearbeiten"><span class="glyphicon glyphicon-edit"></span></a> <button type="button" data-ng-show="canEdit()" class="btn btn-default" data-mwl-confirm data-on-confirm="removeItem(item)" data-title="Bestätigung" data-message="Möchtest du <b>{{item.text}}</b> wirklich entfernen?" title="Artikel entfernen"><span class="glyphicon glyphicon-remove"></span></button> </td> <td data-ng-show="item.editing"> <a class="btn btn-default" href="" data-ng-click="saveEditedItem(item)" title="Speichern"><span class="glyphicon glyphicon-ok"></span></a> <a class="btn btn-default" href="" data-ng-click="cancelEditing(item)" title="Verwerfen"><span class="glyphicon glyphicon-asterisk"></span></a> </td> </tr> <tr style="font-weight:bold"> <td colspan="8" style="text-align:right">Total</td> <td>{{getTotal() | number:2}}</td> <td data-ng-show="canEdit()"></td> </tr> </tbody> </table> </form> <div class="row" data-ng-show="cart.items.length > 0"> <div class="col-xs-6 text-left"> <button type="button" class="btn btn-danger btn-lg" data-mwl-confirm data-on-confirm="clearCart()" data-title="Bestätigung" data-message="Möchtest du dein Warenkorb wirklich leeren?" data-ng-disabled="clearingCart" title="Warenkorb leeren"><span class="glyphicon glyphicon-refresh glyphicon-spin" data-ng-show="clearingCart"></span> Warenkorb leeren </button> </div> <div class="col-xs-6 text-right"> <button type="button" class="btn btn-primary btn-lg" data-ng-disabled="!canGoToCheckout()" data-ng-click="goToCheckout()">Weiter zur Bestellung </button> </div> </div> <div class="alert alert-info" data-ng-show="cart.items.length == 0 && !cartCleared"> <strong>Nichts gefunden!</strong> Dein Warenkorb ist leer. </div> <div class="alert alert-success" data-ng-show="cart.items.length == 0 && cartCleared"> <strong>Jupp!</strong> Dein Warenkorb wurde erfolgreich geleert. </div>'),a.put("modules/shop/views/checkout.html",'<view-title>Bestellung ausführen</view-title> <div data-ng-repeat="order in orders"> <div class="page-header"> <h1>Bestellung <small>bei {{order.lessor.name}}</small> </h1> </div> <div data-ng-show="order.placed"> <div class="alert alert-success"> <p><strong>Vielen Dank!</strong> Die Bestellung wurde erfolgreich ausgeführt. </p></div> <p>Du erhältst in wenigen Minuten ein E-Mail zur Bestätigung der Bestellung und mit Informationen zum weiteren Vorgehen.</p> </div> <div data-ng-hide="order.placed"> <div class="row"> <div class="col-xs-12 col-sm-12 col-md-6 col-lg-7"> <table class="table table-bordered table-striped"> <thead> <tr> <th>#</th> <th>Artikel</th> <th>Menge</th> <th>Von</th> <th>Bis</th> <th>Preis</th> </tr> </thead> <tbody> <tr data-ng-repeat="item in order.items"> <td>{{$index+1}}</td> <td>{{item.text}}</td> <td>{{item.quantity}}</td> <td>{{item.fromUtc | date:\'mediumDate\'}}</td> <td>{{item.toUtc | date:\'mediumDate\'}}</td> <td>{{item.itemTotal | number:2}}</td> </tr> <tr style="font-weight:bold"> <td colspan="5" class="text-right">Total</td> <td>{{order.total | number:2}}</td> </tr> </tbody> </table> </div> <div class="col-xs-12 col-sm-12 col-md-6 col-lg-5"> <div class="row"> <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"> <div class="panel panel-default"> <div class="panel-heading">Vermieter</div> <div class="panel-body"> <ph-vcard data-contact="order.lessor"></ph-vcard> </div> </div> </div> <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"> <div class="panel panel-default"> <div class="panel-heading">Mieter</div> <div class="panel-body"> <ph-vcard data-contact="order.lessee"></ph-vcard> </div> </div> </div> </div> </div> </div> <div class="row"> <div class="col-xs-12"> <p> Ich bin damit einverstanden, dass der Vermieter "{{order.lessor.name}}" und allfällige weitere mit dem Vermieter in Beziehung stehenden Personen meine Kontaktinformationen wie Adresse, Telefonnummern und E-Mail-Adressen einsehen. </p> <p> Ich bin damit einverstanden, dass durch die Bestellung ein Vertrag nach Art. 1 OR / Art. 253 OR. entsteht und ich für Schäden an den Gegenständen haftbar bin. Ich bin mir bewusst, dass meine persönliche Haftpflichtversicherung nicht für die Schäden aufkommt, da es sich um eine Ausleihe gegen Entgelt handelt. </p> <p> Ich bin mir bewusst, dass phundus und/oder die dahinter stehenden Personen nur als Plattformbetreiber auftreten und weder Einfluss auf die Abwicklung der Miete, noch für Schadenersatz oder Haftung belangt werden können. </p> </div> <div class="col-xs-12 text-right"> <div class="checkbox"> <input type="checkbox" value="" id="checkbox_{{$index}}_legal_notice" data-ng-model="order.legal_notice"> <label style="font-weight:normal" for="checkbox_{{$index}}_legal_notice"> Ich habe diese Hinweise gelesen und bin damit einverstanden. </label> </div> </div> </div> <div class="row"> <div class="col-xs-6"> <a class="btn btn-default btn-lg" href="" data-ui-sref="cart">Zurück zum Warenkorb</a> </div> <div class="col-xs-6 text-right"> <button type="button" class="btn btn-primary btn-lg" data-ng-click="placeOrder(order)" data-ng-disabled="!canPlaceOrder(order) || order.placing"><span class="glyphicon glyphicon-refresh glyphicon-spin" data-ng-show="order.placing"></span> Bestellung ausführen </button> </div> </div> </div> </div>'),a.put("modules/shop/views/directives/phShopItemAddToCart.html",'<div> <form name="addToCartForm" novalidate> <div class="form-group" data-has-error="addToCartForm.fromUtc"> <label class="control-label" for="fromUtc">Von</label> <p class="input-group"> <input type="text" class="form-control" id="fromUtc" name="fromUtc" data-ng-model="addToCartFormModel.fromUtc" required data-uib-datepicker-popup="mediumDate" data-is-open="fromUtcIsOpen"> <span class="input-group-btn"> <button type="button" class="btn btn-default" data-ng-click="fromUtcIsOpen = true"> <i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> <div class="form-group" data-has-error="addToCartForm.toUtc"> <label class="control-label" for="toUtc">Bis</label> <p class="input-group"> <input type="text" class="form-control" id="toUtc" name="toUtc" data-ng-model="addToCartFormModel.toUtc" required data-uib-datepicker-popup="mediumDate" data-is-open="toUtcIsOpen"> <span class="input-group-btn"> <button type="button" class="btn btn-default" data-ng-click="toUtcIsOpen = true"> <i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> <div class="col-xs-6 form-group" style="margin-left:0;padding-left:0"> <label class="control-label" for="pricePerWeek">Preis / Woche</label> <input type="text" class="form-control" id="pricePerWeek" name="pricePerWeek" data-ng-model="addToCartFormModel.pricePerWeek" readonly> </div> <div class="col-offset-xs-6 col-xs-6 from-group" style="margin-right:0;padding-right:0" data-has-error="addToCartForm.quantity"> <label class="control-label" for="quantity">Anzahl</label> <input type="number" class="form-control" id="quantity" name="quantity" data-ng-model="addToCartFormModel.quantity" required min="1"> </div> <div class="col-xs-12" style="margin:0;padding:0"> <button type="button" class="btn btn-success" data-ng-show="addToCartFormModel.isAvailable && !addToCartFormModel.availabilityChecking" data-ng-click="checkAvailability()" title="Verfügbar!"><span class="glyphicon glyphicon-ok"></span> </button> <button type="button" class="btn btn-danger" data-ng-show="!addToCartFormModel.isAvailable && !addToCartFormModel.availabilityChecking" data-ng-click="checkAvailability()" title="Nicht verfügbar!"> <span class="glyphicon glyphicon-remove"></span> </button> <button type="button" class="btn btn-default" data-ng-show="addToCartFormModel.availabilityChecking"><span class="glyphicon glyphicon-refresh glyphicon-spin" title="Verfügbarkeit wird geprüft..."></span> </button> <ph-submit class="btn-primary" data-ng-click="submit()" data-form="addToCartForm" data-text="{{total()|number:2}} CHF | Hinzufügen"></ph-submit> </div> </form> </div>'),a.put("modules/shop/views/directives/phShopItemDocuments.html",'<table class="table table-bordered table-hover table-striped" data-st-table="documents"> <thead> <tr> <th data-st-sort="fileName" data-st-sort-default="true">Name</th> <th data-st-sort="fileLength">Grösse</th> </tr> </thead> <tbody> <tr data-ng-repeat="document in documents"> <td><a href="{{document.url}}" target="_blank">{{document.fileName}}</a></td> <td>{{document.fileLength | formatFileSize}}</td> </tr> </tbody> </table>'),a.put("modules/shop/views/directives/phShopItemImages.html",'<div> <uib-carousel interval="5000" no-wrap="false"> <uib-slide ng-repeat="slide in slides" active="slide.active" index="slide.id"> <img ng-src="{{slide.image}}" style="margin:auto;height:300px"> </uib-slide> </uib-carousel> </div>'),a.put("modules/shop/views/directives/phShopPagination.html",'<div class="row"> <div class="col-xs-12 text-center"> <uib-pagination total-items="page.total" ng-model="page.current" max-size="7" boundary-link-numbers="true" items-per-page="page.size" class="pagination-lg" previous-text="&laquo;" next-text="&raquo;"></uib-pagination> </div> </div>'),a.put("modules/shop/views/directives/phShopSearch.html",'<div class="row search-box"> <div class="col-xs-12"> <form class="form-inline"> <div class="form-group"> <label class="sr-only" for="searchQuery">Search query</label> <input type="text" class="form-control" id="searchQuery" placeholder="Suchen" data-ng-model="filter.text"> </div> in <div class="form-group"> <label class="sr-only" for="lessor">Lessor</label> <select class="form-control" id="lessor" name="lessorId" data-ng-model="filter.lessorId" data-ng-options="each.lessorId as each.name for each in lessors"> <option value="">allen Organisationen</option> </select> </div> <button type="submit" class="btn btn-primary" data-ng-click="search()">phinden!</button> </form> </div> </div>'),a.put("modules/shop/views/index.html",'<ph-shop-search></ph-shop-search> <div class="row"> <div class="col-xs-6 col-md-3 shop-item" data-ng-repeat="each in items"> <a href="" data-ui-sref="public.shop-item({itemId: each.itemId})" data-ng-click="openItem($event, each.itemId)"> <div class="thumbnail"> <div data-ng-if="each.previewImageUrl" style="min-height:180px"> <img class="img-responsive" data-ng-src="{{each.previewImageUrl}}" alt="" style="margin:auto;max-height:180px"> </div> <div data-ng-if="!each.previewImageUrl" style="min-height:180px"> <img class="img-responsive" data-holder="holder.js/260x180?auto=yes" alt="" style="margin:auto"> </div> <div class="caption"> <h4 style="white-space:nowrap; overflow:hidden">{{each.name}}</h4> <p>{{each.lessorName}}</p> <p>CHF {{each.publicPrice | number:2}} <span class="text-muted" data-ng-show="each.memberPrice > 0">({{each.memberPrice | number:2}})</span> / Woche</p> </div> </div> </a> </div> </div> <ph-shop-pagination></ph-shop-pagination>'),a.put("modules/shop/views/shop-item-modal.html",'<div class="modal-header"> <button type="button" class="close" data-ng-click="close()" aria-label="Close"><span aria-hidden="true">&times;</span></button> <div class="row"> <div class="col-xs-10"> <h3 data-view-title>{{item.name}}</h3> </div> <div class="col-xs-2" style="margin-top:15px"> <div style="text-align:right"> <a href="" data-ui-sref="public.shop-item({itemId: item.itemId})" data-ng-click="close()" title="Permalink"><span class="glyphicon glyphicon-link glyphicon-lg"></span></a> <a data-ng-show="canEdit && item.lessor.type == \'organization\'" href="" data-ui-sref="organization.product.details({organizationId: item.lessor.lessorId, articleId: item.itemId, articleShortId: item.itemShortId})" data-ng-click="close()" title="Material bearbeiten"><span class="glyphicon glyphicon-pencil glyphicon-lg"></span></a> <a data-ng-show="canEdit && item.lessor.type == \'user\'" href="" data-ui-sref="user.product.details({userId: item.lessor.lessorId, articleId: item.itemId, articleShortId: item.itemShortId})" data-ng-click="close()" title="Material bearbeiten"><span class="glyphicon glyphicon-pencil glyphicon-lg"></span></a> </div> </div> </div> </div> <div class="modal-body"> <div data-ng-include data-src="\'modules/shop/views/shop-item.html\'"></div> </div> <div class="modal-footer"> <button class="btn btn-default" type="button" data-ng-click="close()">Schliessen</button> </div>'),a.put("modules/shop/views/shop-item-page.html",'<div class="page-header"> <div class="row"> <div class="col-xs-10"> <h1 data-view-title>{{item.name}}</h1> </div> <div class="col-xs-2" style="margin-top:30px"> <div style="text-align:right"> <a href="" data-ui-sref="public.shop-item({itemId: item.itemId})" data-ng-click="close()" title="Permalink"><span class="glyphicon glyphicon-link glyphicon-lg"></span></a> <a data-ng-show="canEdit && item.lessor.type == \'organization\'" href="" data-ui-sref="organization.product.details({organizationId: item.lessor.lessorId, articleId: item.itemId, articleShortId: item.itemShortId})" data-ng-click="close()" title="Material bearbeiten"><span class="glyphicon glyphicon-pencil glyphicon-lg"></span></a> <a data-ng-show="canEdit && item.lessor.type == \'user\'" href="" data-ui-sref="user.product.details({userId: item.lessor.lessorId, articleId: item.itemId, articleShortId: item.itemShortId})" data-ng-click="close()" title="Material bearbeiten"><span class="glyphicon glyphicon-pencil glyphicon-lg"></span></a> </div> </div> </div> </div> <div data-ng-include data-src="\'modules/shop/views/shop-item.html\'"></div>'),a.put("modules/shop/views/shop-item.html",'<div class="row" data-ng-if="item != null"> <div class="col-xs-12 col-md-7"> <ph-shop-item-images images="item.images"></ph-shop-item-images> </div> <div class="col-xs-12 col-md-5"> <div class="panel panel-default"> <div class="panel-heading"> <ph-lessor-link lessor="lessor" data-ng-click="close()"></ph-lessor-link> </div> <div class="panel-body"> <ph-vcard data-contact="lessor"></ph-vcard> </div> </div> <div style="margin-top:29px"> <ph-tags tags="item.tags" clicked="tagClicked"></ph-tags> </div> </div> </div> <div class="row" style="margin-top:20px" data-ng-if="item != null"> <div class="col-xs-12 col-md-4"> <div data-access-level="accessLevels.user" data-ng-show="lessor"> <ph-shop-item-add-to-cart item="item" added="close" data-ng-show="canRent"></ph-shop-item-add-to-cart> <div class="alert alert-info" data-ng-hide="canRent"> Dieser Artikel steht nur den Mitglieder dieser Organisation zur Verfügung. </div> </div> <div class="alert alert-info" data-access-level="accessLevels.anon"> Melde dich an um Artikel auszuleihen. </div> </div> <uib-tabset class="col-xs-12 col-md-8"> <uib-tab heading="Verfügbarkeit"> <ph-shop-item-availability item-id="itemId"></ph-shop-item-availability> </uib-tab> <uib-tab heading="Beschreibung" data-ng-if="item.description != null"> <div data-ng-bind-html="item.description"></div> </uib-tab> <uib-tab heading="Spezifikation" data-ng-if="item.specification != null"> <div data-ng-bind-html="item.specification"></div> </uib-tab> <uib-tab heading="Dokumente" data-ng-if="item.documents.length > 0"> <ph-shop-item-documents documents="item.documents"></ph-shop-item-documents> </uib-tab> </uib-tabset> </div>'),a.put("modules/stores/views/directives/ph-store.html",'<div data-ng-show="store" class="store"> <view-title>Materialstelle</view-title> <form name="nameForm" ph-editable="store.name" class="form-horizontal" novalidate> <div class="form-group"> <label class="col-sm-3">Name <button type="button" class="btn btn-default btn-sm pull-right" data-ng-click="nameForm.$show()" data-ng-hide="nameForm.$visible"> <span class="glyphicon glyphicon-pencil"></span> </button> </label> <div class="col-xs-12 col-sm-9" data-ng-hide="nameForm.$visible"> <p>{{store.name}}</p> </div> <div class="col-xs-12 col-sm-9" data-has-error="nameForm"> <div data-ng-show="nameForm.$visible"> <input type="text" class="form-control" id="name" name="name" data-ng-model="store.name" required> <div role="alert" data-ng-messages="nameForm.name.$error" data-ng-show="nameForm.name.$touched || form.$submitted"> </div> </div> </div> </div> <div class="form-group" data-ng-show="nameForm.$visible"> <div class="col-sm-offset-3 col-sm-9"> <ph-submit class="btn-primary" data-ng-click="updateName()" data-form="nameForm" data-text="Speichern"></ph-submit> <button type="button" class="btn btn-default" data-ng-click="nameForm.$cancel()"> Abbrechen </button> </div> </div> </form> <div class="row"> <label class="col-sm-3">Kontakt <button type="button" class="btn btn-default btn-sm pull-right" data-ng-click="showChangeContact()"> <span class="glyphicon glyphicon-pencil"></span> </button> </label> <div class="col-xs-12 col-sm-9" style="margin-bottom:15px"> <ph-vcard data-contact="store.contact"></ph-vcard> </div> </div> <form name="openingHoursForm" ph-editable="store.openingHours" class="form-horizontal" novalidate> <div class="form-group"> <label class="col-sm-3">Öffnungszeiten <button type="button" class="btn btn-default btn-sm pull-right" data-ng-click="openingHoursForm.$show()" data-ng-hide="openingHoursForm.$visible"> <span class="glyphicon glyphicon-pencil"></span> </button> </label> <div class="col-xs-12 col-sm-9" data-ng-hide="openingHoursForm.$visible"> <p style="white-space:pre">{{store.openingHours}}</p> </div> <div class="col-xs-12 col-sm-9" data-has-error="openingHoursForm.openingHours"> <div data-ng-show="openingHoursForm.$visible"> <textarea class="form-control" data-ng-model="store.openingHours" rows="4" name="openingHours" required>{{store.openingHours}}</textarea> </div> </div> </div> <div class="form-group" data-ng-show="openingHoursForm.$visible"> <div class="col-sm-offset-3 col-sm-9"> <ph-submit class="btn-primary" data-ng-click="updateOpeningHours()" data-form="openingHoursForm" data-text="Speichern"></ph-submit> <button type="button" class="btn btn-default" data-ng-click="openingHoursForm.$cancel()"> Abbrechen </button> </div> </div> </form> <form name="coordinateForm" ph-editable="coordinate" class="form-horizontal" novalidate> <div class="form-group"> <label class="col-sm-3">Koordinaten <button type="button" class="btn btn-default btn-sm pull-right" data-ng-click="coordinateForm.$show()" data-ng-hide="coordinateForm.$visible"> <span class="glyphicon glyphicon-pencil"></span> </button> </label> <div class="col-xs-12 col-sm-9" data-ng-hide="coordinateForm.$visible"> <p>{{store.coordinate.latitude}}</p> <p>{{store.coordinate.longitude}}</p> </div> <div class="col-xs-12 col-sm-9" data-ng-show="coordinateForm.$visible" data-has-error="coordinateForm.latitude"> <div data-ng-show="coordinateForm.$visible"> <input type="number" class="form-control" id="latitude" name="latitude" data-ng-model="store.coordinate.latitude" data-both-or-none="store.coordinate.longitude"> <div role="alert" data-ng-messages="coordinateForm.latitude.$error" data-ng-show="coordinateForm.latitude.$touched || form.$submitted"> </div> </div> </div> </div> <div class="form-group"> <div class="col-xs-12 col-sm-offset-3 col-sm-9" data-ng-show="coordinateForm.$visible" data-has-error="coordinateForm.longitude"> <div data-ng-show="coordinateForm.$visible"> <input type="number" class="form-control" id="longitude" name="longitude" data-ng-model="store.coordinate.longitude" data-both-or-none="store.coordinate.latitude"> <div role="alert" data-ng-messages="coordinateForm.longitude.$error" data-ng-show="coordinateForm.longitude.$touched || form.$submitted"> </div> </div> </div> </div> <div class="form-group" data-ng-show="coordinateForm.$visible"> <div class="col-sm-offset-3 col-sm-9"> <button type="button" class="btn btn-default btn-sm" data-ng-disabled="coordinateForm.$submitting" data-ng-click="fromMap()" title="Koordinate von der Karte übertragen"><span class="glyphicon glyphicon-arrow-up"></span></button> <ph-submit class="btn-primary" data-ng-click="updateCoordinate()" data-form="coordinateForm" data-text="Speichern"></ph-submit> <button type="button" class="btn btn-default" data-ng-click="coordinateForm.$cancel()"> Abbrechen </button> </div> </div> </form> <div class="row"> <div class="col-sm-12"> <leaflet width="100%" height="400px" style="margin-bottom:10px"></leaflet> </div> </div> </div>'),a.put("modules/stores/views/modals/edit-contact-details.html",'<div class="modal-header"> <button type="button" class="close" data-ng-click="cancel()" aria-label="Close"><span aria-hidden="true">&times;</span></button> <h3 data-view-title>Kontakt bearbeiten</h3> </div> <div class="modal-body"> <div class="alert alert-danger" data-ng-show="error"> {{error}} </div> <div class="alert alert-success" data-ng-show="success"> {{success}} </div> <form name="formChangeContact" class="form-horizontal" novalidate> <div class="form-group"> <label class="col-sm-4 control-label" for="line1">Anschrift</label> <div class="col-sm-8" data-has-error="formChangeContact.line1"> <input type="text" class="form-control" id="line1" name="line1" data-ng-model="contact.line1" required> <div ph-messages="formChangeContact.line1"></div> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label" for="line2">Zusatz</label> <div class="col-sm-8" data-has-error="formChangeContact.line2"> <input type="text" class="form-control" id="line2" name="line2" data-ng-model="contact.line2"> <div ph-messages="formChangeContact.line2"></div> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label" for="street">Strasse</label> <div class="col-sm-8" data-has-error="formChangeContact.street"> <input type="text" class="form-control" id="street" name="street" data-ng-model="contact.street" required> <div ph-messages="formChangeContact.street"></div> </div> </div> <div class="form-group"> <label class="col-xs-12 col-sm-4 control-label" for="postcode">Postleitzahl / Ort</label> <div class="col-xs-5 col-sm-3" data-has-error="formChangeContact.postcode"> <input type="number" class="form-control" id="postcode" name="postcode" data-ng-model="contact.postcode" required min="1000" max="9999"> <div ph-messages="formChangeContact.postcode"> <span class="help-block" data-ng-message="number, min, max">Die Postleitzahl ist ungültig.</span> </div> </div> <div class="col-xs-7 col-sm-5" data-has-error="formChangeContact.city"> <input type="text" class="form-control" id="city" name="city" data-ng-model="contact.city" required> <div ph-messages="formChangeContact.city"></div> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label" for="emailAddress">E-Mail-Adresse</label> <div class="col-sm-8" data-has-error="formChangeContact.emailAddress"> <input type="text" class="form-control" id="emailAddress" name="emailAddress" data-ng-model="contact.emailAddress"> <div ph-messages="formChangeContact.emailAddress"></div> </div> </div> <div class="form-group"> <label class="col-sm-4 control-label" for="phoneNumber">Telefon</label> <div class="col-sm-8" data-has-error="formChangeContact.phoneNumber"> <input type="text" class="form-control" id="phoneNumber" name="phoneNumber" data-ng-model="contact.phoneNumber"> <div ph-messages="formChangeContact.phoneNumber"></div> </div> </div> </form> </div> <div class="modal-footer"> <ph-submit class="btn-primary btn" data-ng-click="ok()" data-form="formChangeContact" data-text="Speichern"></ph-submit> <button class="btn btn-default" type="button" data-ng-click="cancel()">Abbrechen</button> </div>'),
a.put("modules/ui/views/directives/ph-vcard.html",'<div class="vcard" data-ng-show="vcard"> <address class="vcard-postal-address">{{vcard.postalAddress}}</address> <ul class="vcard-details" style="border-bottom-width:0; margin-bottom:0; padding:0"> <li data-ng-show="vcard.phoneNumber"><span class="glyphicon glyphicon-earphone" title="Telefonnummer"></span> {{vcard.phoneNumber}}</li> <li data-ng-show="vcard.emailAddress"><span class="glyphicon glyphicon-envelope" title="E-Mail-Adresse"></span> <ph-email-address data-email-address="vcard.emailAddress"></ph-email-address></li> <li data-ng-show="vcard.website"><span class="glyphicon glyphicon-globe" title="Webseite"></span> <a href="{{vcard.website}}">{{vcard.website}}</a></li> </ul> </div>'),a.put("modules/ui/views/directives/stSelectMultiple.html",'<div class="btn-group"> <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> {{dropdownLabel|orderStatusText}} <span class="caret"></span> </button> <ul class="dropdown-menu"> <li data-ng-repeat="item in distinctItems"> <div class="checkbox" style="margin-left:10px"> <input class="styled" type="checkbox" ng-model="item.selected" ng-click="filterChanged()" id="item_{{$index}}"> <label for="item_{{$index}}">{{item.value|orderStatusText}}</label> </div> </li> </ul> </div>'),a.put("modules/users/views/directives/ph-user-article-navbar.html",'<ul class="nav nav-tabs" style="margin-bottom:10px"> <li role="presentation" data-ui-sref-active="active"> <a href="" data-ui-sref="user.product.details({userId: userId, articleId: articleId, articleShortId: articleShortId})">#{{articleShortId}}</a> </li> <li role="presentation" data-ui-sref-active="active"> <a href="" data-ui-sref="user.product.description({userId: userId, articleId: articleId, articleShortId: articleShortId})">Beschreibung</a> </li> <li role="presentation" data-ui-sref-active="active"> <a href="" data-ui-sref="user.product.specification({userId: userId, articleId: articleId, articleShortId: articleShortId})">Spezifikation</a> </li> <li role="presentation" data-ui-sref-active="active"> <a href="" data-ui-sref="user.product.stock({userId: userId, articleId: articleId, articleShortId: articleShortId})">Bestand</a> </li> <li role="presentation" data-ui-sref-active="active"> <a href="" data-ui-sref="user.product.files({userId: userId, articleId: articleId, articleShortId: articleShortId})">Dateien</a> </li> <li role="presentation" data-ui-sref-active="active"> <a href="" data-ui-sref="user.product.actions({userId: userId, articleId: articleId})" title="Aktivitäten"><span class="glyphicon glyphicon-flash"></span></a> </li> </ul>'),a.put("modules/users/views/directives/ph-user-navbar.html",'<ul class="nav nav-tabs" style="margin-bottom:10px" data-ng-show="isHome"> <li role="presentation" data-ui-sref-active="active"> <a href="" data-ui-sref="user.home({userId: userId})" title="Profil"><span class="glyphicon glyphicon-user"></span></a> </li> <li role="presentation" data-ui-sref-active="active" active-nav="nestedTop" data-ng-show="user.store"> <a href="" data-ui-sref="user.products({userId: userId})">Material</a> </li> <li role="presentation" data-ui-sref-active="active" active-nav="nestedTop"> <a href="" data-ui-sref="user.orders.index({userId: userId})">Bestellungen</a> </li> <li role="presentation" class="pull-right" data-ui-sref-active="active"> <a href="" data-ui-sref="user.account({userId: userId})" title="Einstellungen"><span class="glyphicon glyphicon-cog"></span></a> </li> </ul>'),a.put("modules/users/views/directives/ph-user-vcard.html",'<div class="vcard"> <a class="vcard-avatar"> <img class="avatar img-responsive" src="" data-gravatar-src-once="user.emailAddress" data-gravatar-size="262"> </a> <h1 class="vcard-names"> <span class="vcard-fullname" data-view-title>{{user.fullName}}</span> </h1> <div class="vcard-memberships" data-ng-show="user.memberships.length > 0 || isHome"> <div class="panel panel-default"> <div class="panel-heading">Mitgliedschaften</div> <div class="panel-body" data-ng-hide="!isHome || user.memberships.length > 0"><a href="" data-ui-sref="organizations">Suche</a> und beantrage bei Organisationen die Mitgliedschaft um weitere Artikel auszuleihen oder von günstigeren Preisen zu profitieren!</div> <table class="table" data-ng-show="user.memberships.length"> <tr data-ng-repeat="membership in user.memberships"> <td><a href="/{{membership.organizationUrl}}"> {{membership.organizationName}}</a> </td> </tr> </table> </div> </div> </div>'),a.put("modules/users/views/home.html",'<div class="row"> <div class="col-sm-4 col-md-3 col-lg-3"> <ph-user-vcard data-user="user" data-ng-show="user" data-is-home="isHome"></ph-user-vcard> </div> <div class="col-sm-8 col-md-9 col-lg-9 col-xs-12"> <ph-store data-store="user.store" data-map="map" data-is-editable="isHome"></ph-store> <div data-ng-show="user && !user.store"> <div class="jumbotron" data-ng-show="isHome"> <p>Im Fall. Mit phundus kannst du auch dein eigenes Material vermieten. Ideal ist es wenn das Material Outdoorerfahrung oder Jugendaktivitäten unterstützt. Klicke dazu auf diesen Button und erfasse Standort mit Ansichtsauswahl auf der Karte und im Textfeld mögliche Zeiten wann das Material am ehesten übergeben werden kann. Anschliessend kannst du beliebiges Material erfassen, mit Pic’s ergänzen und bei Bedarf jederzeit bearbeiten. Probiere es aus!</p> <p class="text-right"> <button class="btn btn-primary btn-lg" data-ng-click="openStore()" data-ng-disabled="isOpeningStore"><span class="glyphicon glyphicon-refresh glyphicon-spin" data-ng-show="isOpeningStore"></span> Eigene Materialstelle eröffnen </button> </p> </div> <div class="jumbotron" data-ng-hide="isHome"> <p>Dieser Benutzer hat keine eigene Materialstelle eröffnet.</p> </div> </div> </div> </div> '),a.put("modules/users/views/order.html",'<h2 data-view-title>Bestellung {{order.orderShortId}}</h2> <div data-ng-show="order" class="row"> <div class="col-lg-4"> <p>Status: {{order.status | orderStatusText}}</p> <p>Vermieter: {{order.lessorName}}</p> <p>Erstellt: {{order.createdAtUtc | date:\'medium\'}}</p> <p>Bearbeitet: {{order.modifiedAtUtc | date:\'medium\'}}</p> </div> <div class="col-lg-4"> <p>{{order.lessee.name}}</p> <p>{{order.lessee.street}}</p> <p>{{order.lessee.postcode}} {{order.lessee.city}}</p> <p>{{order.lessee.memberNumber}}</p> </div> </div> <form name="orderForm" novalidate> <table data-ng-show="order" class="table table-bordered table-striped"> <thead> <tr> <th>#</th> <th>Artikel</th> <th>Verfügbar</th> <th>Von</th> <th>Bis</th> <th>Menge</th> <th>Stückpreis</th> <th>Total</th> <th data-ng-show="canEdit()"></th> </tr> </thead> <tbody> <tr data-ng-repeat="item in order.items"> <td>{{$index+1}}</td> <td>{{item.text}}</td> <td data-ng-show="item.isAvailable"><span class="glyphicon glyphicon-ok"></span></td> <td data-ng-show="!item.isAvailable"><span class="glyphicon glyphicon-remove"></span></td> <td data-ng-show="!item.editing">{{item.fromUtc | date:\'mediumDate\'}}</td> <td data-ng-show="!item.editing">{{item.toUtc | date:\'mediumDate\'}}</td> <td data-ng-show="!item.editing">{{item.quantity}}</td> <td data-ng-show="item.editing" class="col-sm-2" data-ng-class="{\'has-error\':!orderForm.item_{{$index}}_fromUtc.$valid && orderForm.item_{{$index}}_fromUtc.$touched}"> <p class="input-group"> <input class="form-control" type="text" required data-ng-model="item.fromUtc" name="item_{{$index}}_fromUtc" data-uib-datepicker-popup="mediumDate" data-is-open="fromUtcIsOpen"> <span class="input-group-btn"> <button type="button" class="btn btn-default" data-ng-click="fromUtcIsOpen = true"> <i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </td> <td data-ng-show="item.editing" class="col-sm-2" data-ng-class="{\'has-error\':!orderForm.item_{{$index}}_toUtc.$valid && orderForm.item_{{$index}}_toUtc.$touched}"> <p class="input-group"> <input class="form-control" type="text" required data-ng-model="item.toUtc" name="item_{{$index}}_toUtc" data-uib-datepicker-popup="mediumDate" data-is-open="toUtcIsOpen"> <span class="input-group-btn"> <button type="button" class="btn btn-default" data-ng-click="toUtcIsOpen = true"> <i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </td> <td data-ng-show="item.editing" class="col-sm-1" data-ng-class="{\'has-error\':!orderForm.item_{{$index}}_quantity.$valid && orderForm.item_{{$index}}_quantity.$touched}"> <input class="form-control" type="number" required data-ng-model="item.quantity" name="item_{{$index}}_quantity"> </td> <td>{{item.unitPrice | number:2}}</td> <td data-ng-show="!item.editing">{{item.lineTotal | number:2}}</td> <td data-ng-show="item.editing" class="col-sm-2" data-ng-class="{\'has-error\':!orderForm.item_{{$index}}_lineTotal.$valid && orderForm.item_{{$index}}_lineTotal.$touched}"> <p class="input-group"> <input class="form-control" type="text" required data-ng-model="item.lineTotal" name="item_{{$index}}_lineTotal"> <span class="input-group-btn"> <button class="btn btn-default" data-ng-click="calculateLineTotal(item)" title="Preis berechnen"> <i class="glyphicon glyphicon-refresh"></i></button> </span> </p> </td> <td data-ng-show="canEdit() && !item.editing"> <a data-ng-show="canEdit()" class="btn btn-default" href="" data-ng-click="editItem(item)" title="Bearbeiten"><span class="glyphicon glyphicon-edit"></span></a> <a data-ng-show="canEdit()" class="btn btn-default" href="" data-ng-click="removeItem(item)" title="Entfernen"><span class="glyphicon glyphicon-remove"></span></a> </td> <td data-ng-show="item.editing"> <a class="btn btn-default" href="" data-ng-click="saveEditedItem(item)" title="Speichern"><span class="glyphicon glyphicon-ok"></span></a> <a class="btn btn-default" href="" data-ng-click="cancelEditing(item)" title="Verwerfen"><span class="glyphicon glyphicon-asterisk"></span></a> </td> </tr> <tr style="font-weight:bold"> <td colspan="7" style="text-align:right">Total</td> <td>{{getTotal() | number:2}}</td> <td data-ng-show="canEdit()"></td> </tr> </tbody> </table> </form> <div class="row"> <div class="col-sm-6"> <a class="btn btn-default" href="" ph-history-back>Zurück</a> <a data-ng-show="order" class="btn btn-default" href="/api/orders/{{order.orderId}}/pdf">PDF</a> </div> <div ng-show="order" class="col-sm-6" style="text-align:right"> <a class="btn btn-default" data-ng-show="canEdit()" href="" data-ng-click="showAddItem(order)">Artikel hinzufügen</a> <a class="btn btn-primary" data-ng-show="canConfirm()" href="" data-ng-click="confirmOrder(order)">Bestätigen</a> <a class="btn btn-danger" data-ng-show="canReject()" href="" data-ng-click="rejectOrder(order)">Ablehnen</a> <a class="btn btn-primary" data-ng-show="canClose()" href="" data-ng-click="closeOrder(order)">Abschliessen</a> </div> </div>'),a.put("modules/users/views/orders.html",'<view-title>Bestellungen</view-title> <table class="table table-hover" data-st-set-filter="customFilter" data-st-table="vm.displayedCollection" data-st-safe-src="vm.rowCollection"> <thead> <tr> <th colspan="4"> <input data-st-search class="form-control" type="search" placeholder="Suchen..."> </th> <th colspan="2"> <st-select-multiple collection="vm.rowCollection" predicate="status"></st-select-multiple> </th> </tr> <tr> <th data-st-sort-default="true" data-st-sort="orderShortId">Nummer</th> <th data-st-sort="createdAtUtc">Erstellt</th> <th data-st-sort="lessorName">Vermieter</th> <th data-st-sort="lesseeName">Mieter</th> <th data-st-sort="status">Status</th> <th></th> </tr> </thead> <tbody> <tr data-ng-repeat="order in vm.displayedCollection"> <td>{{order.orderShortId}}</td> <td> <ph-date value="order.createdAtUtc"></ph-date> </td> <td>{{order.lessorName}}</td> <td>{{order.lessee.name}}</td> <td>{{order.status | orderStatusText}}</td> <td class="text-right"> <a class="btn btn-default btn-sm" href="" data-ui-sref="user.orders.order({userId: userId, orderId: order.orderId})">Öffnen</a> <a class="btn btn-default btn-sm" href="/api/v0/orders/{{order.orderId}}/pdf">PDF</a> </td> </tr> </tbody> </table> <div class="alert alert-info" data-ng-show="vm.rowCollection.length == 0"> <strong>Nichts gefunden!</strong> Es sind keine Bestellungen vorhanden. </div> <div class="alert alert-info" data-ng-show="vm.displayedCollection.length == 0 && vm.rowCollection.length > 0"> <strong>Nichts gefunden!</strong> Deine Suche liefert keine Ergebnisse. </div>'),a.put("modules/users/views/products.html",'<view-title>Material</view-title> <div class="ng-cloak alert alert-info" data-ng-show="!store && !loading"> <strong>Keine Materialstelle!</strong> Bevor du dein Material erfassen und verwalten kannst, musst du <a href="" data-ui-sref="user.home({userId: userId})">deine Materialstelle</a> eröffnen. </div> <table class="table table-hover" data-ng-show="store && !loading" data-st-table="displayedArticles" data-st-safe-src="articles"> <thead> <tr> <th colspan="5"> <input data-st-search class="form-control" type="search" placeholder="Suchen..."> </th> </tr> <tr> <th data-st-sort="articleShortId">Id</th> <th data-st-sort-default="true" data-st-sort="name">Name</th> <th class="text-right" data-st-sort="grossStock">Bestand</th> <th class="text-right" data-st-sort="publicPrice">Preis</th> <th class="text-right"> <a class="btn btn-primary" href="" data-ng-click="createArticle()">Neues Material</a> </th> </tr> </thead> <tbody> <tr data-ng-repeat="row in displayedArticles"> <td>{{row.articleShortId}}</td> <td>{{row.name}}</td> <td class="text-right">{{row.grossStock}}</td> <td class="text-right">{{row.publicPrice | number:2}}</td> <td class="text-right"> <a class="btn btn-default btn-sm" href="" data-ui-sref="user.product.details({userId: userId, articleId: row.articleId, articleShortId: row.articleShortId})">Bearbeiten</a> <a class="btn btn-danger btn-sm" href="" data-ng-click="delete(row.articleId, row.name)">Löschen</a> </td> </tr> </tbody> </table> <div class="alert alert-info" data-ng-show="store && !loading && articles.length == 0"> <strong>Nichts gefunden!</strong> Es sind keine Artikel vorhanden. </div> <div class="alert alert-info" data-ng-show="store && !loading && displayedArticles.length == 0 && articles.length > 0"> <strong>Nichts gefunden!</strong> Deine Suche liefert keine Ergebnisse. </div>')}]);